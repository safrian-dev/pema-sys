"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[6818],{66045:(e,t,s)=>{s.r(t),s.d(t,{default:()=>O});var l=s(63009),n=s(39773),a=s(17834),i=s(72791),r=s(76807),c=s(11087),o=s(43464),d=s(49037),u=s(14448),x=s(48089),m=s(24944),j=s(87681),g=s(87535),h=s(80184);const p=()=>{const{auth:e}=(0,a.Z)(),t=(0,x.Z)(),{isLoading:s,error:i,data:p}=(0,r.a)({queryKey:["projectsdash"],queryFn:()=>{var s;return t.get("".concat(null!==e&&void 0!==e&&null!==(s=e.user)&&void 0!==s&&s.roles.includes("Director")?"api/project":"api/project/".concat(null===e||void 0===e?void 0:e.user.employe_id,"/list"))).then((e=>e.data.data))}});return(0,h.jsx)(l.Z,{children:(0,h.jsx)(n.Z,{lg:"12",children:(0,h.jsx)(o.Z,{className:"",children:(0,h.jsxs)(d.Z,{className:"d-flex flex-column gap-2",children:[(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)(u.Z,{tag:"h4",children:"Projects"}),(0,h.jsx)(c.rU,{to:"projects",style:{textDecoration:"none"},children:"See all"})]}),s?"Loading...":i?"Something went wrong.":(0,h.jsx)(h.Fragment,{children:(null===p||void 0===p?void 0:p.length)>0?null===p||void 0===p?void 0:p.map(((e,t)=>{var s;return(0,h.jsxs)(c.rU,{className:"d-flex justify-content-between rounded-3 px-3 py-3 align-items-center link-item text-dark bg-light",to:"projects/details/".concat(e.project_id),style:{textDecoration:"none"},children:[(0,h.jsxs)("div",{className:"d-flex col-md-6 gap-3 align-items-center",children:[(0,h.jsx)("span",{className:"text-muted",children:t+1}),(0,h.jsx)("div",{className:"d-flex flex-column",children:(0,h.jsxs)("abbr",{title:e.project_name,style:{textDecoration:"none"},children:[(0,h.jsx)("span",{className:"fw-bold",style:{fontSize:"14px"},children:e.project_name.trim().length>40?"".concat(e.project_name.substring(0,42),"..."):e.project_name}),(0,h.jsx)("div",{children:(0,h.jsx)("span",{className:"badge text-primary bg-light-primary rounded-pill d-inline-block",children:(0,h.jsx)("small",{className:"fw-bold",children:e.organization_name})})})]})})]}),(0,h.jsxs)("div",{className:"d-flex flex-column",children:[(0,h.jsxs)("small",{className:"text-muted",style:{fontSize:"12px"},children:["Deadline"," "]}),(0,h.jsx)("small",{children:(0,g.Z)(null===(s=e.current_stage)||void 0===s?void 0:s.end_date)})]}),(0,h.jsx)("span",{className:"badge text-info bg-light-info rounded-pill d-inline-block fw-bold",style:{textTransform:"capitalize"},children:e.category}),(0,h.jsx)("div",{className:"d-flex gap-1 justify-content-center align-items-center",children:(0,h.jsx)("div",{className:"circular-progress",children:(0,h.jsx)(m.Z,{data:parseInt(e.total_progress.toFixed(),10)})})}),(0,h.jsx)("div",{className:"",children:(0,h.jsx)("img",{src:j,className:"rounded-circle",alt:"avatar",width:"45",height:"45"})})]},e.project_id)})):(0,h.jsx)("div",{className:"d-flex justify-content-center",children:(0,h.jsx)("p",{className:"text-muted",children:"No data yet."})})})]})})})})};var v=s(19623);const f=()=>{const{auth:e}=(0,a.Z)(),t=(0,x.Z)(),{isLoading:s,data:i}=(0,r.a)({queryKey:["totaldata"],queryFn:()=>t.get("api/project/".concat(null===e||void 0===e?void 0:e.user.employe_id,"/total-data")).then((e=>e.data.data))});return(0,h.jsxs)(l.Z,{children:[(0,h.jsx)(n.Z,{sm:"6",lg:"3",children:(0,h.jsx)(v.Z,{bg:"primary",icon:"wallet2",title:null===i||void 0===i?void 0:i.total_project,subtitle:"Total Project",loading:s})}),(0,h.jsx)(n.Z,{sm:"6",lg:"3",children:(0,h.jsx)(v.Z,{bg:"info",icon:"list-task",title:null===i||void 0===i?void 0:i.total_task,subtitle:"Total Task",loading:s})}),(0,h.jsx)(n.Z,{sm:"6",lg:"3",children:(0,h.jsx)(v.Z,{bg:"warning",icon:"clock-history",title:null===i||void 0===i?void 0:i.total_inprogress,subtitle:"Task In Progress",loading:s})}),(0,h.jsx)(n.Z,{sm:"6",lg:"3",children:(0,h.jsx)(v.Z,{bg:"success",icon:"check-circle",title:null===i||void 0===i?void 0:i.total_done,subtitle:"Task Done",loading:s})})]})};var b=s(4828),y=s(30690),N=s.n(y),Z=s(31043),k=s(74458);const _=()=>{var e;const{auth:t}=(0,a.Z)(),[s,l]=(0,i.useState)(),[n,j]=(0,i.useState)(void 0),[g,p]=(0,i.useState)(),[v,f]=(0,i.useState)(!1),y=(0,x.Z)(),{isLoading:_,error:w,data:O,refetch:D}=(0,r.a)({queryKey:["tasklist"],queryFn:()=>{var e;return y.get("".concat(null!==t&&void 0!==t&&null!==(e=t.user)&&void 0!==e&&e.roles.includes("Director")?"api/task/".concat(null===t||void 0===t?void 0:t.user.employe_id,"/favorite/list"):"api/task/".concat(null===t||void 0===t?void 0:t.user.employe_id,"/recent/activity"))).then((e=>e.data.data))}});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.Z,{children:(0,h.jsxs)(d.Z,{className:"d-flex flex-column gap-1",children:[(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsxs)(u.Z,{tag:"h4",children:[null!==t&&void 0!==t&&null!==(e=t.user)&&void 0!==e&&e.roles.includes("Director")?"Marked":"Recent"," Tasks"]}),(0,h.jsx)(c.rU,{to:"projects",style:{textDecoration:"none"},children:"See all"})]}),(0,h.jsx)("div",{className:"d-flex flex-column gap-2 justify-content-center",children:_?"Loading...":w?"Something went wrong.":(null===O||void 0===O?void 0:O.length)>0?O.map(((e,n)=>{var a;return(0,h.jsxs)("div",{className:"d-flex justify-content-between gap-1",children:[(0,h.jsxs)("div",{className:"d-flex col-sm-".concat(null!==t&&void 0!==t&&t.user.roles.includes("Director")?"11":"12"," justify-content-between align-items-center p-2 rounded-3 link-item-bordered bg-white"),style:{border:"1px dashed #21C1D6"},children:[(0,h.jsxs)(c.rU,{type:"button",className:"d-flex gap-2 col-md-10 align-items-center text-muted",style:{fontSize:"13px",textDecoration:"none"},onClick:()=>{return t=e,f(!0),void j(t);var t},children:[(0,h.jsx)("span",{children:n+1}),(0,h.jsxs)("div",{className:"d-flex flex-column col-md-12",children:[(0,h.jsx)("div",{className:"d-flex",children:(0,h.jsx)("span",{className:"text-dark",children:(null===e||void 0===e?void 0:e.task_title.trim().length)>35?"".concat(null===e||void 0===e||null===(a=e.task_title)||void 0===a?void 0:a.substring(0,35),"..."):null===e||void 0===e?void 0:e.task_title})}),(0,h.jsxs)("div",{className:"d-flex align-items-end gap-3",children:[(0,h.jsx)("span",{className:"badge text-primary bg-light-primary rounded-pill d-inline-block",children:0===e.status?"To do":1===e.status?"In progress":2===e.status?"Review":3===e.status?"Approved":"Revision"}),(0,h.jsxs)("span",{style:{fontSize:"12px"},className:"text-muted",children:["Deadline: ",null===e||void 0===e?void 0:e.end_date]})]})]})]}),(0,h.jsx)("div",{children:(0,h.jsx)("div",{className:"d-flex gap-1 justify-content-center align-items-center",children:(0,h.jsx)("div",{className:"circular-progress",children:(0,h.jsx)(m.Z,{data:parseInt(e.task_progress.toFixed(),10),color:"red"})})})})]}),(null===t||void 0===t?void 0:t.user.roles.includes("Director"))&&(g&&s===(null===e||void 0===e?void 0:e.task_id)?(0,h.jsx)("div",{className:"d-flex align-items-center",children:(0,h.jsx)(b.Z,{size:"sm",color:"warning"})}):(0,h.jsx)("abbr",{title:"Mark task",style:{textDecoration:"none"},className:"d-flex align-items-center",children:(0,h.jsx)("button",{type:"button",className:"fav-btn",onClick:()=>(async e=>{l(e),p(!0),await y.post("api/task/".concat(null===t||void 0===t?void 0:t.user.employe_id,"/").concat(e,"/favorite")).then((e=>{D(),(0,Z.Z)("success",e.data.message)})).catch((()=>{(0,Z.Z)("error","Bad request.")})),l(),p(!1)})(null===e||void 0===e?void 0:e.task_id),children:(0,h.jsx)(N(),{icon:"star",className:"is_favorite"})})}))]},e.task_id)})):(0,h.jsx)("div",{className:"d-flex justify-content-center",children:(0,h.jsx)("p",{className:"text-muted",children:"No data yet."})})})]})}),v&&(0,h.jsx)(k.Z,{modal:v,setModal:f,toggle:()=>{f(!v)},task:n,mode:"activities"})]})},w=()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(f,{}),(0,h.jsxs)(l.Z,{children:[(0,h.jsx)(n.Z,{lg:"8",children:(0,h.jsx)(p,{})}),(0,h.jsx)(n.Z,{lg:"4",children:(0,h.jsx)(_,{})})]})]}),O=()=>{const{auth:e}=(0,a.Z)();return e.user.roles.includes("Director")?(0,h.jsx)(w,{}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(f,{}),(0,h.jsxs)(l.Z,{children:[(0,h.jsx)(n.Z,{lg:"8",children:(0,h.jsx)(p,{})}),(0,h.jsx)(n.Z,{lg:"4",children:(0,h.jsx)(_,{})})]})]})}},19623:(e,t,s)=>{s.d(t,{Z:()=>r});var l=s(43464),n=s(49037),a=s(80971),i=s(80184);const r=e=>{let{bg:t,icon:s,title:r,subtitle:c,loading:o}=e;return(0,i.jsx)(l.Z,{children:(0,i.jsx)(n.Z,{children:(0,i.jsxs)("div",{className:"d-flex align-items-center",children:[(0,i.jsx)("span",{className:"circle-box md-box text-dark-white bg-".concat(t),children:(0,i.jsx)("i",{className:"fs-2 bi bi-".concat(s)})}),(0,i.jsxs)("div",{className:"ms-3",children:[(0,i.jsx)("h2",{className:"mb-1 fw-normal",children:o?"...":r}),(0,i.jsx)(a.Z,{className:"fs-6 text-muted",children:c})]})]})})})}},16354:(e,t,s)=>{s.d(t,{Z:()=>j});var l=s(72791),n=s(52007),a=s.n(n),i=s(81694),r=s.n(i),c=s(9622),o=["className","cssModule","color","innerRef","pill","tag"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e},d.apply(this,arguments)}function u(e,t){if(null==e)return{};var s,l,n=function(e,t){if(null==e)return{};var s,l,n={},a=Object.keys(e);for(l=0;l<a.length;l++)s=a[l],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)s=a[l],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}var x={children:a().node,className:a().string,color:a().string,cssModule:a().object,innerRef:a().oneOfType([a().object,a().func,a().string]),pill:a().bool,tag:c.iC};function m(e){var t=e.className,s=e.cssModule,n=e.color,a=void 0===n?"secondary":n,i=e.innerRef,x=e.pill,m=void 0!==x&&x,j=e.tag,g=void 0===j?"span":j,h=u(e,o),p=(0,c.mx)(r()(t,"badge","bg-"+a,!!m&&"rounded-pill"),s);return h.href&&"span"===g&&(g="a"),l.createElement(g,d({},h,{className:p,ref:i}))}m.propTypes=x;const j=m},80971:(e,t,s)=>{s.d(t,{Z:()=>j});var l=s(72791),n=s(52007),a=s.n(n),i=s(81694),r=s.n(i),c=s(9622),o=["className","cssModule","tag"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e},d.apply(this,arguments)}function u(e,t){if(null==e)return{};var s,l,n=function(e,t){if(null==e)return{};var s,l,n={},a=Object.keys(e);for(l=0;l<a.length;l++)s=a[l],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)s=a[l],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}var x={className:a().string,cssModule:a().object,tag:c.iC};function m(e){var t=e.className,s=e.cssModule,n=e.tag,a=void 0===n?"div":n,i=u(e,o),x=(0,c.mx)(r()(t,"card-subtitle"),s);return l.createElement(a,d({},i,{className:x}))}m.propTypes=x;const j=m}}]);
//# sourceMappingURL=6818.42960d26.chunk.js.map