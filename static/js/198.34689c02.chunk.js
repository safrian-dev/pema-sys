"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[198],{31043:(e,t,n)=>{n.d(t,{F:()=>l,Z:()=>i});n(72791);var a=n(65218),s=n(80184);const l=()=>(0,s.jsx)(a.x7,{toastOptions:{className:"",style:{}}}),i=(e,t)=>{((e,t)=>{"success"===e?a.ZP.success(t):"create"===e?(0,a.ZP)(t,{icon:"\ud83e\udd17"}):"start"===e?(0,a.ZP)("Lets get started, cheer up!",{icon:"\ud83d\udcaa"}):"done"===e?(0,a.ZP)("Horeee, task done!",{icon:"\ud83d\udc4f"}):a.ZP.error(t)})(e,t)}},22198:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var a=n(72791),s=n(16354),l=n(43464),i=n(49037),r=n(63009),o=n(39773),d=n(19127),c=n(71513),u=n(46724),v=n(55211),p=n(94938),h=n(8118),m=n(76167),j=n(42976),x=n(55472),g=n(30690),b=n.n(g),f=n(90235),y=n(43513),Z=n(10829),O=n(57689),N=n(48089),_=n(23606),w=(n(87369),n(31043)),P=n(80184);const S=(0,f.ZP)(),C=()=>{var e,t,n,g,f,C,k,D,R,A,L,q,I,E,F,M,T,z;const U=(0,a.useRef)(null),{assetId:H}=(0,O.UO)(),[V,K]=(0,a.useState)(!1),[B,G]=(0,a.useState)(!1),[J,Q]=(0,a.useState)(!1),[W,X]=(0,a.useState)([]),[Y,$]=(0,a.useState)(),[ee,te]=(0,a.useState)([]),[ne,ae]=(0,a.useState)(""),[se,le]=(0,a.useState)(""),[ie,re]=(0,a.useState)(""),[oe,de]=(0,a.useState)(""),[ce,ue]=(0,a.useState)(""),[ve,pe]=(0,a.useState)(""),[he,me]=(0,a.useState)(new Date),je=(0,N.Z)(),xe=(0,Z.h)({queries:[{queryKey:["assetDetail",0],queryFn:()=>je.get("dapi/inven/".concat(H)).then((e=>e.data.data))},{queryKey:["assigne",1],queryFn:()=>je.get("api/employe/assignment-list").then((e=>e.data.data))}]}),{refetch:ge}=xe[0],be=()=>{G(!B)},fe=()=>{if(Q(!J),!J){var e,t,n;le(xe[0].data.name),re(xe[0].data.price),de(xe[0].data.vendor),ue(xe[0].data.acquisition),pe(xe[0].data.location);const a=[];null===(e=xe[0])||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.responsible_list)||void 0===n||n.map((e=>a.push({label:e.first_name,value:e.employe_id}))),X(a)}},ye=(e,t)=>{if(K(!V),!V){$(e);const n=[];null===t||void 0===t||t.map((e=>n.push({label:e.first_name,value:e.employe_id}))),X(n)}},Ze=e=>{X(e)},Oe={weekday:"long",year:"numeric",month:"short",day:"numeric"},Ne=[{name:"Asset Number",selector:e=>e.asset_number},{name:"Responsible",selector:e=>{var t;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(s.Z,{color:"warning",onClick:()=>ye(null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.res_list),className:"ms-2",children:"+ add"}),null===e||void 0===e||null===(t=e.res_list)||void 0===t?void 0:t.map((e=>(0,P.jsx)(s.Z,{color:"primary",className:"ms-2",children:null===e||void 0===e?void 0:e.first_name},null===e||void 0===e?void 0:e.employe_id)))]})}},{name:"Last Udpate",selector:e=>"".concat(new Date(e.updated_at).toLocaleDateString("en-us",Oe)," ").concat(new Date(e.updated_at).toLocaleTimeString()," ")}];(0,a.useEffect)((()=>{ge()}),[H]);const _e={id:0,responsible:""},we=e=>{var t;(t=e.target.files[0],new Promise((e=>{let n="";const a=new FileReader;a.readAsDataURL(t),a.onload=()=>{n=a.result,e(n)}}))).then((e=>{(async e=>{const t={id:H,file:e};await je.post("dapi/inven/update/image",t).then((e=>{var t,n;null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.success?((0,w.Z)("success","".concat(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)),ge(),me(new Date)):(0,w.Z)("error","failed !!")})).catch((e=>{(0,w.Z)("error",e)}))})(e)})).catch((e=>{console.log(e)}))};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(l.Z,{children:(0,P.jsxs)(i.Z,{children:[(0,P.jsxs)(r.Z,{className:"content",children:[void 0!==(null===(e=xe[0])||void 0===e||null===(t=e.data)||void 0===t?void 0:t.file)?(0,P.jsx)(o.Z,{sm:"12",lg:"5",className:" py-4 image",style:{backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundImage:"url('".concat("https://api.ptpema.co.id/","inven").concat(null===(n=xe[0].data)||void 0===n?void 0:n.file,"?s=").concat(he,"')")},children:(0,P.jsx)("div",{className:"d-flex justify-content-end",children:(0,P.jsx)(d.Z,{color:"dark",outline:!0,className:"pb-0",size:"sm",onClick:()=>{U.current.click()},children:(0,P.jsx)(b(),{icon:"photo_camera"})})})}):"",(0,P.jsxs)(o.Z,{sm:"12",lg:"7",className:"py-4 text",children:[(0,P.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,P.jsx)("h2",{className:"text-bold mb-0",children:null===(g=xe[0].data)||void 0===g?void 0:g.name}),(0,P.jsx)(d.Z,{color:"dark",size:"sm",outline:!0,className:"pb-0",onClick:fe,children:(0,P.jsx)(b(),{icon:"mode_edit"})})]}),(0,P.jsx)("hr",{}),(0,P.jsx)("table",{className:"w-100",children:(0,P.jsxs)("tbody",{children:[(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:"Parent Asset Number"}),(0,P.jsx)("td",{className:"text-end",children:null===(f=xe[0].data)||void 0===f?void 0:f.asset_number})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:"Type"}),(0,P.jsx)("td",{className:"text-end",children:null===(C=xe[0].data)||void 0===C?void 0:C.type_name})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:"Acquisition Price"}),(0,P.jsx)("td",{className:"text-end",children:(0,_.Z)(null===(k=xe[0].data)||void 0===k?void 0:k.price)})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:"Current Asset Value"}),(0,P.jsx)("td",{className:"text-end",children:(0,_.Z)(null===(D=xe[0].data)||void 0===D?void 0:D.current)})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:"Vendor"}),(0,P.jsx)("td",{className:"text-end",children:null===(R=xe[0].data)||void 0===R?void 0:R.vendor})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:"Acquisition Time"}),(0,P.jsx)("td",{className:"text-end",children:null===(A=xe[0].data)||void 0===A?void 0:A.acquisition})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:"Age "}),(0,P.jsx)("td",{className:"text-end",children:null===(L=xe[0].data)||void 0===L?void 0:L.old})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:"Amount "}),(0,P.jsxs)("td",{className:"text-end",children:[null===(q=xe[0].data)||void 0===q?void 0:q.amount," items"]})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:"Location "}),(0,P.jsx)("td",{className:"text-end",children:null===(I=xe[0].data)||void 0===I?void 0:I.location})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:"Last Update"}),(0,P.jsx)("td",{className:"text-end",children:"".concat(new Date(null===(E=xe[0].data)||void 0===E?void 0:E.updated_at).toLocaleDateString("en-us",Oe)," ").concat(new Date(null===(F=xe[0].data)||void 0===F?void 0:F.updated_at).toLocaleTimeString())})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:"Responsible "}),(0,P.jsx)("td",{className:"text-end",children:null===(M=xe[0].data)||void 0===M||null===(T=M.responsible_list)||void 0===T?void 0:T.map((e=>(0,P.jsx)(s.Z,{color:"primary",className:"ms-2",children:null===e||void 0===e?void 0:e.first_name},null===e||void 0===e?void 0:e.employe_id)))})]})]})})]})]}),(0,P.jsx)(y.ZP,{className:"mt-0",columns:Ne,data:null===(z=xe[0].data)||void 0===z?void 0:z.child,pagination:!0,selectableRows:!0,onSelectedRowsChange:e=>{let{selectedRows:t}=e;te(t)},subHeader:!0,subHeaderComponent:(0,P.jsxs)(c.Z,{className:"me-auto mt-5",size:"sm",children:[(0,P.jsx)(d.Z,{className:"pb-0",outline:!0,disabled:0===(null===ee||void 0===ee?void 0:ee.length),onClick:async()=>{await je.post("dapi/inven/child/del",{data:ee}).then((e=>{var t,n,a;null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.success?((0,w.Z)("success","".concat(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)),ge(),te([])):(0,w.Z)("error","".concat(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message))})).catch((e=>{ye(),te([]),(0,w.Z)("error",e)}))},children:(0,P.jsx)(b(),{icon:"delete_forever"})}),(0,P.jsx)(d.Z,{outline:!0,color:"success",onClick:be,children:"+ Add Child"})]})})]})}),(0,P.jsxs)(u.Z,{isOpen:V,toggle:ye,children:[(0,P.jsx)(v.Z,{toggle:ye,children:"Add Another Employee"}),(0,P.jsxs)(p.Z,{children:[(0,P.jsx)(x.ZP,{components:S,isMulti:!0,value:W,options:xe[1].data,onChange:Ze,isClearable:W.some((e=>!e.isFixed))}),(0,P.jsx)("div",{className:"d-grid gap-2 mt-3",children:(0,P.jsx)(d.Z,{onClick:()=>(async()=>{const e=[];null===W||void 0===W||W.map((t=>e.push("//".concat(t.value,"//")))),_e.id=Y,_e.responsible=e.toLocaleString(),await je.post("dapi/inven/child/update",_e).then((e=>{var t;null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.success&&(ye(),ge())})).catch((e=>{ye(),(0,w.Z)("error",e)}))})(),children:"Update Data"})})]})]}),(0,P.jsxs)(u.Z,{isOpen:B,toggle:be,children:[(0,P.jsx)(v.Z,{toggle:be,children:"Set Number Of Child"}),(0,P.jsxs)(p.Z,{children:[(0,P.jsx)(h.Z,{type:"number",min:"1",onChange:e=>ae(e.target.value)}),(0,P.jsx)("div",{className:"d-grid gap-2 mt-3",children:(0,P.jsx)(d.Z,{onClick:()=>(async()=>{const e={id_parent:+H,amount:+ne};console.log(e),await je.post("dapi/inven/child/add",e).then((e=>{var t;null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.success&&(be(),ge(),(0,w.Z)("success","added succesfully !"))})).catch((e=>{be(),(0,w.Z)("error",e)}))})(),children:"Add Childs"})})]})]}),(0,P.jsxs)(u.Z,{isOpen:J,toggle:fe,children:[(0,P.jsx)(v.Z,{toggle:fe,children:"New Inventory Data"}),(0,P.jsxs)(p.Z,{children:[(0,P.jsxs)(m.Z,{children:[(0,P.jsx)(j.Z,{for:"in_name",children:"Inventory Name"}),(0,P.jsx)(h.Z,{id:"in_name",name:"in_name",type:"text",onChange:e=>le(e.target.value),value:se})]}),(0,P.jsxs)(m.Z,{children:[(0,P.jsx)(j.Z,{for:"in_harga_beli",children:"Purchase Price"}),(0,P.jsx)(h.Z,{id:"in_harga_beli",name:"in_harga_beli",type:"number",onChange:e=>re(e.target.value),value:ie})]}),(0,P.jsxs)(m.Z,{children:[(0,P.jsxs)(j.Z,{for:"in_vendor",children:["Vendor ",(0,P.jsx)("small",{children:"(optional)"})]}),(0,P.jsx)(h.Z,{id:"in_vendor",name:"in_vendor",type:"text",accept:"image/*",onChange:e=>de(e.target.value),value:oe})]}),(0,P.jsxs)(m.Z,{children:[(0,P.jsx)(j.Z,{for:"time",children:"Acquisition Time"}),(0,P.jsx)(h.Z,{id:"time",name:"date",placeholder:"date placeholder",type:"date",onChange:e=>ue(e.target.value),value:ce})]}),(0,P.jsxs)(m.Z,{children:[(0,P.jsx)(j.Z,{for:"in_location",children:"Detail Location"}),(0,P.jsx)(h.Z,{id:"in_location",name:"in_location",type:"textarea",onChange:e=>pe(e.target.value),value:ve})]}),(0,P.jsxs)(m.Z,{children:[(0,P.jsx)(j.Z,{for:"in_harga_beli",children:"Responsible"}),(0,P.jsx)(x.ZP,{components:S,isMulti:!0,value:W,options:xe[1].data,onChange:Ze})]}),(0,P.jsx)(m.Z,{children:(0,P.jsx)("div",{className:"d-grid gap-2 mt-4",children:(0,P.jsx)(d.Z,{type:"submit",onClick:async()=>{const e=[];null===W||void 0===W||W.map((t=>e.push("//".concat(t.value,"//"))));const t={id:H,name:se,price:ie,vendor:oe,acquisition:ce,location:ve,responsible:e.toLocaleString()};await je.post("dapi/inven/update",t).then((e=>{var t,n,a;(fe(),null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.success)?((0,w.Z)("success","".concat(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)),ge()):(0,w.Z)("error","".concat(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message))})).catch((e=>{fe(),(0,w.Z)("error",e)})),console.log(t)},children:"Save Data"})})})]})]}),(0,P.jsx)("input",{style:{display:"none"},ref:U,type:"file",accept:"image/*",onChange:e=>we(e)})]})}},23606:(e,t,n)=>{n.d(t,{Z:()=>a});const a=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e)},16354:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(72791),s=n(52007),l=n.n(s),i=n(81694),r=n.n(i),o=n(9622),d=["className","cssModule","color","innerRef","pill","tag"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(this,arguments)}function u(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var v={children:l().node,className:l().string,color:l().string,cssModule:l().object,innerRef:l().oneOfType([l().object,l().func,l().string]),pill:l().bool,tag:o.iC};function p(e){var t=e.className,n=e.cssModule,s=e.color,l=void 0===s?"secondary":s,i=e.innerRef,v=e.pill,p=void 0!==v&&v,h=e.tag,m=void 0===h?"span":h,j=u(e,d),x=(0,o.mx)(r()(t,"badge","bg-"+l,!!p&&"rounded-pill"),n);return j.href&&"span"===m&&(m="a"),a.createElement(m,c({},j,{className:x,ref:i}))}p.propTypes=v;const h=p},71513:(e,t,n)=>{n.d(t,{Z:()=>j});var a=n(72791),s=n(52007),l=n.n(s),i=n(81694),r=n.n(i),o=n(9622),d=["className","cssModule","size","vertical","tag"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(this,arguments)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var h={"aria-label":l().string,className:l().string,cssModule:l().object,role:l().string,size:l().string,tag:o.iC,vertical:l().bool};function m(e){var t=e.className,n=e.cssModule,s=e.size,l=e.vertical,i=e.tag,h=void 0===i?"div":i,m=p(e,d),j=(0,o.mx)(r()(t,!!s&&"btn-group-"+s,l?"btn-group-vertical":"btn-group"),n);return a.createElement(h,c({},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({role:"group"},m),{className:j}))}m.propTypes=h;const j=m},87369:()=>{}}]);
//# sourceMappingURL=198.34689c02.chunk.js.map