"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[2198],{31043:(e,t,n)=>{n.d(t,{F:()=>l,Z:()=>i});n(72791);var s=n(65218),a=n(80184);const l=()=>(0,a.jsx)(s.x7,{toastOptions:{className:"",style:{}}}),i=(e,t)=>{((e,t)=>{"success"===e?s.ZP.success(t):"create"===e?(0,s.ZP)(t,{icon:"\ud83e\udd17"}):"start"===e?(0,s.ZP)("Lets get started, cheer up!",{icon:"\ud83d\udcaa"}):"done"===e?(0,s.ZP)("Horeee, task done!",{icon:"\ud83d\udc4f"}):s.ZP.error(t)})(e,t)}},22198:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var s=n(72791),a=n(16354),l=n(43464),i=n(49037),r=n(63009),o=n(39773),d=n(19127),c=n(71513),u=n(46724),v=n(55211),h=n(94938),p=n(8118),m=n(76167),j=n(42976),x=n(55472),g=n(30690),b=n.n(g),f=n(90235),y=n(43513),Z=n(10829),O=n(57689),N=n(48089),_=n(17834),w=n(23606),P=(n(87369),n(31043)),S=n(80184);const C=(0,f.ZP)(),k=()=>{var e,t,n,g,f,k,D,A,R,L,q,I,E,F,M,T,z,U;const{auth:H}=(0,_.Z)(),V=(0,s.useRef)(null),{assetId:K}=(0,O.UO)(),[B,G]=(0,s.useState)(!1),[J,Q]=(0,s.useState)(!1),[W,X]=(0,s.useState)(!1),[Y,$]=(0,s.useState)([]),[ee,te]=(0,s.useState)(),[ne,se]=(0,s.useState)([]),[ae,le]=(0,s.useState)(""),[ie,re]=(0,s.useState)(""),[oe,de]=(0,s.useState)(""),[ce,ue]=(0,s.useState)(""),[ve,he]=(0,s.useState)(""),[pe,me]=(0,s.useState)(""),[je,xe]=(0,s.useState)(new Date),ge=(0,N.Z)(),be=(0,Z.h)({queries:[{queryKey:["assetDetail",0],queryFn:()=>ge.get("dapi/inven/".concat(K)).then((e=>e.data.data))},{queryKey:["assigne",1],queryFn:()=>ge.get("api/employe/assignment-list?search=all").then((e=>e.data.data))}]}),{refetch:fe}=be[0],ye=()=>{Q(!J)},Ze=()=>{if(X(!W),!W){var e,t,n;re(be[0].data.name),de(be[0].data.price),ue(be[0].data.vendor),he(be[0].data.acquisition),me(be[0].data.location);const s=[];null===(e=be[0])||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.responsible_list)||void 0===n||n.map((e=>s.push({label:e.first_name,value:e.employe_id}))),$(s)}},Oe=(e,t)=>{if(G(!B),!B){te(e);const n=[];null===t||void 0===t||t.map((e=>n.push({label:e.first_name,value:e.employe_id}))),$(n)}},Ne=e=>{$(e)},_e={weekday:"long",year:"numeric",month:"short",day:"numeric"},we=[{name:"Asset Number",selector:e=>e.asset_number},{name:"Responsible",selector:e=>{var t;return(0,S.jsxs)(S.Fragment,{children:[H.user.roles.includes("PicAsset")?(0,S.jsx)(a.Z,{color:"warning",onClick:()=>Oe(null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.res_list),className:"ms-2",children:"+ add"}):"",null===e||void 0===e||null===(t=e.res_list)||void 0===t?void 0:t.map((e=>(0,S.jsx)(a.Z,{color:"primary",className:"ms-2",children:null===e||void 0===e?void 0:e.first_name},null===e||void 0===e?void 0:e.employe_id)))]})}},{name:"Last Udpate",selector:e=>"".concat(new Date(e.updated_at).toLocaleDateString("en-us",_e)," ").concat(new Date(e.updated_at).toLocaleTimeString()," ")}];(0,s.useEffect)((()=>{fe()}),[K]);const Pe={id:0,responsible:""},Se=e=>{var t;(t=e.target.files[0],new Promise((e=>{let n="";const s=new FileReader;s.readAsDataURL(t),s.onload=()=>{n=s.result,e(n)}}))).then((e=>{(async e=>{const t={id:K,file:e};await ge.post("dapi/inven/update/image",t).then((e=>{var t,n;null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.success?((0,P.Z)("success","".concat(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)),fe(),xe(new Date)):(0,P.Z)("error","failed !!")})).catch((e=>{(0,P.Z)("error",e)}))})(e)})).catch((e=>{console.log(e)}))};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(l.Z,{children:(0,S.jsxs)(i.Z,{children:[(0,S.jsxs)(r.Z,{className:"content",children:[void 0!==(null===(e=be[0])||void 0===e||null===(t=e.data)||void 0===t?void 0:t.file)?(0,S.jsx)(o.Z,{sm:"12",lg:"5",className:" py-4 image",style:{backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundImage:"url('".concat("https://api.ptpema.co.id/","inven").concat(null===(n=be[0].data)||void 0===n?void 0:n.file,"?s=").concat(je,"')")},children:H.user.roles.includes("PicAsset")?(0,S.jsx)("div",{className:"d-flex justify-content-end",children:(0,S.jsx)(d.Z,{color:"dark",outline:!0,className:"pb-0",size:"sm",onClick:()=>{V.current.click()},children:(0,S.jsx)(b(),{icon:"photo_camera"})})}):""}):"",(0,S.jsxs)(o.Z,{sm:"12",lg:"7",className:"py-4 text",children:[(0,S.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,S.jsx)("h2",{className:"text-bold mb-0",children:null===(g=be[0].data)||void 0===g?void 0:g.name}),H.user.roles.includes("PicAsset")?(0,S.jsx)(d.Z,{color:"dark",size:"sm",outline:!0,className:"pb-0",onClick:Ze,children:(0,S.jsx)(b(),{icon:"mode_edit"})}):""]}),(0,S.jsx)("hr",{}),(0,S.jsx)("table",{className:"w-100",children:(0,S.jsxs)("tbody",{children:[(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Parent Asset Number"}),(0,S.jsx)("td",{className:"text-end",children:null===(f=be[0].data)||void 0===f?void 0:f.asset_number})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Type"}),(0,S.jsx)("td",{className:"text-end",children:null===(k=be[0].data)||void 0===k?void 0:k.type_name})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Acquisition Price"}),(0,S.jsx)("td",{className:"text-end",children:(0,w.Z)(null===(D=be[0].data)||void 0===D?void 0:D.price)})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Current Asset Value"}),(0,S.jsx)("td",{className:"text-end",children:(0,w.Z)(null===(A=be[0].data)||void 0===A?void 0:A.current)})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Vendor"}),(0,S.jsx)("td",{className:"text-end",children:null===(R=be[0].data)||void 0===R?void 0:R.vendor})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Acquisition Time"}),(0,S.jsx)("td",{className:"text-end",children:null===(L=be[0].data)||void 0===L?void 0:L.acquisition})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Age "}),(0,S.jsx)("td",{className:"text-end",children:null===(q=be[0].data)||void 0===q?void 0:q.old})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Amount "}),(0,S.jsxs)("td",{className:"text-end",children:[null===(I=be[0].data)||void 0===I?void 0:I.amount," items"]})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Location "}),(0,S.jsx)("td",{className:"text-end",children:null===(E=be[0].data)||void 0===E?void 0:E.location})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Last Update"}),(0,S.jsx)("td",{className:"text-end",children:"".concat(new Date(null===(F=be[0].data)||void 0===F?void 0:F.updated_at).toLocaleDateString("en-us",_e)," ").concat(new Date(null===(M=be[0].data)||void 0===M?void 0:M.updated_at).toLocaleTimeString())})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Responsible "}),(0,S.jsx)("td",{className:"text-end",children:null===(T=be[0].data)||void 0===T||null===(z=T.responsible_list)||void 0===z?void 0:z.map((e=>(0,S.jsx)(a.Z,{color:"primary",className:"ms-2",children:null===e||void 0===e?void 0:e.first_name},null===e||void 0===e?void 0:e.employe_id)))})]})]})})]})]}),(0,S.jsx)(y.ZP,{className:"mt-0",columns:we,data:null===(U=be[0].data)||void 0===U?void 0:U.child,pagination:!0,selectableRows:!!H.user.roles.includes("PicAsset")||"",onSelectedRowsChange:e=>{let{selectedRows:t}=e;se(t)},subHeader:!0,subHeaderComponent:H.user.roles.includes("PicAsset")?(0,S.jsxs)(c.Z,{className:"me-auto mt-5",size:"sm",children:[(0,S.jsx)(d.Z,{className:"pb-0",outline:!0,disabled:0===(null===ne||void 0===ne?void 0:ne.length),onClick:async()=>{await ge.post("dapi/inven/child/del",{data:ne}).then((e=>{var t,n,s;null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.success?((0,P.Z)("success","".concat(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)),fe(),se([])):(0,P.Z)("error","".concat(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message))})).catch((e=>{Oe(),se([]),(0,P.Z)("error",e)}))},children:(0,S.jsx)(b(),{icon:"delete_forever"})}),(0,S.jsx)(d.Z,{outline:!0,color:"success",onClick:ye,children:"+ Add Child"})]}):""})]})}),(0,S.jsxs)(u.Z,{isOpen:B,toggle:Oe,children:[(0,S.jsx)(v.Z,{toggle:Oe,children:"Add Another Employee"}),(0,S.jsxs)(h.Z,{children:[(0,S.jsx)(x.ZP,{components:C,isMulti:!0,value:Y,options:be[1].data,onChange:Ne,isClearable:Y.some((e=>!e.isFixed))}),(0,S.jsx)("div",{className:"d-grid gap-2 mt-3",children:(0,S.jsx)(d.Z,{onClick:()=>(async()=>{const e=[];null===Y||void 0===Y||Y.map((t=>e.push("//".concat(t.value,"//")))),Pe.id=ee,Pe.responsible=e.toLocaleString(),await ge.post("dapi/inven/child/update",Pe).then((e=>{var t;null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.success&&(Oe(),fe())})).catch((e=>{Oe(),(0,P.Z)("error",e)}))})(),children:"Update Data"})})]})]}),(0,S.jsxs)(u.Z,{isOpen:J,toggle:ye,children:[(0,S.jsx)(v.Z,{toggle:ye,children:"Set Number Of Child"}),(0,S.jsxs)(h.Z,{children:[(0,S.jsx)(p.Z,{type:"number",min:"1",onChange:e=>le(e.target.value)}),(0,S.jsx)("div",{className:"d-grid gap-2 mt-3",children:(0,S.jsx)(d.Z,{onClick:()=>(async()=>{const e={id_parent:+K,amount:+ae};console.log(e),await ge.post("dapi/inven/child/add",e).then((e=>{var t;null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.success&&(ye(),fe(),(0,P.Z)("success","added succesfully !"))})).catch((e=>{ye(),(0,P.Z)("error",e)}))})(),children:"Add Childs"})})]})]}),(0,S.jsxs)(u.Z,{isOpen:W,toggle:Ze,children:[(0,S.jsx)(v.Z,{toggle:Ze,children:"New Inventory Data"}),(0,S.jsxs)(h.Z,{children:[(0,S.jsxs)(m.Z,{children:[(0,S.jsx)(j.Z,{for:"in_name",children:"Inventory Name"}),(0,S.jsx)(p.Z,{id:"in_name",name:"in_name",type:"text",onChange:e=>re(e.target.value),value:ie})]}),(0,S.jsxs)(m.Z,{children:[(0,S.jsx)(j.Z,{for:"in_harga_beli",children:"Purchase Price"}),(0,S.jsx)(p.Z,{id:"in_harga_beli",name:"in_harga_beli",type:"number",onChange:e=>de(e.target.value),value:oe})]}),(0,S.jsxs)(m.Z,{children:[(0,S.jsxs)(j.Z,{for:"in_vendor",children:["Vendor ",(0,S.jsx)("small",{children:"(optional)"})]}),(0,S.jsx)(p.Z,{id:"in_vendor",name:"in_vendor",type:"text",accept:"image/*",onChange:e=>ue(e.target.value),value:ce})]}),(0,S.jsxs)(m.Z,{children:[(0,S.jsx)(j.Z,{for:"time",children:"Acquisition Time"}),(0,S.jsx)(p.Z,{id:"time",name:"date",placeholder:"date placeholder",type:"date",onChange:e=>he(e.target.value),value:ve})]}),(0,S.jsxs)(m.Z,{children:[(0,S.jsx)(j.Z,{for:"in_location",children:"Detail Location"}),(0,S.jsx)(p.Z,{id:"in_location",name:"in_location",type:"textarea",onChange:e=>me(e.target.value),value:pe})]}),(0,S.jsxs)(m.Z,{children:[(0,S.jsx)(j.Z,{for:"in_harga_beli",children:"Responsible"}),(0,S.jsx)(x.ZP,{components:C,isMulti:!0,value:Y,options:be[1].data,onChange:Ne})]}),(0,S.jsx)(m.Z,{children:(0,S.jsx)("div",{className:"d-grid gap-2 mt-4",children:(0,S.jsx)(d.Z,{type:"submit",onClick:async()=>{const e=[];null===Y||void 0===Y||Y.map((t=>e.push("//".concat(t.value,"//"))));const t={id:K,name:ie,price:oe,vendor:ce,acquisition:ve,location:pe,responsible:e.toLocaleString()};await ge.post("dapi/inven/update",t).then((e=>{var t,n,s;(Ze(),null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.success)?((0,P.Z)("success","".concat(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)),fe()):(0,P.Z)("error","".concat(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message))})).catch((e=>{Ze(),(0,P.Z)("error",e)})),console.log(t)},children:"Save Data"})})})]})]}),(0,S.jsx)("input",{style:{display:"none"},ref:V,type:"file",accept:"image/*",onChange:e=>Se(e)})]})}},23606:(e,t,n)=>{n.d(t,{Z:()=>s});const s=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e)},16354:(e,t,n)=>{n.d(t,{Z:()=>p});var s=n(72791),a=n(52007),l=n.n(a),i=n(81694),r=n.n(i),o=n(9622),d=["className","cssModule","color","innerRef","pill","tag"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},c.apply(this,arguments)}function u(e,t){if(null==e)return{};var n,s,a=function(e,t){if(null==e)return{};var n,s,a={},l=Object.keys(e);for(s=0;s<l.length;s++)n=l[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)n=l[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var v={children:l().node,className:l().string,color:l().string,cssModule:l().object,innerRef:l().oneOfType([l().object,l().func,l().string]),pill:l().bool,tag:o.iC};function h(e){var t=e.className,n=e.cssModule,a=e.color,l=void 0===a?"secondary":a,i=e.innerRef,v=e.pill,h=void 0!==v&&v,p=e.tag,m=void 0===p?"span":p,j=u(e,d),x=(0,o.mx)(r()(t,"badge","bg-"+l,!!h&&"rounded-pill"),n);return j.href&&"span"===m&&(m="a"),s.createElement(m,c({},j,{className:x,ref:i}))}h.propTypes=v;const p=h},71513:(e,t,n)=>{n.d(t,{Z:()=>j});var s=n(72791),a=n(52007),l=n.n(a),i=n(81694),r=n.n(i),o=n(9622),d=["className","cssModule","size","vertical","tag"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},c.apply(this,arguments)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if(null==e)return{};var n,s,a=function(e,t){if(null==e)return{};var n,s,a={},l=Object.keys(e);for(s=0;s<l.length;s++)n=l[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)n=l[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p={"aria-label":l().string,className:l().string,cssModule:l().object,role:l().string,size:l().string,tag:o.iC,vertical:l().bool};function m(e){var t=e.className,n=e.cssModule,a=e.size,l=e.vertical,i=e.tag,p=void 0===i?"div":i,m=h(e,d),j=(0,o.mx)(r()(t,!!a&&"btn-group-"+a,l?"btn-group-vertical":"btn-group"),n);return s.createElement(p,c({},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({role:"group"},m),{className:j}))}m.propTypes=p;const j=m},87369:()=>{}}]);
//# sourceMappingURL=2198.df7d9137.chunk.js.map