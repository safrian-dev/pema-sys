"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[8099],{48099:(s,a,e)=>{e.r(a),e.d(a,{default:()=>g});var r=e(72791),n=e(57823),i=e(63009),t=e(39773),o=e(43464),c=e(49037),d=e(76167),l=e(42976),m=e(19127),h=e(4828),u=e(11087),p=e(22339),w=e(8007),x=e(93863),j=e(70615),f=e(48089),N=e(80184);const g=()=>{const[s,a]=(0,r.useState)(!1),[e,g]=(0,r.useState)(!1),[b,Z]=(0,r.useState)(!0),[P,k]=(0,r.useState)(!1),[S,v]=(0,r.useState)(!1),[y,C]=(0,r.useState)(""),B=(0,f.Z)(),O=new URLSearchParams(window.location.search).get("key");(0,r.useEffect)((()=>{!async function(){g(!0),B.get("api/auth/forgot-password/".concat(O)).then((()=>{g(!1),Z(!0)})).catch((()=>{g(!1),Z(!1)}))}()}),[O]);const q=w.Ry().shape({password:w.Z_().required("New Password is required").min(8,"Password must be at least 8 characters").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,"Must Contain 8 Characters, One Uppercase, One Lowercase, One Number and One Special Case Character"),confirmPassword:w.Z_().required("Confirm Password is required").oneOf([w.iH("password"),null],"Passwords must match")});return(0,N.jsxs)("div",{className:"loginBox",children:[(0,N.jsx)(x.r,{className:"position-absolute left bottom-0"}),(0,N.jsx)(j.r,{className:"position-absolute end-0 top"}),(0,N.jsx)(n.Z,{fluid:!0,className:"h-100",children:(0,N.jsx)(i.Z,{className:"justify-content-center align-items-center h-100",children:(0,N.jsx)(t.Z,{lg:"12",className:"loginContainer",children:(0,N.jsx)(o.Z,{className:"rounded-4",children:e?(0,N.jsx)(c.Z,{className:"p-4 m-1",children:(0,N.jsx)("p",{className:"text-center",children:"Loading.."})}):(0,N.jsx)(c.Z,{className:"p-4 m-1",children:b?(0,N.jsx)(p.J9,{initialValues:{password:"",confirmPassword:""},validationSchema:q,onSubmit:s=>(async s=>{a(!0),s.token=O,await B.post("api/auth/new-password",s).then((()=>{k(!0),v(!1),a(!1),C("Password berhasil diubah. Silakan login kembali."),document.getElementById("form-pass").reset(),setTimeout((()=>{window.location.href="/auth/login"}),5e3)})).catch((()=>{k(!1),a(!1),v(!0),C("Gagal mengirim data. Silakan coba lagi")}))})(s),children:a=>{let{errors:e,touched:r}=a;return(0,N.jsxs)(N.Fragment,{children:[S||!P&&(0,N.jsx)("h4",{className:"text-center",children:y}),(0,N.jsxs)(p.l0,{id:"form-pass",children:[(0,N.jsxs)(d.Z,{children:[(0,N.jsx)(l.Z,{htmlFor:"password",className:"text-center",children:"Password Baru"}),(0,N.jsx)(p.gN,{id:"password",name:"password",type:"password",autoComplete:"on",className:"form-control".concat(e.password&&r.password?" is-invalid":""," rounded-3")}),(0,N.jsx)(p.Bc,{name:"password",component:"div",className:"invalid-feedback"})]}),(0,N.jsxs)(d.Z,{children:[(0,N.jsx)(l.Z,{htmlFor:"confirmPassword",className:"text-center",children:"Konfirmasi Password Baru"}),(0,N.jsx)(p.gN,{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"on",className:"form-control".concat(e.confirmPassword&&r.confirmPassword?" is-invalid":""," rounded-3")}),(0,N.jsx)(p.Bc,{name:"confirmPassword",component:"div",className:"invalid-feedback"})]}),(0,N.jsx)(d.Z,{children:(0,N.jsx)("div",{className:"d-grid gap-2",children:(0,N.jsx)(m.Z,{type:"submit",color:"primary",className:"btn btn-primary btn-block mb-1 rounded-3",disabled:s,children:s?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(h.Z,{className:"me-2",size:"sm",color:"light"}),"loading .."]}):"Submit"})})})]})]})}}):(0,N.jsx)("div",{className:"text-center",children:(0,N.jsxs)("h4",{children:["Link tidak valid atau expired. ",(0,N.jsx)("br",{}),(0,N.jsxs)("i",{children:[" ",(0,N.jsx)(u.rU,{to:"/auth/forgot-password",children:"Kirim ulang link"})]})]})})})})})})})]})}}}]);
//# sourceMappingURL=8099.a3b3764c.chunk.js.map