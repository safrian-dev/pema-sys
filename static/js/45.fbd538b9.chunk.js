"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[45],{31043:(e,t,s)=>{s.d(t,{F:()=>l,Z:()=>r});s(72791);var n=s(65218),a=s(80184);const l=()=>(0,a.jsx)(n.x7,{toastOptions:{className:"",style:{}}}),r=(e,t)=>{((e,t)=>{"success"===e?n.ZP.success(t):"create"===e?(0,n.ZP)(t,{icon:"\ud83e\udd17"}):"start"===e?(0,n.ZP)("Lets get started, cheer up!",{icon:"\ud83d\udcaa"}):"done"===e?(0,n.ZP)("Horeee, task done!",{icon:"\ud83d\udc4f"}):n.ZP.error(t)})(e,t)}},24944:(e,t,s)=>{s.d(t,{Z:()=>a});s(72791);var n=s(80184);const a=e=>{let{data:t,color:s}=e;return(0,n.jsx)("div",{className:"flex-wrapper",children:(0,n.jsx)("div",{className:"single-chart",children:(0,n.jsxs)("svg",{viewBox:"0 0 36 36",className:"circular-chart ".concat(100===t?"green":100!==t?"blue":s),children:[(0,n.jsx)("path",{className:"circle-bg",d:"M18 2.0845\r a 15.9155 15.9155 0 0 1 0 31.831\r a 15.9155 15.9155 0 0 1 0 -31.831"}),(0,n.jsx)("path",{className:"circle",strokeDasharray:"".concat(t,", 100"),d:"M18 2.0845\r a 15.9155 15.9155 0 0 1 0 31.831\r a 15.9155 15.9155 0 0 1 0 -31.831"}),100===t?(0,n.jsx)("text",{x:"18",y:"22.35",className:"percentage",style:{fontSize:"14px"},children:"\u2714"}):(0,n.jsxs)("text",{x:"18",y:"22.35",className:"percentage",children:[t,"%"]})]})})})}},87535:(e,t,s)=>{s.d(t,{Z:()=>n});const n=e=>{const t=new Date(e);return"".concat(t.getDate()," ").concat(["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Aug","Sep","Oct","Nov","Des"][t.getMonth()]," ").concat(t.getFullYear())}},66045:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var n=s(63009),a=s(39773),l=s(72791),r=s(43464),i=s(49037),c=s(14448),o=s(4828),d=s(76807),u=s(11087),x=s(30690),m=s.n(x),j=s(48089),h=s(17834),p=s(24944),g=s(31043),v=s(80184);const f=()=>{var e;const{auth:t}=(0,h.Z)(),[s,n]=(0,l.useState)(),[a,x]=(0,l.useState)(),f=(0,j.Z)(),{isLoading:b,error:y,data:N,refetch:Z}=(0,d.a)({queryKey:["tasklist"],queryFn:()=>{var e;return f.get("".concat(null!==t&&void 0!==t&&null!==(e=t.user)&&void 0!==e&&e.roles.includes("Director")?"api/task/".concat(null===t||void 0===t?void 0:t.user.employe_id,"/favorite/list"):"api/task/".concat(null===t||void 0===t?void 0:t.user.employe_id,"/recent/activity"))).then((e=>e.data.data))}});return(0,v.jsx)(r.Z,{children:(0,v.jsxs)(i.Z,{className:"d-flex flex-column gap-1",children:[(0,v.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,v.jsxs)(c.Z,{tag:"h4",children:[null!==t&&void 0!==t&&null!==(e=t.user)&&void 0!==e&&e.roles.includes("Director")?"Marked":"Recent"," Tasks"]}),(0,v.jsx)(u.rU,{to:"projects",style:{textDecoration:"none"},children:"See all"})]}),(0,v.jsx)("div",{className:"d-flex flex-column gap-2 justify-content-center",children:b?"Loading...":y?"Something went wrong.":(null===N||void 0===N?void 0:N.length)>0?N.map(((e,l)=>{var r;return(0,v.jsxs)("div",{className:"d-flex justify-content-between gap-1",children:[(0,v.jsxs)("div",{className:"d-flex col-sm-".concat(null!==t&&void 0!==t&&t.user.roles.includes("Director")?"11":"12"," justify-content-between align-items-center p-2 rounded-3 link-item-bordered bg-white"),style:{border:"1px dashed #21C1D6"},children:[(0,v.jsxs)(u.rU,{className:"d-flex gap-2 col-md-10 align-items-center text-muted",style:{fontSize:"13px",textDecoration:"none"},to:"projects/details/".concat(e.project_id),children:[(0,v.jsx)("span",{children:l+1}),(0,v.jsxs)("div",{className:"d-flex flex-column col-md-12",children:[(0,v.jsx)("div",{className:"d-flex",children:(0,v.jsx)("span",{className:"text-dark",children:(null===e||void 0===e?void 0:e.task_title.trim().length)>35?"".concat(null===e||void 0===e||null===(r=e.task_title)||void 0===r?void 0:r.substring(0,35),"..."):null===e||void 0===e?void 0:e.task_title})}),(0,v.jsxs)("div",{className:"d-flex align-items-end gap-3",children:[(0,v.jsx)("span",{className:"badge text-primary bg-light-primary rounded-pill d-inline-block",children:0===e.status?"To do":1===e.status?"In progress":2===e.status?"Review":3===e.status?"Approved":"Revision"}),(0,v.jsxs)("span",{style:{fontSize:"12px"},className:"text-muted",children:["Deadline: ",null===e||void 0===e?void 0:e.end_date]})]})]})]}),(0,v.jsx)("div",{children:(0,v.jsx)("div",{className:"d-flex gap-1 justify-content-center align-items-center",children:(0,v.jsx)("div",{className:"circular-progress",children:(0,v.jsx)(p.Z,{data:parseInt(e.task_progress.toFixed(),10),color:"red"})})})})]}),(null===t||void 0===t?void 0:t.user.roles.includes("Director"))&&(a&&s===(null===e||void 0===e?void 0:e.task_id)?(0,v.jsx)("div",{className:"d-flex align-items-center",children:(0,v.jsx)(o.Z,{size:"sm",color:"warning"})}):(0,v.jsx)("abbr",{title:"Mark task",style:{textDecoration:"none"},className:"d-flex align-items-center",children:(0,v.jsx)("button",{type:"button",className:"fav-btn",onClick:()=>(async e=>{n(e),x(!0),await f.post("api/task/".concat(null===t||void 0===t?void 0:t.user.employe_id,"/").concat(e,"/favorite")).then((e=>{Z(),(0,g.Z)("success",e.data.message)})).catch((e=>{console.log(e),(0,g.Z)("error","Bad request.")})),n(),x(!1)})(null===e||void 0===e?void 0:e.task_id),children:(0,v.jsx)(m(),{icon:"star",className:"is_favorite"})})}))]},e.task_id)})):(0,v.jsx)("div",{className:"d-flex justify-content-center",children:(0,v.jsx)("p",{className:"text-muted",children:"No data yet."})})})]})})};var b=s(87681),y=s(87535);const N=()=>{const{auth:e}=(0,h.Z)(),t=(0,j.Z)(),{isLoading:s,error:l,data:o}=(0,d.a)({queryKey:["projectsdash"],queryFn:()=>{var s;return t.get("".concat(null!==e&&void 0!==e&&null!==(s=e.user)&&void 0!==s&&s.roles.includes("Director")?"api/project":"api/project/".concat(null===e||void 0===e?void 0:e.user.employe_id,"/list"))).then((e=>e.data.data))}});return(0,v.jsx)(n.Z,{children:(0,v.jsx)(a.Z,{lg:"12",children:(0,v.jsx)(r.Z,{className:"",children:(0,v.jsxs)(i.Z,{className:"d-flex flex-column gap-2",children:[(0,v.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,v.jsx)(c.Z,{tag:"h4",children:"Projects"}),(0,v.jsx)(u.rU,{to:"projects",style:{textDecoration:"none"},children:"See all"})]}),s?"Loading...":l?"Something went wrong.":(0,v.jsx)(v.Fragment,{children:(null===o||void 0===o?void 0:o.length)>0?null===o||void 0===o?void 0:o.map(((e,t)=>{var s;return(0,v.jsxs)(u.rU,{className:"d-flex justify-content-between rounded-3 px-3 py-3 align-items-center link-item text-dark bg-light",to:"projects/details/".concat(e.project_id),style:{textDecoration:"none"},children:[(0,v.jsxs)("div",{className:"d-flex col-md-6 gap-3 align-items-center",children:[(0,v.jsx)("span",{className:"text-muted",children:t+1}),(0,v.jsx)("div",{className:"d-flex flex-column",children:(0,v.jsxs)("abbr",{title:e.project_name,style:{textDecoration:"none"},children:[(0,v.jsx)("span",{className:"fw-bold",style:{fontSize:"14px"},children:e.project_name.trim().length>40?"".concat(e.project_name.substring(0,42),"..."):e.project_name}),(0,v.jsx)("div",{children:(0,v.jsx)("span",{className:"badge text-primary bg-light-primary rounded-pill d-inline-block",children:(0,v.jsx)("small",{className:"fw-bold",children:e.organization_name})})})]})})]}),(0,v.jsxs)("div",{className:"d-flex flex-column",children:[(0,v.jsxs)("small",{className:"text-muted",style:{fontSize:"12px"},children:["Deadline"," "]}),(0,v.jsx)("small",{children:(0,y.Z)(null===(s=e.current_stage)||void 0===s?void 0:s.end_date)})]}),(0,v.jsx)("span",{className:"badge text-info bg-light-info rounded-pill d-inline-block fw-bold",style:{textTransform:"capitalize"},children:e.category}),(0,v.jsx)("div",{className:"d-flex gap-1 justify-content-center align-items-center",children:(0,v.jsx)("div",{className:"circular-progress",children:(0,v.jsx)(p.Z,{data:parseInt(e.total_progress.toFixed(),10)})})}),(0,v.jsx)("div",{className:"",children:(0,v.jsx)("img",{src:b,className:"rounded-circle",alt:"avatar",width:"45",height:"45"})})]},e.project_id)})):(0,v.jsx)("div",{className:"d-flex justify-content-center",children:(0,v.jsx)("p",{className:"text-muted",children:"No data yet."})})})]})})})})};var Z=s(19623);const k=()=>{const{auth:e}=(0,h.Z)(),t=(0,j.Z)(),{isLoading:s,data:l}=(0,d.a)({queryKey:["totaldata"],queryFn:()=>t.get("api/project/".concat(null===e||void 0===e?void 0:e.user.employe_id,"/total-data")).then((e=>e.data.data))});return(0,v.jsxs)(n.Z,{children:[(0,v.jsx)(a.Z,{sm:"6",lg:"3",children:(0,v.jsx)(Z.Z,{bg:"primary",icon:"wallet2",title:null===l||void 0===l?void 0:l.total_project,subtitle:"Total Project",loading:s})}),(0,v.jsx)(a.Z,{sm:"6",lg:"3",children:(0,v.jsx)(Z.Z,{bg:"info",icon:"list-task",title:null===l||void 0===l?void 0:l.total_task,subtitle:"Total Task",loading:s})}),(0,v.jsx)(a.Z,{sm:"6",lg:"3",children:(0,v.jsx)(Z.Z,{bg:"warning",icon:"clock-history",title:null===l||void 0===l?void 0:l.total_inprogress,subtitle:"Task In Progress",loading:s})}),(0,v.jsx)(a.Z,{sm:"6",lg:"3",children:(0,v.jsx)(Z.Z,{bg:"success",icon:"check-circle",title:null===l||void 0===l?void 0:l.total_done,subtitle:"Task Done",loading:s})})]})},w=()=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(k,{}),(0,v.jsxs)(n.Z,{children:[(0,v.jsx)(a.Z,{lg:"8",children:(0,v.jsx)(N,{})}),(0,v.jsx)(a.Z,{lg:"4",children:(0,v.jsx)(f,{})})]})]}),_=()=>{const{auth:e}=(0,h.Z)();return e.user.roles.includes("Director")?(0,v.jsx)(w,{}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(k,{}),(0,v.jsxs)(n.Z,{children:[(0,v.jsx)(a.Z,{lg:"8",children:(0,v.jsx)(N,{})}),(0,v.jsx)(a.Z,{lg:"4",children:(0,v.jsx)(f,{})})]})]})}},19623:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(43464),a=s(49037),l=s(80971),r=s(80184);const i=e=>{let{bg:t,icon:s,title:i,subtitle:c,loading:o}=e;return(0,r.jsx)(n.Z,{children:(0,r.jsx)(a.Z,{children:(0,r.jsxs)("div",{className:"d-flex align-items-center",children:[(0,r.jsx)("span",{className:"circle-box md-box text-dark-white bg-".concat(t),children:(0,r.jsx)("i",{className:"fs-2 bi bi-".concat(s)})}),(0,r.jsxs)("div",{className:"ms-3",children:[(0,r.jsx)("h2",{className:"mb-1 fw-normal",children:o?"...":i}),(0,r.jsx)(l.Z,{className:"fs-6 text-muted",children:c})]})]})})})}},80971:(e,t,s)=>{s.d(t,{Z:()=>j});var n=s(72791),a=s(52007),l=s.n(a),r=s(81694),i=s.n(r),c=s(9622),o=["className","cssModule","tag"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},d.apply(this,arguments)}function u(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var x={className:l().string,cssModule:l().object,tag:c.iC};function m(e){var t=e.className,s=e.cssModule,a=e.tag,l=void 0===a?"div":a,r=u(e,o),x=(0,c.mx)(i()(t,"card-subtitle"),s);return n.createElement(l,d({},r,{className:x}))}m.propTypes=x;const j=m},14448:(e,t,s)=>{s.d(t,{Z:()=>j});var n=s(72791),a=s(52007),l=s.n(a),r=s(81694),i=s.n(r),c=s(9622),o=["className","cssModule","tag"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},d.apply(this,arguments)}function u(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var x={className:l().string,cssModule:l().object,tag:c.iC};function m(e){var t=e.className,s=e.cssModule,a=e.tag,l=void 0===a?"div":a,r=u(e,o),x=(0,c.mx)(i()(t,"card-title"),s);return n.createElement(l,d({},r,{className:x}))}m.propTypes=x;const j=m},87681:(e,t,s)=>{e.exports=s.p+"static/media/user1.6ac95ef9bc0c027733ea.jpg"},76807:(e,t,s)=>{s.d(t,{a:()=>m});var n=s(73734),a=s(21135),l=s(72791),r=s(69538),i=s(97413),c=s(76153),o=s(96403),d=s(30909),u=s(49952),x=s(38447);function m(e,t,s){return function(e,t){const s=(0,o.NL)({context:e.context}),n=(0,d.S)(),a=(0,c._)(),m=s.defaultQueryOptions(e);m._optimisticResults=n?"isRestoring":"optimistic",m.onError&&(m.onError=r.V.batchCalls(m.onError)),m.onSuccess&&(m.onSuccess=r.V.batchCalls(m.onSuccess)),m.onSettled&&(m.onSettled=r.V.batchCalls(m.onSettled)),(0,x.Fb)(m),(0,u.pf)(m,a),(0,u.JN)(a);const[j]=l.useState((()=>new t(s,m))),h=j.getOptimisticResult(m);if((0,i.$)(l.useCallback((e=>{const t=n?()=>{}:j.subscribe(r.V.batchCalls(e));return j.updateResult(),t}),[j,n]),(()=>j.getCurrentResult()),(()=>j.getCurrentResult())),l.useEffect((()=>{j.setOptions(m,{listeners:!1})}),[m,j]),(0,x.SB)(m,h,n))throw(0,x.j8)(m,j,a);if((0,u.KJ)({result:h,errorResetBoundary:a,useErrorBoundary:m.useErrorBoundary,query:j.getCurrentQuery()}))throw h.error;return m.notifyOnChangeProps?h:j.trackResult(h)}((0,n._v)(e,t,s),a.z)}}}]);
//# sourceMappingURL=45.fbd538b9.chunk.js.map