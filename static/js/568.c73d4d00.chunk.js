(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[568],{16581:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var l=s(72791),i=s(76807),n=s(57689),r=s(39773),d=s(43464),a=s(49037),o=s(14448),c=s(63009),h=s(19127),x=s(8118),j=s(16354),m=s(4828),u=s(30690),v=s.n(u),b=s(46272),g=s(74458),p=s(14097),f=s(48089),y=s(87681),w=s(17834),k=s(31043),C=s(21234),N=(s(42459),s(35754),s(80184));const S=()=>{const{auth:e}=(0,w.Z)(),[t,s]=(0,l.useState)(!1),[u,S]=(0,l.useState)(void 0),[Z,_]=(0,l.useState)(),[z,G]=(0,l.useState)(),[T,D]=(0,l.useState)(!1),[F,A]=(0,l.useState)(),[R,W]=(0,l.useState)(),P=(0,f.Z)(),{search:L}=(0,n.TH)(),{isLoading:B,error:I,data:M,refetch:H}=(0,i.a)({queryKey:["inprogresstasks"],queryFn:()=>P.get("api/task/23/activities/all".concat(L)).then((e=>(A(e.data.project),e.data.data)))});(0,l.useEffect)((()=>{W(M)}),[M]);const q=e=>{s(!0),S(e)},E=async t=>{_(t),G(!0),await P.post("api/task/".concat(null===e||void 0===e?void 0:e.user.employe_id,"/").concat(t,"/favorite")).then((e=>{H(),(0,k.Z)("success",e.data.message)})).catch((()=>{(0,k.Z)("error","Something went wrong.")})),_(),G(!1)},J=["Director"],U=["Manager"];(0,l.useEffect)((()=>{null!==e&&void 0!==e&&e.user.roles.find((e=>J.includes(e)))&&D(!0)}),[e]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(r.Z,{children:(0,N.jsx)(d.Z,{className:"rounded-3",children:(0,N.jsxs)(a.Z,{children:[(0,N.jsx)(o.Z,{tag:"h4",children:"Inprogress Tasks"}),B?"loading...":I?"Something went wrong.":(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(r.Z,{className:"bg-light-secondary my-auto p-2 rounded-3",children:(0,N.jsxs)(c.Z,{children:[(0,N.jsx)(r.Z,{sm:"12 mb-2",md:"6",children:(0,N.jsxs)("div",{className:"d-flex gap-2",children:[(0,N.jsxs)(h.Z,{type:"button",className:"d-flex align-items-center gap-2 rounded-3",color:"light",size:"sm",children:[(0,N.jsx)(v(),{icon:"filter_list",style:{fontSize:"12px"}}),"Sort"]}),(0,N.jsxs)(h.Z,{type:"button",className:"d-flex align-items-center gap-2 rounded-3",color:"light",size:"sm",children:[(0,N.jsx)(v(),{icon:"tune",style:{fontSize:"12px"}}),"Filters"]})]})}),(0,N.jsx)(r.Z,{sm:"12",md:"6",children:(0,N.jsxs)("div",{className:"d-flex gap-3 col-md-6 w-100",children:[(0,N.jsx)("div",{className:"w-100 position-relative",children:(0,N.jsx)(x.Z,{type:"text",className:"rounded-3",bsSize:"md",placeholder:"Search task...",onChange:e=>(e=>{const t=M.filter((t=>t.task_title.toLowerCase().includes(e.toLowerCase())));W(t)})(e.target.value)})}),(null===e||void 0===e?void 0:e.user.roles.find((e=>U.includes(e))))&&(0,N.jsx)(b.WD,{document:(0,N.jsx)(p.Z,{projectTitle:F,data:M}),fileName:"Task Report - ".concat(null===F||void 0===F?void 0:F.project_number," - ").concat(null===F||void 0===F?void 0:F.division),style:{textDecoration:"none"},children:(0,N.jsx)(h.Z,{type:"button",className:"btn btn-light-info text-info rounded-3 d-flex py-2",children:(0,N.jsx)(v(),{icon:"file_download",style:{fontSize:"18px"}})})})]})})]})}),(0,N.jsxs)(r.Z,{sm:"12 overflow-auto",children:[(0,N.jsxs)("h6",{className:"fw-bold mt-3",children:["List of tasks from ",null===F||void 0===F?void 0:F.division]}),(0,N.jsxs)("table",{className:"rounded-corners",children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{width:"30",children:"#"}),(0,N.jsx)("th",{children:"Task title"}),(0,N.jsx)("th",{width:"",children:"Status"}),(0,N.jsx)("th",{children:"Progress"}),(0,N.jsx)("th",{width:"100",children:"PIC"}),T&&(0,N.jsx)("th",{width:"50"})]})}),(0,N.jsx)("tbody",{children:(null===R||void 0===R?void 0:R.length)>0?null===R||void 0===R?void 0:R.map(((e,t)=>{var s,i,n,r;return(0,N.jsxs)(l.Fragment,{children:[(0,N.jsxs)("tr",{children:[(0,N.jsxs)("td",{children:[t+1,"."]}),(0,N.jsxs)("td",{style:{cursor:"pointer"},onClick:()=>q(e),children:[(0,N.jsx)("span",{style:{fontWeight:"600"},children:e.task_title}),(0,N.jsx)("br",{}),(0,N.jsxs)(j.Z,{color:"light",className:"text-muted",children:[null===e||void 0===e||null===(s=e.subtasks)||void 0===s?void 0:s.length," subtask"]}),"  ",(0,N.jsxs)(j.Z,{color:"light",className:"text-muted",children:[(0,N.jsx)(v(),{icon:"comment",style:{fontSize:"12px"}}),e.comments]})]}),(0,N.jsx)("td",{children:0===e.status?(0,N.jsx)(j.Z,{color:"light",className:"text-dark",children:"To Do"}):1===e.status?(0,N.jsx)(j.Z,{color:"warning",children:"In Progress"}):2===e.status?(0,N.jsx)(j.Z,{color:"light",className:"text-dark",children:"Under Review"}):3===e.status?(0,N.jsx)(j.Z,{color:"success",children:"Approved"}):(0,N.jsx)(j.Z,{color:"danger",children:"Revision"})}),(0,N.jsx)("td",{children:(0,N.jsxs)("span",{className:"badge bg-light-success text-primary rounded-pill d-inline-block fw-bold",children:[null===e||void 0===e||null===(i=e.task_progress)||void 0===i?void 0:i.toFixed(),"%"]})}),(0,N.jsx)("td",{children:(0,N.jsx)("div",{className:"members",children:(0,N.jsxs)("div",{className:"members-item",children:[null===e||void 0===e||null===(n=e.pics)||void 0===n?void 0:n.map(((e,t)=>{var s;return t<2&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("img",{id:"tooltip-".concat(e.id),src:y,className:"ava-pic rounded-circle",alt:"avatar",width:"35",height:"35"}),(0,N.jsx)(C.Z,{title:e.first_name,id:null===(s=e.id)||void 0===s?void 0:s.toString()})]})})),(null===e||void 0===e||null===(r=e.pics)||void 0===r?void 0:r.length)>2&&(0,N.jsxs)("div",{className:"member-plus bg-light-info text-info fw-bold",children:["+",e.pics.length-2]})]})})}),T&&(0,N.jsx)("td",{className:"text-center",children:z&&Z===e.task_id?(0,N.jsx)(m.Z,{size:"sm",color:"warning"}):(0,N.jsx)("abbr",{title:"Mark task",style:{textDecoration:"none"},children:(0,N.jsx)("button",{type:"button",className:"fav-btn",onClick:()=>E(e.task_id),children:(0,N.jsx)(v(),{icon:"star",className:"".concat(e.isFavorite&&"is_favorite")})})})})]}),e.subtasks.length>0&&e.subtasks.map((e=>{var t,s,l;return(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{}),(0,N.jsxs)("td",{onClick:()=>q(e),style:{cursor:"pointer"},children:[e.task_title,(0,N.jsx)("br",{}),(0,N.jsxs)(j.Z,{color:"light",className:"text-muted",children:[(0,N.jsx)(v(),{icon:"comment",style:{fontSize:"12px"}}),e.comments]})]}),(0,N.jsx)("td",{children:"-"}),(0,N.jsx)("td",{children:(0,N.jsxs)("span",{className:"badge bg-light-primary text-primary rounded-pill d-inline-block fw-bold",children:[null===e||void 0===e||null===(t=e.task_progress)||void 0===t?void 0:t.toFixed(),"%"]})}),(0,N.jsx)("td",{children:(0,N.jsx)("div",{className:"members",children:(0,N.jsxs)("div",{className:"members-item",children:[null===e||void 0===e||null===(s=e.pics)||void 0===s?void 0:s.map(((e,t)=>{var s;return t<2&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("img",{id:"tooltip-".concat(e.id),src:y,className:"ava-pic rounded-circle",alt:"avatar",width:"35",height:"35"}),(0,N.jsx)(C.Z,{title:e.first_name,id:null===(s=e.id)||void 0===s?void 0:s.toString()})]})})),(null===e||void 0===e||null===(l=e.pics)||void 0===l?void 0:l.length)>2&&(0,N.jsxs)("div",{className:"member-plus bg-light-info text-info fw-bold",children:["+",e.pics.length-2]})]})})}),T&&(0,N.jsx)("td",{className:"text-center",children:z&&Z===e.task_id?(0,N.jsx)(m.Z,{size:"sm",color:"warning"}):(0,N.jsx)("abbr",{title:"Mark task",style:{textDecoration:"none"},children:(0,N.jsx)("button",{type:"button",className:"fav-btn",onClick:()=>E(e.task_id),children:(0,N.jsx)(v(),{icon:"star",className:"".concat(e.isFavorite&&"is_favorite")})})})})]},e.task_id)}))]},e.task_id)})):(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:"5",align:"center",children:"Data not found."})})})]})]})]})]})})}),t&&(0,N.jsx)(g.Z,{modal:t,setModal:s,toggle:()=>{s(!t)},task:u,mode:"activities"})]})}},14097:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var l=s(72791),i=s(46272),n=s(80184);const r=i.mM.create({body:{paddingTop:35,paddingBottom:65,paddingHorizontal:35},title:{fontSize:10,textAlign:"center"},text:{margin:10,fontSize:10,textAlign:"justify"},image:{marginVertical:4,marginHorizontal:15,width:50,height:50},header:{fontSize:10,marginBottom:5,textAlign:"left",color:"#3f3f3f",fontWeight:"bold"},pageNumber:{position:"absolute",fontSize:10,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},printAt:{position:"absolute",fontSize:8,bottom:30,left:35,right:0,textAlign:"left",color:"grey"},table:{display:"table",width:"auto",borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0,color:"#3f3f3f"},tableRow:{margin:"auto",flexDirection:"row"},tableCol:{borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCell:{marginTop:3,marginBottom:3,marginLeft:3,marginRight:3,fontSize:10}}),d=()=>{const e=new Date;return"".concat(e.toDateString(),", ").concat(e.toLocaleString().split(",")[1])},a=e=>{let{projectTitle:t,data:s}=e;return(0,n.jsx)(i.BB,{children:(0,n.jsxs)(i.T3,{style:{...r.body,backgroundColor:"#fff"},children:[(0,n.jsxs)(i.xv,{style:r.header,fixed:!0,children:["Project : ",null===t||void 0===t?void 0:t.project_name]}),(0,n.jsxs)(i.xv,{style:r.header,fixed:!0,children:["Partner : ",null===t||void 0===t?void 0:t.partner]}),(0,n.jsxs)(i.xv,{style:r.header,fixed:!0,children:["Division : ",null===t||void 0===t?void 0:t.division]}),(0,n.jsxs)(i.xv,{style:r.header,fixed:!0,children:["Phase : ",null===t||void 0===t?void 0:t.phase]}),(0,n.jsxs)(i.xv,{style:r.header,fixed:!0,children:["Schema : ","jo"===(null===t||void 0===t?void 0:t.schema)?"Join Operational":"Join Venture"]}),(0,n.jsxs)(i.G7,{style:r.table,children:[(0,n.jsxs)(i.G7,{style:r.tableRow,children:[(0,n.jsx)(i.G7,{style:{...r.tableCol,width:"5%"},children:(0,n.jsx)(i.xv,{style:r.tableCell,children:"No."})}),(0,n.jsx)(i.G7,{style:{...r.tableCol,width:"35%"},children:(0,n.jsx)(i.xv,{style:r.tableCell,children:"Task Title"})}),(0,n.jsx)(i.G7,{style:{...r.tableCol,width:"15%"},children:(0,n.jsx)(i.xv,{style:r.tableCell,children:"Status"})}),(0,n.jsx)(i.G7,{style:{...r.tableCol,width:"15%"},children:(0,n.jsx)(i.xv,{style:r.tableCell,children:"Deadline"})}),(0,n.jsx)(i.G7,{style:{...r.tableCol,width:"30%"},children:(0,n.jsx)(i.xv,{style:r.tableCell,children:"PIC"})})]}),null===s||void 0===s?void 0:s.map(((e,t)=>(0,n.jsxs)(l.Fragment,{children:[(0,n.jsxs)(i.G7,{style:r.tableRow,children:[(0,n.jsx)(i.G7,{style:{...r.tableCol,width:"5%"},children:(0,n.jsx)(i.xv,{style:{...r.tableCell,textAlign:"center"},children:t+1})}),(0,n.jsx)(i.G7,{style:{...r.tableCol,width:"35%"},children:(0,n.jsx)(i.xv,{style:r.tableCell,children:e.task_title})}),(0,n.jsx)(i.G7,{style:{...r.tableCol,width:"15%"},children:(0,n.jsx)(i.xv,{style:{...r.tableCell,fontSize:"10px"},children:0===e.status?"To do":1===e.status?"In progress":2===e.status?"Under review":3===e.status?"Approved":"Revision"})}),(0,n.jsx)(i.G7,{style:{...r.tableCol,width:"15%"},children:(0,n.jsx)(i.xv,{style:r.tableCell,children:e.end_date})}),(0,n.jsx)(i.G7,{style:{...r.tableCol,width:"30%"},children:e.pics.map((e=>(0,n.jsx)(i.xv,{style:r.tableCell,children:e.first_name},e.id)))})]}),e.subtasks.map((e=>(0,n.jsxs)(i.G7,{style:r.tableRow,children:[(0,n.jsx)(i.G7,{style:{...r.tableCol,width:"5%"},children:(0,n.jsx)(i.xv,{style:r.tableCell})}),(0,n.jsx)(i.G7,{style:{...r.tableCol,width:"35%"},children:(0,n.jsx)(i.xv,{style:r.tableCell,children:e.task_title})}),(0,n.jsx)(i.G7,{style:{...r.tableCol,width:"15%"},children:(0,n.jsx)(i.xv,{style:r.tableCell,children:"-"})}),(0,n.jsx)(i.G7,{style:{...r.tableCol,width:"15%"},children:(0,n.jsx)(i.xv,{style:r.tableCell,children:e.end_date})}),(0,n.jsx)(i.G7,{style:{...r.tableCol,width:"30%"},children:e.pics.map((e=>(0,n.jsx)(i.xv,{style:r.tableCell,children:e.first_name},e.id)))})]},e.task_id)))]},e.task_id)))]}),(0,n.jsx)(i.xv,{style:r.pageNumber,render:e=>{let{pageNumber:t,totalPages:s}=e;return"".concat(t," / ").concat(s)}}),(0,n.jsx)(i.xv,{style:r.printAt,render:d})]})})}},35754:()=>{},42459:()=>{},42480:()=>{}}]);
//# sourceMappingURL=568.c73d4d00.chunk.js.map