{"version":3,"file":"static/js/995.c252ca17.chunk.js","mappings":"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","sources":["../node_modules/html-to-image/src/util.ts","../node_modules/html-to-image/src/clone-pseudos.ts","../node_modules/html-to-image/src/mimes.ts","../node_modules/html-to-image/src/dataurl.ts","../node_modules/html-to-image/src/clone-node.ts","../node_modules/html-to-image/src/embed-resources.ts","../node_modules/html-to-image/src/embed-images.ts","../node_modules/html-to-image/src/embed-webfonts.ts","../node_modules/html-to-image/src/index.ts","../node_modules/html-to-image/src/apply-style.ts","../node_modules/lodash.isequal/index.js","../node_modules/qrcode-generator/qrcode.js","../node_modules/react-qrcode-logo/dist/index.js"],"sourcesContent":["import type { Options } from './types'\n\nexport function resolveUrl(url: string, baseUrl: string | null): string {\n  // url is absolute already\n  if (url.match(/^[a-z]+:\\/\\//i)) {\n    return url\n  }\n\n  // url is absolute already, without protocol\n  if (url.match(/^\\/\\//)) {\n    return window.location.protocol + url\n  }\n\n  // dataURI, mailto:, tel:, etc.\n  if (url.match(/^[a-z]+:/i)) {\n    return url\n  }\n\n  const doc = document.implementation.createHTMLDocument()\n  const base = doc.createElement('base')\n  const a = doc.createElement('a')\n\n  doc.head.appendChild(base)\n  doc.body.appendChild(a)\n\n  if (baseUrl) {\n    base.href = baseUrl\n  }\n\n  a.href = url\n\n  return a.href\n}\n\nexport const uuid = (() => {\n  // generate uuid for className of pseudo elements.\n  // We should not use GUIDs, otherwise pseudo elements sometimes cannot be captured.\n  let counter = 0\n\n  // ref: http://stackoverflow.com/a/6248722/2519373\n  const random = () =>\n    // eslint-disable-next-line no-bitwise\n    `0000${((Math.random() * 36 ** 4) << 0).toString(36)}`.slice(-4)\n\n  return () => {\n    counter += 1\n    return `u${random()}${counter}`\n  }\n})()\n\nexport function delay<T>(ms: number) {\n  return (args: T) =>\n    new Promise<T>((resolve) => {\n      setTimeout(() => resolve(args), ms)\n    })\n}\n\nexport function toArray<T>(arrayLike: any): T[] {\n  const arr: T[] = []\n\n  for (let i = 0, l = arrayLike.length; i < l; i++) {\n    arr.push(arrayLike[i])\n  }\n\n  return arr\n}\n\nfunction px(node: HTMLElement, styleProperty: string) {\n  const win = node.ownerDocument.defaultView || window\n  const val = win.getComputedStyle(node).getPropertyValue(styleProperty)\n  return val ? parseFloat(val.replace('px', '')) : 0\n}\n\nfunction getNodeWidth(node: HTMLElement) {\n  const leftBorder = px(node, 'border-left-width')\n  const rightBorder = px(node, 'border-right-width')\n  return node.clientWidth + leftBorder + rightBorder\n}\n\nfunction getNodeHeight(node: HTMLElement) {\n  const topBorder = px(node, 'border-top-width')\n  const bottomBorder = px(node, 'border-bottom-width')\n  return node.clientHeight + topBorder + bottomBorder\n}\n\nexport function getImageSize(targetNode: HTMLElement, options: Options = {}) {\n  const width = options.width || getNodeWidth(targetNode)\n  const height = options.height || getNodeHeight(targetNode)\n\n  return { width, height }\n}\n\nexport function getPixelRatio() {\n  let ratio\n\n  let FINAL_PROCESS\n  try {\n    FINAL_PROCESS = process\n  } catch (e) {\n    // pass\n  }\n\n  const val =\n    FINAL_PROCESS && FINAL_PROCESS.env\n      ? FINAL_PROCESS.env.devicePixelRatio\n      : null\n  if (val) {\n    ratio = parseInt(val, 10)\n    if (Number.isNaN(ratio)) {\n      ratio = 1\n    }\n  }\n  return ratio || window.devicePixelRatio || 1\n}\n\n// @see https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas#maximum_canvas_size\nconst canvasDimensionLimit = 16384\n\nexport function checkCanvasDimensions(canvas: HTMLCanvasElement) {\n  if (\n    canvas.width > canvasDimensionLimit ||\n    canvas.height > canvasDimensionLimit\n  ) {\n    if (\n      canvas.width > canvasDimensionLimit &&\n      canvas.height > canvasDimensionLimit\n    ) {\n      if (canvas.width > canvas.height) {\n        canvas.height *= canvasDimensionLimit / canvas.width\n        canvas.width = canvasDimensionLimit\n      } else {\n        canvas.width *= canvasDimensionLimit / canvas.height\n        canvas.height = canvasDimensionLimit\n      }\n    } else if (canvas.width > canvasDimensionLimit) {\n      canvas.height *= canvasDimensionLimit / canvas.width\n      canvas.width = canvasDimensionLimit\n    } else {\n      canvas.width *= canvasDimensionLimit / canvas.height\n      canvas.height = canvasDimensionLimit\n    }\n  }\n}\n\nexport function canvasToBlob(\n  canvas: HTMLCanvasElement,\n  options: Options = {},\n): Promise<Blob | null> {\n  if (canvas.toBlob) {\n    return new Promise((resolve) => {\n      canvas.toBlob(\n        resolve,\n        options.type ? options.type : 'image/png',\n        options.quality ? options.quality : 1,\n      )\n    })\n  }\n\n  return new Promise((resolve) => {\n    const binaryString = window.atob(\n      canvas\n        .toDataURL(\n          options.type ? options.type : undefined,\n          options.quality ? options.quality : undefined,\n        )\n        .split(',')[1],\n    )\n    const len = binaryString.length\n    const binaryArray = new Uint8Array(len)\n\n    for (let i = 0; i < len; i += 1) {\n      binaryArray[i] = binaryString.charCodeAt(i)\n    }\n\n    resolve(\n      new Blob([binaryArray], {\n        type: options.type ? options.type : 'image/png',\n      }),\n    )\n  })\n}\n\nexport function createImage(url: string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const img = new Image()\n    img.decode = () => resolve(img) as any\n    img.onload = () => resolve(img)\n    img.onerror = reject\n    img.crossOrigin = 'anonymous'\n    img.decoding = 'async'\n    img.src = url\n  })\n}\n\nexport async function svgToDataURL(svg: SVGElement): Promise<string> {\n  return Promise.resolve()\n    .then(() => new XMLSerializer().serializeToString(svg))\n    .then(encodeURIComponent)\n    .then((html) => `data:image/svg+xml;charset=utf-8,${html}`)\n}\n\nexport async function nodeToDataURL(\n  node: HTMLElement,\n  width: number,\n  height: number,\n): Promise<string> {\n  const xmlns = 'http://www.w3.org/2000/svg'\n  const svg = document.createElementNS(xmlns, 'svg')\n  const foreignObject = document.createElementNS(xmlns, 'foreignObject')\n\n  svg.setAttribute('width', `${width}`)\n  svg.setAttribute('height', `${height}`)\n  svg.setAttribute('viewBox', `0 0 ${width} ${height}`)\n\n  foreignObject.setAttribute('width', '100%')\n  foreignObject.setAttribute('height', '100%')\n  foreignObject.setAttribute('x', '0')\n  foreignObject.setAttribute('y', '0')\n  foreignObject.setAttribute('externalResourcesRequired', 'true')\n\n  svg.appendChild(foreignObject)\n  foreignObject.appendChild(node)\n  return svgToDataURL(svg)\n}\n\nexport const isInstanceOfElement = <\n  T extends typeof Element | typeof HTMLElement | typeof SVGImageElement,\n>(\n  node: Element | HTMLElement | SVGImageElement,\n  instance: T,\n): node is T['prototype'] => {\n  if (node instanceof instance) return true\n\n  const nodePrototype = Object.getPrototypeOf(node)\n\n  if (nodePrototype === null) return false\n\n  return (\n    nodePrototype.constructor.name === instance.name ||\n    isInstanceOfElement(nodePrototype, instance)\n  )\n}\n","import { uuid, toArray } from './util'\n\ntype Pseudo = ':before' | ':after'\n\nfunction formatCSSText(style: CSSStyleDeclaration) {\n  const content = style.getPropertyValue('content')\n  return `${style.cssText} content: '${content.replace(/'|\"/g, '')}';`\n}\n\nfunction formatCSSProperties(style: CSSStyleDeclaration) {\n  return toArray<string>(style)\n    .map((name) => {\n      const value = style.getPropertyValue(name)\n      const priority = style.getPropertyPriority(name)\n\n      return `${name}: ${value}${priority ? ' !important' : ''};`\n    })\n    .join(' ')\n}\n\nfunction getPseudoElementStyle(\n  className: string,\n  pseudo: Pseudo,\n  style: CSSStyleDeclaration,\n): Text {\n  const selector = `.${className}:${pseudo}`\n  const cssText = style.cssText\n    ? formatCSSText(style)\n    : formatCSSProperties(style)\n\n  return document.createTextNode(`${selector}{${cssText}}`)\n}\n\nfunction clonePseudoElement<T extends HTMLElement>(\n  nativeNode: T,\n  clonedNode: T,\n  pseudo: Pseudo,\n) {\n  const style = window.getComputedStyle(nativeNode, pseudo)\n  const content = style.getPropertyValue('content')\n  if (content === '' || content === 'none') {\n    return\n  }\n\n  const className = uuid()\n  try {\n    clonedNode.className = `${clonedNode.className} ${className}`\n  } catch (err) {\n    return\n  }\n\n  const styleElement = document.createElement('style')\n  styleElement.appendChild(getPseudoElementStyle(className, pseudo, style))\n  clonedNode.appendChild(styleElement)\n}\n\nexport function clonePseudoElements<T extends HTMLElement>(\n  nativeNode: T,\n  clonedNode: T,\n) {\n  clonePseudoElement(nativeNode, clonedNode, ':before')\n  clonePseudoElement(nativeNode, clonedNode, ':after')\n}\n","const WOFF = 'application/font-woff'\nconst JPEG = 'image/jpeg'\nconst mimes: { [key: string]: string } = {\n  woff: WOFF,\n  woff2: WOFF,\n  ttf: 'application/font-truetype',\n  eot: 'application/vnd.ms-fontobject',\n  png: 'image/png',\n  jpg: JPEG,\n  jpeg: JPEG,\n  gif: 'image/gif',\n  tiff: 'image/tiff',\n  svg: 'image/svg+xml',\n  webp: 'image/webp',\n}\n\nfunction getExtension(url: string): string {\n  const match = /\\.([^./]*?)$/g.exec(url)\n  return match ? match[1] : ''\n}\n\nexport function getMimeType(url: string): string {\n  const extension = getExtension(url).toLowerCase()\n  return mimes[extension] || ''\n}\n","import { Options } from './types'\n\nfunction getContentFromDataUrl(dataURL: string) {\n  return dataURL.split(/,/)[1]\n}\n\nexport function isDataUrl(url: string) {\n  return url.search(/^(data:)/) !== -1\n}\n\nexport function makeDataUrl(content: string, mimeType: string) {\n  return `data:${mimeType};base64,${content}`\n}\n\nexport async function fetchAsDataURL<T>(\n  url: string,\n  init: RequestInit | undefined,\n  process: (data: { result: string; res: Response }) => T,\n): Promise<T> {\n  const res = await fetch(url, init)\n  if (res.status === 404) {\n    throw new Error(`Resource \"${res.url}\" not found`)\n  }\n  const blob = await res.blob()\n  return new Promise<T>((resolve, reject) => {\n    const reader = new FileReader()\n    reader.onerror = reject\n    reader.onloadend = () => {\n      try {\n        resolve(process({ res, result: reader.result as string }))\n      } catch (error) {\n        reject(error)\n      }\n    }\n\n    reader.readAsDataURL(blob)\n  })\n}\n\nconst cache: { [url: string]: string } = {}\n\nfunction getCacheKey(\n  url: string,\n  contentType: string | undefined,\n  includeQueryParams: boolean | undefined,\n) {\n  let key = url.replace(/\\?.*/, '')\n\n  if (includeQueryParams) {\n    key = url\n  }\n\n  // font resource\n  if (/ttf|otf|eot|woff2?/i.test(key)) {\n    key = key.replace(/.*\\//, '')\n  }\n\n  return contentType ? `[${contentType}]${key}` : key\n}\n\nexport async function resourceToDataURL(\n  resourceUrl: string,\n  contentType: string | undefined,\n  options: Options,\n) {\n  const cacheKey = getCacheKey(\n    resourceUrl,\n    contentType,\n    options.includeQueryParams,\n  )\n\n  if (cache[cacheKey] != null) {\n    return cache[cacheKey]\n  }\n\n  // ref: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n  if (options.cacheBust) {\n    // eslint-disable-next-line no-param-reassign\n    resourceUrl += (/\\?/.test(resourceUrl) ? '&' : '?') + new Date().getTime()\n  }\n\n  let dataURL: string\n  try {\n    const content = await fetchAsDataURL(\n      resourceUrl,\n      options.fetchRequestInit,\n      ({ res, result }) => {\n        if (!contentType) {\n          // eslint-disable-next-line no-param-reassign\n          contentType = res.headers.get('Content-Type') || ''\n        }\n        return getContentFromDataUrl(result)\n      },\n    )\n    dataURL = makeDataUrl(content, contentType!)\n  } catch (error) {\n    dataURL = options.imagePlaceholder || ''\n\n    let msg = `Failed to fetch resource: ${resourceUrl}`\n    if (error) {\n      msg = typeof error === 'string' ? error : error.message\n    }\n\n    if (msg) {\n      console.warn(msg)\n    }\n  }\n\n  cache[cacheKey] = dataURL\n  return dataURL\n}\n","import type { Options } from './types'\nimport { clonePseudoElements } from './clone-pseudos'\nimport { createImage, toArray, isInstanceOfElement } from './util'\nimport { getMimeType } from './mimes'\nimport { resourceToDataURL } from './dataurl'\n\nasync function cloneCanvasElement(canvas: HTMLCanvasElement) {\n  const dataURL = canvas.toDataURL()\n  if (dataURL === 'data:,') {\n    return canvas.cloneNode(false) as HTMLCanvasElement\n  }\n  return createImage(dataURL)\n}\n\nasync function cloneVideoElement(video: HTMLVideoElement, options: Options) {\n  if (video.currentSrc) {\n    const canvas = document.createElement('canvas')\n    const ctx = canvas.getContext('2d')\n    canvas.width = video.clientWidth\n    canvas.height = video.clientHeight\n    ctx?.drawImage(video, 0, 0, canvas.width, canvas.height)\n    const dataURL = canvas.toDataURL()\n    return createImage(dataURL)\n  }\n\n  const poster = video.poster\n  const contentType = getMimeType(poster)\n  const dataURL = await resourceToDataURL(poster, contentType, options)\n  return createImage(dataURL)\n}\n\nasync function cloneIFrameElement(iframe: HTMLIFrameElement) {\n  try {\n    if (iframe?.contentDocument?.body) {\n      return (await cloneNode(\n        iframe.contentDocument.body,\n        {},\n        true,\n      )) as HTMLBodyElement\n    }\n  } catch {\n    // Failed to clone iframe\n  }\n\n  return iframe.cloneNode(false) as HTMLIFrameElement\n}\n\nasync function cloneSingleNode<T extends HTMLElement>(\n  node: T,\n  options: Options,\n): Promise<HTMLElement> {\n  if (isInstanceOfElement(node, HTMLCanvasElement)) {\n    return cloneCanvasElement(node)\n  }\n\n  if (isInstanceOfElement(node, HTMLVideoElement)) {\n    return cloneVideoElement(node, options)\n  }\n\n  if (isInstanceOfElement(node, HTMLIFrameElement)) {\n    return cloneIFrameElement(node)\n  }\n\n  return node.cloneNode(false) as T\n}\n\nconst isSlotElement = (node: HTMLElement): node is HTMLSlotElement =>\n  node.tagName != null && node.tagName.toUpperCase() === 'SLOT'\n\nasync function cloneChildren<T extends HTMLElement>(\n  nativeNode: T,\n  clonedNode: T,\n  options: Options,\n): Promise<T> {\n  let children: T[] = []\n\n  if (isSlotElement(nativeNode) && nativeNode.assignedNodes) {\n    children = toArray<T>(nativeNode.assignedNodes())\n  } else if (\n    isInstanceOfElement(nativeNode, HTMLIFrameElement) &&\n    nativeNode.contentDocument?.body\n  ) {\n    children = toArray<T>(nativeNode.contentDocument.body.childNodes)\n  } else {\n    children = toArray<T>((nativeNode.shadowRoot ?? nativeNode).childNodes)\n  }\n\n  if (\n    children.length === 0 ||\n    isInstanceOfElement(nativeNode, HTMLVideoElement)\n  ) {\n    return clonedNode\n  }\n\n  await children.reduce(\n    (deferred, child) =>\n      deferred\n        .then(() => cloneNode(child, options))\n        .then((clonedChild: HTMLElement | null) => {\n          if (clonedChild) {\n            clonedNode.appendChild(clonedChild)\n          }\n        }),\n    Promise.resolve(),\n  )\n\n  return clonedNode\n}\n\nfunction cloneCSSStyle<T extends HTMLElement>(nativeNode: T, clonedNode: T) {\n  const targetStyle = clonedNode.style\n  if (!targetStyle) {\n    return\n  }\n\n  const sourceStyle = window.getComputedStyle(nativeNode)\n  if (sourceStyle.cssText) {\n    targetStyle.cssText = sourceStyle.cssText\n    targetStyle.transformOrigin = sourceStyle.transformOrigin\n  } else {\n    toArray<string>(sourceStyle).forEach((name) => {\n      let value = sourceStyle.getPropertyValue(name)\n      if (name === 'font-size' && value.endsWith('px')) {\n        const reducedFont =\n          Math.floor(parseFloat(value.substring(0, value.length - 2))) - 0.1\n        value = `${reducedFont}px`\n      }\n\n      if (\n        isInstanceOfElement(nativeNode, HTMLIFrameElement) &&\n        name === 'display' &&\n        value === 'inline'\n      ) {\n        value = 'block'\n      }\n      \n      if (name === 'd' && clonedNode.getAttribute('d')) {\n        value = `path(${clonedNode.getAttribute('d')})`\n      }\n      \n      targetStyle.setProperty(\n        name,\n        value,\n        sourceStyle.getPropertyPriority(name),\n      )\n    })\n  }\n}\n\nfunction cloneInputValue<T extends HTMLElement>(nativeNode: T, clonedNode: T) {\n  if (isInstanceOfElement(nativeNode, HTMLTextAreaElement)) {\n    clonedNode.innerHTML = nativeNode.value\n  }\n\n  if (isInstanceOfElement(nativeNode, HTMLInputElement)) {\n    clonedNode.setAttribute('value', nativeNode.value)\n  }\n}\n\nfunction cloneSelectValue<T extends HTMLElement>(nativeNode: T, clonedNode: T) {\n  if (isInstanceOfElement(nativeNode, HTMLSelectElement)) {\n    const clonedSelect = clonedNode as any as HTMLSelectElement\n    const selectedOption = Array.from(clonedSelect.children).find(\n      (child) => nativeNode.value === child.getAttribute('value'),\n    )\n\n    if (selectedOption) {\n      selectedOption.setAttribute('selected', '')\n    }\n  }\n}\n\nfunction decorate<T extends HTMLElement>(nativeNode: T, clonedNode: T): T {\n  if (isInstanceOfElement(clonedNode, Element)) {\n    cloneCSSStyle(nativeNode, clonedNode)\n    clonePseudoElements(nativeNode, clonedNode)\n    cloneInputValue(nativeNode, clonedNode)\n    cloneSelectValue(nativeNode, clonedNode)\n  }\n\n  return clonedNode\n}\n\nasync function ensureSVGSymbols<T extends HTMLElement>(\n  clone: T,\n  options: Options,\n) {\n  const uses = clone.querySelectorAll ? clone.querySelectorAll('use') : []\n  if (uses.length === 0) {\n    return clone\n  }\n\n  const processedDefs: { [key: string]: HTMLElement } = {}\n  for (let i = 0; i < uses.length; i++) {\n    const use = uses[i]\n    const id = use.getAttribute('xlink:href')\n    if (id) {\n      const exist = clone.querySelector(id)\n      const definition = document.querySelector(id) as HTMLElement\n      if (!exist && definition && !processedDefs[id]) {\n        // eslint-disable-next-line no-await-in-loop\n        processedDefs[id] = (await cloneNode(definition, options, true))!\n      }\n    }\n  }\n\n  const nodes = Object.values(processedDefs)\n  if (nodes.length) {\n    const ns = 'http://www.w3.org/1999/xhtml'\n    const svg = document.createElementNS(ns, 'svg')\n    svg.setAttribute('xmlns', ns)\n    svg.style.position = 'absolute'\n    svg.style.width = '0'\n    svg.style.height = '0'\n    svg.style.overflow = 'hidden'\n    svg.style.display = 'none'\n\n    const defs = document.createElementNS(ns, 'defs')\n    svg.appendChild(defs)\n\n    for (let i = 0; i < nodes.length; i++) {\n      defs.appendChild(nodes[i])\n    }\n\n    clone.appendChild(svg)\n  }\n\n  return clone\n}\n\nexport async function cloneNode<T extends HTMLElement>(\n  node: T,\n  options: Options,\n  isRoot?: boolean,\n): Promise<T | null> {\n  if (!isRoot && options.filter && !options.filter(node)) {\n    return null\n  }\n\n  return Promise.resolve(node)\n    .then((clonedNode) => cloneSingleNode(clonedNode, options) as Promise<T>)\n    .then((clonedNode) => cloneChildren(node, clonedNode, options))\n    .then((clonedNode) => decorate(node, clonedNode))\n    .then((clonedNode) => ensureSVGSymbols(clonedNode, options))\n}\n","import { Options } from './types'\nimport { resolveUrl } from './util'\nimport { getMimeType } from './mimes'\nimport { isDataUrl, makeDataUrl, resourceToDataURL } from './dataurl'\n\nconst URL_REGEX = /url\\((['\"]?)([^'\"]+?)\\1\\)/g\nconst URL_WITH_FORMAT_REGEX = /url\\([^)]+\\)\\s*format\\(([\"']?)([^\"']+)\\1\\)/g\nconst FONT_SRC_REGEX = /src:\\s*(?:url\\([^)]+\\)\\s*format\\([^)]+\\)[,;]\\s*)+/g\n\nfunction toRegex(url: string): RegExp {\n  // eslint-disable-next-line no-useless-escape\n  const escaped = url.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1')\n  return new RegExp(`(url\\\\(['\"]?)(${escaped})(['\"]?\\\\))`, 'g')\n}\n\nexport function parseURLs(cssText: string): string[] {\n  const urls: string[] = []\n\n  cssText.replace(URL_REGEX, (raw, quotation, url) => {\n    urls.push(url)\n    return raw\n  })\n\n  return urls.filter((url) => !isDataUrl(url))\n}\n\nexport async function embed(\n  cssText: string,\n  resourceURL: string,\n  baseURL: string | null,\n  options: Options,\n  getContentFromUrl?: (url: string) => Promise<string>,\n): Promise<string> {\n  try {\n    const resolvedURL = baseURL ? resolveUrl(resourceURL, baseURL) : resourceURL\n    const contentType = getMimeType(resourceURL)\n    let dataURL: string\n    if (getContentFromUrl) {\n      const content = await getContentFromUrl(resolvedURL)\n      dataURL = makeDataUrl(content, contentType)\n    } else {\n      dataURL = await resourceToDataURL(resolvedURL, contentType, options)\n    }\n    return cssText.replace(toRegex(resourceURL), `$1${dataURL}$3`)\n  } catch (error) {\n    // pass\n  }\n  return cssText\n}\n\nfunction filterPreferredFontFormat(\n  str: string,\n  { preferredFontFormat }: Options,\n): string {\n  return !preferredFontFormat\n    ? str\n    : str.replace(FONT_SRC_REGEX, (match: string) => {\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n          const [src, , format] = URL_WITH_FORMAT_REGEX.exec(match) || []\n          if (!format) {\n            return ''\n          }\n\n          if (format === preferredFontFormat) {\n            return `src: ${src};`\n          }\n        }\n      })\n}\n\nexport function shouldEmbed(url: string): boolean {\n  return url.search(URL_REGEX) !== -1\n}\n\nexport async function embedResources(\n  cssText: string,\n  baseUrl: string | null,\n  options: Options,\n): Promise<string> {\n  if (!shouldEmbed(cssText)) {\n    return cssText\n  }\n\n  const filteredCSSText = filterPreferredFontFormat(cssText, options)\n  const urls = parseURLs(filteredCSSText)\n  return urls.reduce(\n    (deferred, url) =>\n      deferred.then((css) => embed(css, url, baseUrl, options)),\n    Promise.resolve(filteredCSSText),\n  )\n}\n","import { Options } from './types'\nimport { embedResources } from './embed-resources'\nimport { toArray, isInstanceOfElement } from './util'\nimport { isDataUrl, resourceToDataURL } from './dataurl'\nimport { getMimeType } from './mimes'\n\nasync function embedProp(\n  propName: string,\n  node: HTMLElement,\n  options: Options,\n) {\n  const propValue = node.style?.getPropertyValue(propName)\n  if (propValue) {\n    const cssString = await embedResources(propValue, null, options)\n    node.style.setProperty(\n      propName,\n      cssString,\n      node.style.getPropertyPriority(propName),\n    )\n    return true\n  }\n  return false\n}\n\nasync function embedBackground<T extends HTMLElement>(\n  clonedNode: T,\n  options: Options,\n) {\n  if (!(await embedProp('background', clonedNode, options))) {\n    await embedProp('background-image', clonedNode, options)\n  }\n  if (!(await embedProp('mask', clonedNode, options))) {\n    await embedProp('mask-image', clonedNode, options)\n  }\n}\n\nasync function embedImageNode<T extends HTMLElement | SVGImageElement>(\n  clonedNode: T,\n  options: Options,\n) {\n  const isImageElement = isInstanceOfElement(clonedNode, HTMLImageElement)\n\n  if (\n    !(isImageElement && !isDataUrl(clonedNode.src)) &&\n    !(\n      isInstanceOfElement(clonedNode, SVGImageElement) &&\n      !isDataUrl(clonedNode.href.baseVal)\n    )\n  ) {\n    return\n  }\n\n  const url = isImageElement ? clonedNode.src : clonedNode.href.baseVal\n\n  const dataURL = await resourceToDataURL(url, getMimeType(url), options)\n  await new Promise((resolve, reject) => {\n    clonedNode.onload = resolve\n    clonedNode.onerror = reject\n\n    const image = clonedNode as HTMLImageElement\n    if (image.decode) {\n      image.decode = resolve as any\n    }\n\n    if (image.loading === 'lazy') {\n      image.loading = 'eager'\n    }\n\n    if (isImageElement) {\n      clonedNode.srcset = ''\n      clonedNode.src = dataURL\n    } else {\n      clonedNode.href.baseVal = dataURL\n    }\n  })\n}\n\nasync function embedChildren<T extends HTMLElement>(\n  clonedNode: T,\n  options: Options,\n) {\n  const children = toArray<HTMLElement>(clonedNode.childNodes)\n  const deferreds = children.map((child) => embedImages(child, options))\n  await Promise.all(deferreds).then(() => clonedNode)\n}\n\nexport async function embedImages<T extends HTMLElement>(\n  clonedNode: T,\n  options: Options,\n) {\n  if (isInstanceOfElement(clonedNode, Element)) {\n    await embedBackground(clonedNode, options)\n    await embedImageNode(clonedNode, options)\n    await embedChildren(clonedNode, options)\n  }\n}\n","import type { Options } from './types'\nimport { toArray } from './util'\nimport { fetchAsDataURL } from './dataurl'\nimport { shouldEmbed, embedResources } from './embed-resources'\n\ninterface Metadata {\n  url: string\n  cssText: string\n}\n\nconst cssFetchCache: { [href: string]: Metadata } = {}\n\nasync function fetchCSS(url: string) {\n  let cache = cssFetchCache[url]\n  if (cache != null) {\n    return cache\n  }\n\n  const res = await fetch(url)\n  const cssText = await res.text()\n  cache = { url, cssText }\n\n  cssFetchCache[url] = cache\n\n  return cache\n}\n\nasync function embedFonts(data: Metadata, options: Options): Promise<string> {\n  let cssText = data.cssText\n  const regexUrl = /url\\([\"']?([^\"')]+)[\"']?\\)/g\n  const fontLocs = cssText.match(/url\\([^)]+\\)/g) || []\n  const loadFonts = fontLocs.map(async (loc: string) => {\n    let url = loc.replace(regexUrl, '$1')\n    if (!url.startsWith('https://')) {\n      url = new URL(url, data.url).href\n    }\n\n    return fetchAsDataURL<[string, string]>(\n      url,\n      options.fetchRequestInit,\n      ({ result }) => {\n        cssText = cssText.replace(loc, `url(${result})`)\n        return [loc, result]\n      },\n    )\n  })\n\n  return Promise.all(loadFonts).then(() => cssText)\n}\n\nfunction parseCSS(source: string) {\n  if (source == null) {\n    return []\n  }\n\n  const result: string[] = []\n  const commentsRegex = /(\\/\\*[\\s\\S]*?\\*\\/)/gi\n  // strip out comments\n  let cssText = source.replace(commentsRegex, '')\n\n  // eslint-disable-next-line prefer-regex-literals\n  const keyframesRegex = new RegExp(\n    '((@.*?keyframes [\\\\s\\\\S]*?){([\\\\s\\\\S]*?}\\\\s*?)})',\n    'gi',\n  )\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    const matches = keyframesRegex.exec(cssText)\n    if (matches === null) {\n      break\n    }\n    result.push(matches[0])\n  }\n  cssText = cssText.replace(keyframesRegex, '')\n\n  const importRegex = /@import[\\s\\S]*?url\\([^)]*\\)[\\s\\S]*?;/gi\n  // to match css & media queries together\n  const combinedCSSRegex =\n    '((\\\\s*?(?:\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\/)?\\\\s*?@media[\\\\s\\\\S]' +\n    '*?){([\\\\s\\\\S]*?)}\\\\s*?})|(([\\\\s\\\\S]*?){([\\\\s\\\\S]*?)})'\n  // unified regex\n  const unifiedRegex = new RegExp(combinedCSSRegex, 'gi')\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    let matches = importRegex.exec(cssText)\n    if (matches === null) {\n      matches = unifiedRegex.exec(cssText)\n      if (matches === null) {\n        break\n      } else {\n        importRegex.lastIndex = unifiedRegex.lastIndex\n      }\n    } else {\n      unifiedRegex.lastIndex = importRegex.lastIndex\n    }\n    result.push(matches[0])\n  }\n\n  return result\n}\n\nasync function getCSSRules(\n  styleSheets: CSSStyleSheet[],\n  options: Options,\n): Promise<CSSStyleRule[]> {\n  const ret: CSSStyleRule[] = []\n  const deferreds: Promise<number | void>[] = []\n\n  // First loop inlines imports\n  styleSheets.forEach((sheet) => {\n    if ('cssRules' in sheet) {\n      try {\n        toArray<CSSRule>(sheet.cssRules || []).forEach((item, index) => {\n          if (item.type === CSSRule.IMPORT_RULE) {\n            let importIndex = index + 1\n            const url = (item as CSSImportRule).href\n            const deferred = fetchCSS(url)\n              .then((metadata) => embedFonts(metadata, options))\n              .then((cssText) =>\n                parseCSS(cssText).forEach((rule) => {\n                  try {\n                    sheet.insertRule(\n                      rule,\n                      rule.startsWith('@import')\n                        ? (importIndex += 1)\n                        : sheet.cssRules.length,\n                    )\n                  } catch (error) {\n                    console.error('Error inserting rule from remote css', {\n                      rule,\n                      error,\n                    })\n                  }\n                }),\n              )\n              .catch((e) => {\n                console.error('Error loading remote css', e.toString())\n              })\n\n            deferreds.push(deferred)\n          }\n        })\n      } catch (e) {\n        const inline =\n          styleSheets.find((a) => a.href == null) || document.styleSheets[0]\n        if (sheet.href != null) {\n          deferreds.push(\n            fetchCSS(sheet.href)\n              .then((metadata) => embedFonts(metadata, options))\n              .then((cssText) =>\n                parseCSS(cssText).forEach((rule) => {\n                  inline.insertRule(rule, sheet.cssRules.length)\n                }),\n              )\n              .catch((err: unknown) => {\n                console.error('Error loading remote stylesheet', err)\n              }),\n          )\n        }\n        console.error('Error inlining remote css file', e)\n      }\n    }\n  })\n\n  return Promise.all(deferreds).then(() => {\n    // Second loop parses rules\n    styleSheets.forEach((sheet) => {\n      if ('cssRules' in sheet) {\n        try {\n          toArray<CSSStyleRule>(sheet.cssRules || []).forEach((item) => {\n            ret.push(item)\n          })\n        } catch (e) {\n          console.error(`Error while reading CSS rules from ${sheet.href}`, e)\n        }\n      }\n    })\n\n    return ret\n  })\n}\n\nfunction getWebFontRules(cssRules: CSSStyleRule[]): CSSStyleRule[] {\n  return cssRules\n    .filter((rule) => rule.type === CSSRule.FONT_FACE_RULE)\n    .filter((rule) => shouldEmbed(rule.style.getPropertyValue('src')))\n}\n\nasync function parseWebFontRules<T extends HTMLElement>(\n  node: T,\n  options: Options,\n) {\n  if (node.ownerDocument == null) {\n    throw new Error('Provided element is not within a Document')\n  }\n\n  const styleSheets = toArray<CSSStyleSheet>(node.ownerDocument.styleSheets)\n  const cssRules = await getCSSRules(styleSheets, options)\n\n  return getWebFontRules(cssRules)\n}\n\nexport async function getWebFontCSS<T extends HTMLElement>(\n  node: T,\n  options: Options,\n): Promise<string> {\n  const rules = await parseWebFontRules(node, options)\n  const cssTexts = await Promise.all(\n    rules.map((rule) => {\n      const baseUrl = rule.parentStyleSheet ? rule.parentStyleSheet.href : null\n      return embedResources(rule.cssText, baseUrl, options)\n    }),\n  )\n\n  return cssTexts.join('\\n')\n}\n\nexport async function embedWebFonts<T extends HTMLElement>(\n  clonedNode: T,\n  options: Options,\n) {\n  const cssText =\n    options.fontEmbedCSS != null\n      ? options.fontEmbedCSS\n      : options.skipFonts\n      ? null\n      : await getWebFontCSS(clonedNode, options)\n\n  if (cssText) {\n    const styleNode = document.createElement('style')\n    const sytleContent = document.createTextNode(cssText)\n\n    styleNode.appendChild(sytleContent)\n\n    if (clonedNode.firstChild) {\n      clonedNode.insertBefore(styleNode, clonedNode.firstChild)\n    } else {\n      clonedNode.appendChild(styleNode)\n    }\n  }\n}\n","import { Options } from './types'\nimport { cloneNode } from './clone-node'\nimport { embedImages } from './embed-images'\nimport { applyStyle } from './apply-style'\nimport { embedWebFonts, getWebFontCSS } from './embed-webfonts'\nimport {\n  getImageSize,\n  getPixelRatio,\n  createImage,\n  canvasToBlob,\n  nodeToDataURL,\n  checkCanvasDimensions,\n} from './util'\n\nexport async function toSvg<T extends HTMLElement>(\n  node: T,\n  options: Options = {},\n): Promise<string> {\n  const { width, height } = getImageSize(node, options)\n  const clonedNode = (await cloneNode(node, options, true)) as HTMLElement\n  await embedWebFonts(clonedNode, options)\n  await embedImages(clonedNode, options)\n  applyStyle(clonedNode, options)\n  const datauri = await nodeToDataURL(clonedNode, width, height)\n  return datauri\n}\n\nexport async function toCanvas<T extends HTMLElement>(\n  node: T,\n  options: Options = {},\n): Promise<HTMLCanvasElement> {\n  const { width, height } = getImageSize(node, options)\n  const svg = await toSvg(node, options)\n  const img = await createImage(svg)\n\n  const canvas = document.createElement('canvas')\n  const context = canvas.getContext('2d')!\n  const ratio = options.pixelRatio || getPixelRatio()\n  const canvasWidth = options.canvasWidth || width\n  const canvasHeight = options.canvasHeight || height\n\n  canvas.width = canvasWidth * ratio\n  canvas.height = canvasHeight * ratio\n\n  if (!options.skipAutoScale) {\n    checkCanvasDimensions(canvas)\n  }\n  canvas.style.width = `${canvasWidth}`\n  canvas.style.height = `${canvasHeight}`\n\n  if (options.backgroundColor) {\n    context.fillStyle = options.backgroundColor\n    context.fillRect(0, 0, canvas.width, canvas.height)\n  }\n\n  context.drawImage(img, 0, 0, canvas.width, canvas.height)\n\n  return canvas\n}\n\nexport async function toPixelData<T extends HTMLElement>(\n  node: T,\n  options: Options = {},\n): Promise<Uint8ClampedArray> {\n  const { width, height } = getImageSize(node, options)\n  const canvas = await toCanvas(node, options)\n  const ctx = canvas.getContext('2d')!\n  return ctx.getImageData(0, 0, width, height).data\n}\n\nexport async function toPng<T extends HTMLElement>(\n  node: T,\n  options: Options = {},\n): Promise<string> {\n  const canvas = await toCanvas(node, options)\n  return canvas.toDataURL()\n}\n\nexport async function toJpeg<T extends HTMLElement>(\n  node: T,\n  options: Options = {},\n): Promise<string> {\n  const canvas = await toCanvas(node, options)\n  return canvas.toDataURL('image/jpeg', options.quality || 1)\n}\n\nexport async function toBlob<T extends HTMLElement>(\n  node: T,\n  options: Options = {},\n): Promise<Blob | null> {\n  const canvas = await toCanvas(node, options)\n  const blob = await canvasToBlob(canvas)\n  return blob\n}\n\nexport async function getFontEmbedCSS<T extends HTMLElement>(\n  node: T,\n  options: Options = {},\n): Promise<string> {\n  return getWebFontCSS(node, options)\n}\n","import { Options } from './types'\n\nexport function applyStyle<T extends HTMLElement>(\n  node: T,\n  options: Options,\n): T {\n  const { style } = node\n\n  if (options.backgroundColor) {\n    style.backgroundColor = options.backgroundColor\n  }\n\n  if (options.width) {\n    style.width = `${options.width}px`\n  }\n\n  if (options.height) {\n    style.height = `${options.height}px`\n  }\n\n  const manual = options.style\n  if (manual != null) {\n    Object.keys(manual).forEach((key: any) => {\n      style[key] = manual[key] as string\n    })\n  }\n\n  return node\n}\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n","//---------------------------------------------------------------------\n//\n// QR Code Generator for JavaScript\n//\n// Copyright (c) 2009 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//  http://www.opensource.org/licenses/mit-license.php\n//\n// The word 'QR Code' is registered trademark of\n// DENSO WAVE INCORPORATED\n//  http://www.denso-wave.com/qrcode/faqpatent-e.html\n//\n//---------------------------------------------------------------------\n\nvar qrcode = function() {\n\n  //---------------------------------------------------------------------\n  // qrcode\n  //---------------------------------------------------------------------\n\n  /**\n   * qrcode\n   * @param typeNumber 1 to 40\n   * @param errorCorrectionLevel 'L','M','Q','H'\n   */\n  var qrcode = function(typeNumber, errorCorrectionLevel) {\n\n    var PAD0 = 0xEC;\n    var PAD1 = 0x11;\n\n    var _typeNumber = typeNumber;\n    var _errorCorrectionLevel = QRErrorCorrectionLevel[errorCorrectionLevel];\n    var _modules = null;\n    var _moduleCount = 0;\n    var _dataCache = null;\n    var _dataList = [];\n\n    var _this = {};\n\n    var makeImpl = function(test, maskPattern) {\n\n      _moduleCount = _typeNumber * 4 + 17;\n      _modules = function(moduleCount) {\n        var modules = new Array(moduleCount);\n        for (var row = 0; row < moduleCount; row += 1) {\n          modules[row] = new Array(moduleCount);\n          for (var col = 0; col < moduleCount; col += 1) {\n            modules[row][col] = null;\n          }\n        }\n        return modules;\n      }(_moduleCount);\n\n      setupPositionProbePattern(0, 0);\n      setupPositionProbePattern(_moduleCount - 7, 0);\n      setupPositionProbePattern(0, _moduleCount - 7);\n      setupPositionAdjustPattern();\n      setupTimingPattern();\n      setupTypeInfo(test, maskPattern);\n\n      if (_typeNumber >= 7) {\n        setupTypeNumber(test);\n      }\n\n      if (_dataCache == null) {\n        _dataCache = createData(_typeNumber, _errorCorrectionLevel, _dataList);\n      }\n\n      mapData(_dataCache, maskPattern);\n    };\n\n    var setupPositionProbePattern = function(row, col) {\n\n      for (var r = -1; r <= 7; r += 1) {\n\n        if (row + r <= -1 || _moduleCount <= row + r) continue;\n\n        for (var c = -1; c <= 7; c += 1) {\n\n          if (col + c <= -1 || _moduleCount <= col + c) continue;\n\n          if ( (0 <= r && r <= 6 && (c == 0 || c == 6) )\n              || (0 <= c && c <= 6 && (r == 0 || r == 6) )\n              || (2 <= r && r <= 4 && 2 <= c && c <= 4) ) {\n            _modules[row + r][col + c] = true;\n          } else {\n            _modules[row + r][col + c] = false;\n          }\n        }\n      }\n    };\n\n    var getBestMaskPattern = function() {\n\n      var minLostPoint = 0;\n      var pattern = 0;\n\n      for (var i = 0; i < 8; i += 1) {\n\n        makeImpl(true, i);\n\n        var lostPoint = QRUtil.getLostPoint(_this);\n\n        if (i == 0 || minLostPoint > lostPoint) {\n          minLostPoint = lostPoint;\n          pattern = i;\n        }\n      }\n\n      return pattern;\n    };\n\n    var setupTimingPattern = function() {\n\n      for (var r = 8; r < _moduleCount - 8; r += 1) {\n        if (_modules[r][6] != null) {\n          continue;\n        }\n        _modules[r][6] = (r % 2 == 0);\n      }\n\n      for (var c = 8; c < _moduleCount - 8; c += 1) {\n        if (_modules[6][c] != null) {\n          continue;\n        }\n        _modules[6][c] = (c % 2 == 0);\n      }\n    };\n\n    var setupPositionAdjustPattern = function() {\n\n      var pos = QRUtil.getPatternPosition(_typeNumber);\n\n      for (var i = 0; i < pos.length; i += 1) {\n\n        for (var j = 0; j < pos.length; j += 1) {\n\n          var row = pos[i];\n          var col = pos[j];\n\n          if (_modules[row][col] != null) {\n            continue;\n          }\n\n          for (var r = -2; r <= 2; r += 1) {\n\n            for (var c = -2; c <= 2; c += 1) {\n\n              if (r == -2 || r == 2 || c == -2 || c == 2\n                  || (r == 0 && c == 0) ) {\n                _modules[row + r][col + c] = true;\n              } else {\n                _modules[row + r][col + c] = false;\n              }\n            }\n          }\n        }\n      }\n    };\n\n    var setupTypeNumber = function(test) {\n\n      var bits = QRUtil.getBCHTypeNumber(_typeNumber);\n\n      for (var i = 0; i < 18; i += 1) {\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n        _modules[Math.floor(i / 3)][i % 3 + _moduleCount - 8 - 3] = mod;\n      }\n\n      for (var i = 0; i < 18; i += 1) {\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n        _modules[i % 3 + _moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\n      }\n    };\n\n    var setupTypeInfo = function(test, maskPattern) {\n\n      var data = (_errorCorrectionLevel << 3) | maskPattern;\n      var bits = QRUtil.getBCHTypeInfo(data);\n\n      // vertical\n      for (var i = 0; i < 15; i += 1) {\n\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n\n        if (i < 6) {\n          _modules[i][8] = mod;\n        } else if (i < 8) {\n          _modules[i + 1][8] = mod;\n        } else {\n          _modules[_moduleCount - 15 + i][8] = mod;\n        }\n      }\n\n      // horizontal\n      for (var i = 0; i < 15; i += 1) {\n\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n\n        if (i < 8) {\n          _modules[8][_moduleCount - i - 1] = mod;\n        } else if (i < 9) {\n          _modules[8][15 - i - 1 + 1] = mod;\n        } else {\n          _modules[8][15 - i - 1] = mod;\n        }\n      }\n\n      // fixed module\n      _modules[_moduleCount - 8][8] = (!test);\n    };\n\n    var mapData = function(data, maskPattern) {\n\n      var inc = -1;\n      var row = _moduleCount - 1;\n      var bitIndex = 7;\n      var byteIndex = 0;\n      var maskFunc = QRUtil.getMaskFunction(maskPattern);\n\n      for (var col = _moduleCount - 1; col > 0; col -= 2) {\n\n        if (col == 6) col -= 1;\n\n        while (true) {\n\n          for (var c = 0; c < 2; c += 1) {\n\n            if (_modules[row][col - c] == null) {\n\n              var dark = false;\n\n              if (byteIndex < data.length) {\n                dark = ( ( (data[byteIndex] >>> bitIndex) & 1) == 1);\n              }\n\n              var mask = maskFunc(row, col - c);\n\n              if (mask) {\n                dark = !dark;\n              }\n\n              _modules[row][col - c] = dark;\n              bitIndex -= 1;\n\n              if (bitIndex == -1) {\n                byteIndex += 1;\n                bitIndex = 7;\n              }\n            }\n          }\n\n          row += inc;\n\n          if (row < 0 || _moduleCount <= row) {\n            row -= inc;\n            inc = -inc;\n            break;\n          }\n        }\n      }\n    };\n\n    var createBytes = function(buffer, rsBlocks) {\n\n      var offset = 0;\n\n      var maxDcCount = 0;\n      var maxEcCount = 0;\n\n      var dcdata = new Array(rsBlocks.length);\n      var ecdata = new Array(rsBlocks.length);\n\n      for (var r = 0; r < rsBlocks.length; r += 1) {\n\n        var dcCount = rsBlocks[r].dataCount;\n        var ecCount = rsBlocks[r].totalCount - dcCount;\n\n        maxDcCount = Math.max(maxDcCount, dcCount);\n        maxEcCount = Math.max(maxEcCount, ecCount);\n\n        dcdata[r] = new Array(dcCount);\n\n        for (var i = 0; i < dcdata[r].length; i += 1) {\n          dcdata[r][i] = 0xff & buffer.getBuffer()[i + offset];\n        }\n        offset += dcCount;\n\n        var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);\n        var rawPoly = qrPolynomial(dcdata[r], rsPoly.getLength() - 1);\n\n        var modPoly = rawPoly.mod(rsPoly);\n        ecdata[r] = new Array(rsPoly.getLength() - 1);\n        for (var i = 0; i < ecdata[r].length; i += 1) {\n          var modIndex = i + modPoly.getLength() - ecdata[r].length;\n          ecdata[r][i] = (modIndex >= 0)? modPoly.getAt(modIndex) : 0;\n        }\n      }\n\n      var totalCodeCount = 0;\n      for (var i = 0; i < rsBlocks.length; i += 1) {\n        totalCodeCount += rsBlocks[i].totalCount;\n      }\n\n      var data = new Array(totalCodeCount);\n      var index = 0;\n\n      for (var i = 0; i < maxDcCount; i += 1) {\n        for (var r = 0; r < rsBlocks.length; r += 1) {\n          if (i < dcdata[r].length) {\n            data[index] = dcdata[r][i];\n            index += 1;\n          }\n        }\n      }\n\n      for (var i = 0; i < maxEcCount; i += 1) {\n        for (var r = 0; r < rsBlocks.length; r += 1) {\n          if (i < ecdata[r].length) {\n            data[index] = ecdata[r][i];\n            index += 1;\n          }\n        }\n      }\n\n      return data;\n    };\n\n    var createData = function(typeNumber, errorCorrectionLevel, dataList) {\n\n      var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectionLevel);\n\n      var buffer = qrBitBuffer();\n\n      for (var i = 0; i < dataList.length; i += 1) {\n        var data = dataList[i];\n        buffer.put(data.getMode(), 4);\n        buffer.put(data.getLength(), QRUtil.getLengthInBits(data.getMode(), typeNumber) );\n        data.write(buffer);\n      }\n\n      // calc num max data.\n      var totalDataCount = 0;\n      for (var i = 0; i < rsBlocks.length; i += 1) {\n        totalDataCount += rsBlocks[i].dataCount;\n      }\n\n      if (buffer.getLengthInBits() > totalDataCount * 8) {\n        throw 'code length overflow. ('\n          + buffer.getLengthInBits()\n          + '>'\n          + totalDataCount * 8\n          + ')';\n      }\n\n      // end code\n      if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\n        buffer.put(0, 4);\n      }\n\n      // padding\n      while (buffer.getLengthInBits() % 8 != 0) {\n        buffer.putBit(false);\n      }\n\n      // padding\n      while (true) {\n\n        if (buffer.getLengthInBits() >= totalDataCount * 8) {\n          break;\n        }\n        buffer.put(PAD0, 8);\n\n        if (buffer.getLengthInBits() >= totalDataCount * 8) {\n          break;\n        }\n        buffer.put(PAD1, 8);\n      }\n\n      return createBytes(buffer, rsBlocks);\n    };\n\n    _this.addData = function(data, mode) {\n\n      mode = mode || 'Byte';\n\n      var newData = null;\n\n      switch(mode) {\n      case 'Numeric' :\n        newData = qrNumber(data);\n        break;\n      case 'Alphanumeric' :\n        newData = qrAlphaNum(data);\n        break;\n      case 'Byte' :\n        newData = qr8BitByte(data);\n        break;\n      case 'Kanji' :\n        newData = qrKanji(data);\n        break;\n      default :\n        throw 'mode:' + mode;\n      }\n\n      _dataList.push(newData);\n      _dataCache = null;\n    };\n\n    _this.isDark = function(row, col) {\n      if (row < 0 || _moduleCount <= row || col < 0 || _moduleCount <= col) {\n        throw row + ',' + col;\n      }\n      return _modules[row][col];\n    };\n\n    _this.getModuleCount = function() {\n      return _moduleCount;\n    };\n\n    _this.make = function() {\n      if (_typeNumber < 1) {\n        var typeNumber = 1;\n\n        for (; typeNumber < 40; typeNumber++) {\n          var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, _errorCorrectionLevel);\n          var buffer = qrBitBuffer();\n\n          for (var i = 0; i < _dataList.length; i++) {\n            var data = _dataList[i];\n            buffer.put(data.getMode(), 4);\n            buffer.put(data.getLength(), QRUtil.getLengthInBits(data.getMode(), typeNumber) );\n            data.write(buffer);\n          }\n\n          var totalDataCount = 0;\n          for (var i = 0; i < rsBlocks.length; i++) {\n            totalDataCount += rsBlocks[i].dataCount;\n          }\n\n          if (buffer.getLengthInBits() <= totalDataCount * 8) {\n            break;\n          }\n        }\n\n        _typeNumber = typeNumber;\n      }\n\n      makeImpl(false, getBestMaskPattern() );\n    };\n\n    _this.createTableTag = function(cellSize, margin) {\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      var qrHtml = '';\n\n      qrHtml += '<table style=\"';\n      qrHtml += ' border-width: 0px; border-style: none;';\n      qrHtml += ' border-collapse: collapse;';\n      qrHtml += ' padding: 0px; margin: ' + margin + 'px;';\n      qrHtml += '\">';\n      qrHtml += '<tbody>';\n\n      for (var r = 0; r < _this.getModuleCount(); r += 1) {\n\n        qrHtml += '<tr>';\n\n        for (var c = 0; c < _this.getModuleCount(); c += 1) {\n          qrHtml += '<td style=\"';\n          qrHtml += ' border-width: 0px; border-style: none;';\n          qrHtml += ' border-collapse: collapse;';\n          qrHtml += ' padding: 0px; margin: 0px;';\n          qrHtml += ' width: ' + cellSize + 'px;';\n          qrHtml += ' height: ' + cellSize + 'px;';\n          qrHtml += ' background-color: ';\n          qrHtml += _this.isDark(r, c)? '#000000' : '#ffffff';\n          qrHtml += ';';\n          qrHtml += '\"/>';\n        }\n\n        qrHtml += '</tr>';\n      }\n\n      qrHtml += '</tbody>';\n      qrHtml += '</table>';\n\n      return qrHtml;\n    };\n\n    _this.createSvgTag = function(cellSize, margin, alt, title) {\n\n      var opts = {};\n      if (typeof arguments[0] == 'object') {\n        // Called by options.\n        opts = arguments[0];\n        // overwrite cellSize and margin.\n        cellSize = opts.cellSize;\n        margin = opts.margin;\n        alt = opts.alt;\n        title = opts.title;\n      }\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      // Compose alt property surrogate\n      alt = (typeof alt === 'string') ? {text: alt} : alt || {};\n      alt.text = alt.text || null;\n      alt.id = (alt.text) ? alt.id || 'qrcode-description' : null;\n\n      // Compose title property surrogate\n      title = (typeof title === 'string') ? {text: title} : title || {};\n      title.text = title.text || null;\n      title.id = (title.text) ? title.id || 'qrcode-title' : null;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var c, mc, r, mr, qrSvg='', rect;\n\n      rect = 'l' + cellSize + ',0 0,' + cellSize +\n        ' -' + cellSize + ',0 0,-' + cellSize + 'z ';\n\n      qrSvg += '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"';\n      qrSvg += !opts.scalable ? ' width=\"' + size + 'px\" height=\"' + size + 'px\"' : '';\n      qrSvg += ' viewBox=\"0 0 ' + size + ' ' + size + '\" ';\n      qrSvg += ' preserveAspectRatio=\"xMinYMin meet\"';\n      qrSvg += (title.text || alt.text) ? ' role=\"img\" aria-labelledby=\"' +\n          escapeXml([title.id, alt.id].join(' ').trim() ) + '\"' : '';\n      qrSvg += '>';\n      qrSvg += (title.text) ? '<title id=\"' + escapeXml(title.id) + '\">' +\n          escapeXml(title.text) + '</title>' : '';\n      qrSvg += (alt.text) ? '<description id=\"' + escapeXml(alt.id) + '\">' +\n          escapeXml(alt.text) + '</description>' : '';\n      qrSvg += '<rect width=\"100%\" height=\"100%\" fill=\"white\" cx=\"0\" cy=\"0\"/>';\n      qrSvg += '<path d=\"';\n\n      for (r = 0; r < _this.getModuleCount(); r += 1) {\n        mr = r * cellSize + margin;\n        for (c = 0; c < _this.getModuleCount(); c += 1) {\n          if (_this.isDark(r, c) ) {\n            mc = c*cellSize+margin;\n            qrSvg += 'M' + mc + ',' + mr + rect;\n          }\n        }\n      }\n\n      qrSvg += '\" stroke=\"transparent\" fill=\"black\"/>';\n      qrSvg += '</svg>';\n\n      return qrSvg;\n    };\n\n    _this.createDataURL = function(cellSize, margin) {\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var min = margin;\n      var max = size - margin;\n\n      return createDataURL(size, size, function(x, y) {\n        if (min <= x && x < max && min <= y && y < max) {\n          var c = Math.floor( (x - min) / cellSize);\n          var r = Math.floor( (y - min) / cellSize);\n          return _this.isDark(r, c)? 0 : 1;\n        } else {\n          return 1;\n        }\n      } );\n    };\n\n    _this.createImgTag = function(cellSize, margin, alt) {\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n\n      var img = '';\n      img += '<img';\n      img += '\\u0020src=\"';\n      img += _this.createDataURL(cellSize, margin);\n      img += '\"';\n      img += '\\u0020width=\"';\n      img += size;\n      img += '\"';\n      img += '\\u0020height=\"';\n      img += size;\n      img += '\"';\n      if (alt) {\n        img += '\\u0020alt=\"';\n        img += escapeXml(alt);\n        img += '\"';\n      }\n      img += '/>';\n\n      return img;\n    };\n\n    var escapeXml = function(s) {\n      var escaped = '';\n      for (var i = 0; i < s.length; i += 1) {\n        var c = s.charAt(i);\n        switch(c) {\n        case '<': escaped += '&lt;'; break;\n        case '>': escaped += '&gt;'; break;\n        case '&': escaped += '&amp;'; break;\n        case '\"': escaped += '&quot;'; break;\n        default : escaped += c; break;\n        }\n      }\n      return escaped;\n    };\n\n    var _createHalfASCII = function(margin) {\n      var cellSize = 1;\n      margin = (typeof margin == 'undefined')? cellSize * 2 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var min = margin;\n      var max = size - margin;\n\n      var y, x, r1, r2, p;\n\n      var blocks = {\n        '██': '█',\n        '█ ': '▀',\n        ' █': '▄',\n        '  ': ' '\n      };\n\n      var blocksLastLineNoMargin = {\n        '██': '▀',\n        '█ ': '▀',\n        ' █': ' ',\n        '  ': ' '\n      };\n\n      var ascii = '';\n      for (y = 0; y < size; y += 2) {\n        r1 = Math.floor((y - min) / cellSize);\n        r2 = Math.floor((y + 1 - min) / cellSize);\n        for (x = 0; x < size; x += 1) {\n          p = '█';\n\n          if (min <= x && x < max && min <= y && y < max && _this.isDark(r1, Math.floor((x - min) / cellSize))) {\n            p = ' ';\n          }\n\n          if (min <= x && x < max && min <= y+1 && y+1 < max && _this.isDark(r2, Math.floor((x - min) / cellSize))) {\n            p += ' ';\n          }\n          else {\n            p += '█';\n          }\n\n          // Output 2 characters per pixel, to create full square. 1 character per pixels gives only half width of square.\n          ascii += (margin < 1 && y+1 >= max) ? blocksLastLineNoMargin[p] : blocks[p];\n        }\n\n        ascii += '\\n';\n      }\n\n      if (size % 2 && margin > 0) {\n        return ascii.substring(0, ascii.length - size - 1) + Array(size+1).join('▀');\n      }\n\n      return ascii.substring(0, ascii.length-1);\n    };\n\n    _this.createASCII = function(cellSize, margin) {\n      cellSize = cellSize || 1;\n\n      if (cellSize < 2) {\n        return _createHalfASCII(margin);\n      }\n\n      cellSize -= 1;\n      margin = (typeof margin == 'undefined')? cellSize * 2 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var min = margin;\n      var max = size - margin;\n\n      var y, x, r, p;\n\n      var white = Array(cellSize+1).join('██');\n      var black = Array(cellSize+1).join('  ');\n\n      var ascii = '';\n      var line = '';\n      for (y = 0; y < size; y += 1) {\n        r = Math.floor( (y - min) / cellSize);\n        line = '';\n        for (x = 0; x < size; x += 1) {\n          p = 1;\n\n          if (min <= x && x < max && min <= y && y < max && _this.isDark(r, Math.floor((x - min) / cellSize))) {\n            p = 0;\n          }\n\n          // Output 2 characters per pixel, to create full square. 1 character per pixels gives only half width of square.\n          line += p ? white : black;\n        }\n\n        for (r = 0; r < cellSize; r += 1) {\n          ascii += line + '\\n';\n        }\n      }\n\n      return ascii.substring(0, ascii.length-1);\n    };\n\n    _this.renderTo2dContext = function(context, cellSize) {\n      cellSize = cellSize || 2;\n      var length = _this.getModuleCount();\n      for (var row = 0; row < length; row++) {\n        for (var col = 0; col < length; col++) {\n          context.fillStyle = _this.isDark(row, col) ? 'black' : 'white';\n          context.fillRect(row * cellSize, col * cellSize, cellSize, cellSize);\n        }\n      }\n    }\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrcode.stringToBytes\n  //---------------------------------------------------------------------\n\n  qrcode.stringToBytesFuncs = {\n    'default' : function(s) {\n      var bytes = [];\n      for (var i = 0; i < s.length; i += 1) {\n        var c = s.charCodeAt(i);\n        bytes.push(c & 0xff);\n      }\n      return bytes;\n    }\n  };\n\n  qrcode.stringToBytes = qrcode.stringToBytesFuncs['default'];\n\n  //---------------------------------------------------------------------\n  // qrcode.createStringToBytes\n  //---------------------------------------------------------------------\n\n  /**\n   * @param unicodeData base64 string of byte array.\n   * [16bit Unicode],[16bit Bytes], ...\n   * @param numChars\n   */\n  qrcode.createStringToBytes = function(unicodeData, numChars) {\n\n    // create conversion map.\n\n    var unicodeMap = function() {\n\n      var bin = base64DecodeInputStream(unicodeData);\n      var read = function() {\n        var b = bin.read();\n        if (b == -1) throw 'eof';\n        return b;\n      };\n\n      var count = 0;\n      var unicodeMap = {};\n      while (true) {\n        var b0 = bin.read();\n        if (b0 == -1) break;\n        var b1 = read();\n        var b2 = read();\n        var b3 = read();\n        var k = String.fromCharCode( (b0 << 8) | b1);\n        var v = (b2 << 8) | b3;\n        unicodeMap[k] = v;\n        count += 1;\n      }\n      if (count != numChars) {\n        throw count + ' != ' + numChars;\n      }\n\n      return unicodeMap;\n    }();\n\n    var unknownChar = '?'.charCodeAt(0);\n\n    return function(s) {\n      var bytes = [];\n      for (var i = 0; i < s.length; i += 1) {\n        var c = s.charCodeAt(i);\n        if (c < 128) {\n          bytes.push(c);\n        } else {\n          var b = unicodeMap[s.charAt(i)];\n          if (typeof b == 'number') {\n            if ( (b & 0xff) == b) {\n              // 1byte\n              bytes.push(b);\n            } else {\n              // 2bytes\n              bytes.push(b >>> 8);\n              bytes.push(b & 0xff);\n            }\n          } else {\n            bytes.push(unknownChar);\n          }\n        }\n      }\n      return bytes;\n    };\n  };\n\n  //---------------------------------------------------------------------\n  // QRMode\n  //---------------------------------------------------------------------\n\n  var QRMode = {\n    MODE_NUMBER :    1 << 0,\n    MODE_ALPHA_NUM : 1 << 1,\n    MODE_8BIT_BYTE : 1 << 2,\n    MODE_KANJI :     1 << 3\n  };\n\n  //---------------------------------------------------------------------\n  // QRErrorCorrectionLevel\n  //---------------------------------------------------------------------\n\n  var QRErrorCorrectionLevel = {\n    L : 1,\n    M : 0,\n    Q : 3,\n    H : 2\n  };\n\n  //---------------------------------------------------------------------\n  // QRMaskPattern\n  //---------------------------------------------------------------------\n\n  var QRMaskPattern = {\n    PATTERN000 : 0,\n    PATTERN001 : 1,\n    PATTERN010 : 2,\n    PATTERN011 : 3,\n    PATTERN100 : 4,\n    PATTERN101 : 5,\n    PATTERN110 : 6,\n    PATTERN111 : 7\n  };\n\n  //---------------------------------------------------------------------\n  // QRUtil\n  //---------------------------------------------------------------------\n\n  var QRUtil = function() {\n\n    var PATTERN_POSITION_TABLE = [\n      [],\n      [6, 18],\n      [6, 22],\n      [6, 26],\n      [6, 30],\n      [6, 34],\n      [6, 22, 38],\n      [6, 24, 42],\n      [6, 26, 46],\n      [6, 28, 50],\n      [6, 30, 54],\n      [6, 32, 58],\n      [6, 34, 62],\n      [6, 26, 46, 66],\n      [6, 26, 48, 70],\n      [6, 26, 50, 74],\n      [6, 30, 54, 78],\n      [6, 30, 56, 82],\n      [6, 30, 58, 86],\n      [6, 34, 62, 90],\n      [6, 28, 50, 72, 94],\n      [6, 26, 50, 74, 98],\n      [6, 30, 54, 78, 102],\n      [6, 28, 54, 80, 106],\n      [6, 32, 58, 84, 110],\n      [6, 30, 58, 86, 114],\n      [6, 34, 62, 90, 118],\n      [6, 26, 50, 74, 98, 122],\n      [6, 30, 54, 78, 102, 126],\n      [6, 26, 52, 78, 104, 130],\n      [6, 30, 56, 82, 108, 134],\n      [6, 34, 60, 86, 112, 138],\n      [6, 30, 58, 86, 114, 142],\n      [6, 34, 62, 90, 118, 146],\n      [6, 30, 54, 78, 102, 126, 150],\n      [6, 24, 50, 76, 102, 128, 154],\n      [6, 28, 54, 80, 106, 132, 158],\n      [6, 32, 58, 84, 110, 136, 162],\n      [6, 26, 54, 82, 110, 138, 166],\n      [6, 30, 58, 86, 114, 142, 170]\n    ];\n    var G15 = (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0);\n    var G18 = (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0);\n    var G15_MASK = (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1);\n\n    var _this = {};\n\n    var getBCHDigit = function(data) {\n      var digit = 0;\n      while (data != 0) {\n        digit += 1;\n        data >>>= 1;\n      }\n      return digit;\n    };\n\n    _this.getBCHTypeInfo = function(data) {\n      var d = data << 10;\n      while (getBCHDigit(d) - getBCHDigit(G15) >= 0) {\n        d ^= (G15 << (getBCHDigit(d) - getBCHDigit(G15) ) );\n      }\n      return ( (data << 10) | d) ^ G15_MASK;\n    };\n\n    _this.getBCHTypeNumber = function(data) {\n      var d = data << 12;\n      while (getBCHDigit(d) - getBCHDigit(G18) >= 0) {\n        d ^= (G18 << (getBCHDigit(d) - getBCHDigit(G18) ) );\n      }\n      return (data << 12) | d;\n    };\n\n    _this.getPatternPosition = function(typeNumber) {\n      return PATTERN_POSITION_TABLE[typeNumber - 1];\n    };\n\n    _this.getMaskFunction = function(maskPattern) {\n\n      switch (maskPattern) {\n\n      case QRMaskPattern.PATTERN000 :\n        return function(i, j) { return (i + j) % 2 == 0; };\n      case QRMaskPattern.PATTERN001 :\n        return function(i, j) { return i % 2 == 0; };\n      case QRMaskPattern.PATTERN010 :\n        return function(i, j) { return j % 3 == 0; };\n      case QRMaskPattern.PATTERN011 :\n        return function(i, j) { return (i + j) % 3 == 0; };\n      case QRMaskPattern.PATTERN100 :\n        return function(i, j) { return (Math.floor(i / 2) + Math.floor(j / 3) ) % 2 == 0; };\n      case QRMaskPattern.PATTERN101 :\n        return function(i, j) { return (i * j) % 2 + (i * j) % 3 == 0; };\n      case QRMaskPattern.PATTERN110 :\n        return function(i, j) { return ( (i * j) % 2 + (i * j) % 3) % 2 == 0; };\n      case QRMaskPattern.PATTERN111 :\n        return function(i, j) { return ( (i * j) % 3 + (i + j) % 2) % 2 == 0; };\n\n      default :\n        throw 'bad maskPattern:' + maskPattern;\n      }\n    };\n\n    _this.getErrorCorrectPolynomial = function(errorCorrectLength) {\n      var a = qrPolynomial([1], 0);\n      for (var i = 0; i < errorCorrectLength; i += 1) {\n        a = a.multiply(qrPolynomial([1, QRMath.gexp(i)], 0) );\n      }\n      return a;\n    };\n\n    _this.getLengthInBits = function(mode, type) {\n\n      if (1 <= type && type < 10) {\n\n        // 1 - 9\n\n        switch(mode) {\n        case QRMode.MODE_NUMBER    : return 10;\n        case QRMode.MODE_ALPHA_NUM : return 9;\n        case QRMode.MODE_8BIT_BYTE : return 8;\n        case QRMode.MODE_KANJI     : return 8;\n        default :\n          throw 'mode:' + mode;\n        }\n\n      } else if (type < 27) {\n\n        // 10 - 26\n\n        switch(mode) {\n        case QRMode.MODE_NUMBER    : return 12;\n        case QRMode.MODE_ALPHA_NUM : return 11;\n        case QRMode.MODE_8BIT_BYTE : return 16;\n        case QRMode.MODE_KANJI     : return 10;\n        default :\n          throw 'mode:' + mode;\n        }\n\n      } else if (type < 41) {\n\n        // 27 - 40\n\n        switch(mode) {\n        case QRMode.MODE_NUMBER    : return 14;\n        case QRMode.MODE_ALPHA_NUM : return 13;\n        case QRMode.MODE_8BIT_BYTE : return 16;\n        case QRMode.MODE_KANJI     : return 12;\n        default :\n          throw 'mode:' + mode;\n        }\n\n      } else {\n        throw 'type:' + type;\n      }\n    };\n\n    _this.getLostPoint = function(qrcode) {\n\n      var moduleCount = qrcode.getModuleCount();\n\n      var lostPoint = 0;\n\n      // LEVEL1\n\n      for (var row = 0; row < moduleCount; row += 1) {\n        for (var col = 0; col < moduleCount; col += 1) {\n\n          var sameCount = 0;\n          var dark = qrcode.isDark(row, col);\n\n          for (var r = -1; r <= 1; r += 1) {\n\n            if (row + r < 0 || moduleCount <= row + r) {\n              continue;\n            }\n\n            for (var c = -1; c <= 1; c += 1) {\n\n              if (col + c < 0 || moduleCount <= col + c) {\n                continue;\n              }\n\n              if (r == 0 && c == 0) {\n                continue;\n              }\n\n              if (dark == qrcode.isDark(row + r, col + c) ) {\n                sameCount += 1;\n              }\n            }\n          }\n\n          if (sameCount > 5) {\n            lostPoint += (3 + sameCount - 5);\n          }\n        }\n      };\n\n      // LEVEL2\n\n      for (var row = 0; row < moduleCount - 1; row += 1) {\n        for (var col = 0; col < moduleCount - 1; col += 1) {\n          var count = 0;\n          if (qrcode.isDark(row, col) ) count += 1;\n          if (qrcode.isDark(row + 1, col) ) count += 1;\n          if (qrcode.isDark(row, col + 1) ) count += 1;\n          if (qrcode.isDark(row + 1, col + 1) ) count += 1;\n          if (count == 0 || count == 4) {\n            lostPoint += 3;\n          }\n        }\n      }\n\n      // LEVEL3\n\n      for (var row = 0; row < moduleCount; row += 1) {\n        for (var col = 0; col < moduleCount - 6; col += 1) {\n          if (qrcode.isDark(row, col)\n              && !qrcode.isDark(row, col + 1)\n              &&  qrcode.isDark(row, col + 2)\n              &&  qrcode.isDark(row, col + 3)\n              &&  qrcode.isDark(row, col + 4)\n              && !qrcode.isDark(row, col + 5)\n              &&  qrcode.isDark(row, col + 6) ) {\n            lostPoint += 40;\n          }\n        }\n      }\n\n      for (var col = 0; col < moduleCount; col += 1) {\n        for (var row = 0; row < moduleCount - 6; row += 1) {\n          if (qrcode.isDark(row, col)\n              && !qrcode.isDark(row + 1, col)\n              &&  qrcode.isDark(row + 2, col)\n              &&  qrcode.isDark(row + 3, col)\n              &&  qrcode.isDark(row + 4, col)\n              && !qrcode.isDark(row + 5, col)\n              &&  qrcode.isDark(row + 6, col) ) {\n            lostPoint += 40;\n          }\n        }\n      }\n\n      // LEVEL4\n\n      var darkCount = 0;\n\n      for (var col = 0; col < moduleCount; col += 1) {\n        for (var row = 0; row < moduleCount; row += 1) {\n          if (qrcode.isDark(row, col) ) {\n            darkCount += 1;\n          }\n        }\n      }\n\n      var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\n      lostPoint += ratio * 10;\n\n      return lostPoint;\n    };\n\n    return _this;\n  }();\n\n  //---------------------------------------------------------------------\n  // QRMath\n  //---------------------------------------------------------------------\n\n  var QRMath = function() {\n\n    var EXP_TABLE = new Array(256);\n    var LOG_TABLE = new Array(256);\n\n    // initialize tables\n    for (var i = 0; i < 8; i += 1) {\n      EXP_TABLE[i] = 1 << i;\n    }\n    for (var i = 8; i < 256; i += 1) {\n      EXP_TABLE[i] = EXP_TABLE[i - 4]\n        ^ EXP_TABLE[i - 5]\n        ^ EXP_TABLE[i - 6]\n        ^ EXP_TABLE[i - 8];\n    }\n    for (var i = 0; i < 255; i += 1) {\n      LOG_TABLE[EXP_TABLE[i] ] = i;\n    }\n\n    var _this = {};\n\n    _this.glog = function(n) {\n\n      if (n < 1) {\n        throw 'glog(' + n + ')';\n      }\n\n      return LOG_TABLE[n];\n    };\n\n    _this.gexp = function(n) {\n\n      while (n < 0) {\n        n += 255;\n      }\n\n      while (n >= 256) {\n        n -= 255;\n      }\n\n      return EXP_TABLE[n];\n    };\n\n    return _this;\n  }();\n\n  //---------------------------------------------------------------------\n  // qrPolynomial\n  //---------------------------------------------------------------------\n\n  function qrPolynomial(num, shift) {\n\n    if (typeof num.length == 'undefined') {\n      throw num.length + '/' + shift;\n    }\n\n    var _num = function() {\n      var offset = 0;\n      while (offset < num.length && num[offset] == 0) {\n        offset += 1;\n      }\n      var _num = new Array(num.length - offset + shift);\n      for (var i = 0; i < num.length - offset; i += 1) {\n        _num[i] = num[i + offset];\n      }\n      return _num;\n    }();\n\n    var _this = {};\n\n    _this.getAt = function(index) {\n      return _num[index];\n    };\n\n    _this.getLength = function() {\n      return _num.length;\n    };\n\n    _this.multiply = function(e) {\n\n      var num = new Array(_this.getLength() + e.getLength() - 1);\n\n      for (var i = 0; i < _this.getLength(); i += 1) {\n        for (var j = 0; j < e.getLength(); j += 1) {\n          num[i + j] ^= QRMath.gexp(QRMath.glog(_this.getAt(i) ) + QRMath.glog(e.getAt(j) ) );\n        }\n      }\n\n      return qrPolynomial(num, 0);\n    };\n\n    _this.mod = function(e) {\n\n      if (_this.getLength() - e.getLength() < 0) {\n        return _this;\n      }\n\n      var ratio = QRMath.glog(_this.getAt(0) ) - QRMath.glog(e.getAt(0) );\n\n      var num = new Array(_this.getLength() );\n      for (var i = 0; i < _this.getLength(); i += 1) {\n        num[i] = _this.getAt(i);\n      }\n\n      for (var i = 0; i < e.getLength(); i += 1) {\n        num[i] ^= QRMath.gexp(QRMath.glog(e.getAt(i) ) + ratio);\n      }\n\n      // recursive call\n      return qrPolynomial(num, 0).mod(e);\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // QRRSBlock\n  //---------------------------------------------------------------------\n\n  var QRRSBlock = function() {\n\n    var RS_BLOCK_TABLE = [\n\n      // L\n      // M\n      // Q\n      // H\n\n      // 1\n      [1, 26, 19],\n      [1, 26, 16],\n      [1, 26, 13],\n      [1, 26, 9],\n\n      // 2\n      [1, 44, 34],\n      [1, 44, 28],\n      [1, 44, 22],\n      [1, 44, 16],\n\n      // 3\n      [1, 70, 55],\n      [1, 70, 44],\n      [2, 35, 17],\n      [2, 35, 13],\n\n      // 4\n      [1, 100, 80],\n      [2, 50, 32],\n      [2, 50, 24],\n      [4, 25, 9],\n\n      // 5\n      [1, 134, 108],\n      [2, 67, 43],\n      [2, 33, 15, 2, 34, 16],\n      [2, 33, 11, 2, 34, 12],\n\n      // 6\n      [2, 86, 68],\n      [4, 43, 27],\n      [4, 43, 19],\n      [4, 43, 15],\n\n      // 7\n      [2, 98, 78],\n      [4, 49, 31],\n      [2, 32, 14, 4, 33, 15],\n      [4, 39, 13, 1, 40, 14],\n\n      // 8\n      [2, 121, 97],\n      [2, 60, 38, 2, 61, 39],\n      [4, 40, 18, 2, 41, 19],\n      [4, 40, 14, 2, 41, 15],\n\n      // 9\n      [2, 146, 116],\n      [3, 58, 36, 2, 59, 37],\n      [4, 36, 16, 4, 37, 17],\n      [4, 36, 12, 4, 37, 13],\n\n      // 10\n      [2, 86, 68, 2, 87, 69],\n      [4, 69, 43, 1, 70, 44],\n      [6, 43, 19, 2, 44, 20],\n      [6, 43, 15, 2, 44, 16],\n\n      // 11\n      [4, 101, 81],\n      [1, 80, 50, 4, 81, 51],\n      [4, 50, 22, 4, 51, 23],\n      [3, 36, 12, 8, 37, 13],\n\n      // 12\n      [2, 116, 92, 2, 117, 93],\n      [6, 58, 36, 2, 59, 37],\n      [4, 46, 20, 6, 47, 21],\n      [7, 42, 14, 4, 43, 15],\n\n      // 13\n      [4, 133, 107],\n      [8, 59, 37, 1, 60, 38],\n      [8, 44, 20, 4, 45, 21],\n      [12, 33, 11, 4, 34, 12],\n\n      // 14\n      [3, 145, 115, 1, 146, 116],\n      [4, 64, 40, 5, 65, 41],\n      [11, 36, 16, 5, 37, 17],\n      [11, 36, 12, 5, 37, 13],\n\n      // 15\n      [5, 109, 87, 1, 110, 88],\n      [5, 65, 41, 5, 66, 42],\n      [5, 54, 24, 7, 55, 25],\n      [11, 36, 12, 7, 37, 13],\n\n      // 16\n      [5, 122, 98, 1, 123, 99],\n      [7, 73, 45, 3, 74, 46],\n      [15, 43, 19, 2, 44, 20],\n      [3, 45, 15, 13, 46, 16],\n\n      // 17\n      [1, 135, 107, 5, 136, 108],\n      [10, 74, 46, 1, 75, 47],\n      [1, 50, 22, 15, 51, 23],\n      [2, 42, 14, 17, 43, 15],\n\n      // 18\n      [5, 150, 120, 1, 151, 121],\n      [9, 69, 43, 4, 70, 44],\n      [17, 50, 22, 1, 51, 23],\n      [2, 42, 14, 19, 43, 15],\n\n      // 19\n      [3, 141, 113, 4, 142, 114],\n      [3, 70, 44, 11, 71, 45],\n      [17, 47, 21, 4, 48, 22],\n      [9, 39, 13, 16, 40, 14],\n\n      // 20\n      [3, 135, 107, 5, 136, 108],\n      [3, 67, 41, 13, 68, 42],\n      [15, 54, 24, 5, 55, 25],\n      [15, 43, 15, 10, 44, 16],\n\n      // 21\n      [4, 144, 116, 4, 145, 117],\n      [17, 68, 42],\n      [17, 50, 22, 6, 51, 23],\n      [19, 46, 16, 6, 47, 17],\n\n      // 22\n      [2, 139, 111, 7, 140, 112],\n      [17, 74, 46],\n      [7, 54, 24, 16, 55, 25],\n      [34, 37, 13],\n\n      // 23\n      [4, 151, 121, 5, 152, 122],\n      [4, 75, 47, 14, 76, 48],\n      [11, 54, 24, 14, 55, 25],\n      [16, 45, 15, 14, 46, 16],\n\n      // 24\n      [6, 147, 117, 4, 148, 118],\n      [6, 73, 45, 14, 74, 46],\n      [11, 54, 24, 16, 55, 25],\n      [30, 46, 16, 2, 47, 17],\n\n      // 25\n      [8, 132, 106, 4, 133, 107],\n      [8, 75, 47, 13, 76, 48],\n      [7, 54, 24, 22, 55, 25],\n      [22, 45, 15, 13, 46, 16],\n\n      // 26\n      [10, 142, 114, 2, 143, 115],\n      [19, 74, 46, 4, 75, 47],\n      [28, 50, 22, 6, 51, 23],\n      [33, 46, 16, 4, 47, 17],\n\n      // 27\n      [8, 152, 122, 4, 153, 123],\n      [22, 73, 45, 3, 74, 46],\n      [8, 53, 23, 26, 54, 24],\n      [12, 45, 15, 28, 46, 16],\n\n      // 28\n      [3, 147, 117, 10, 148, 118],\n      [3, 73, 45, 23, 74, 46],\n      [4, 54, 24, 31, 55, 25],\n      [11, 45, 15, 31, 46, 16],\n\n      // 29\n      [7, 146, 116, 7, 147, 117],\n      [21, 73, 45, 7, 74, 46],\n      [1, 53, 23, 37, 54, 24],\n      [19, 45, 15, 26, 46, 16],\n\n      // 30\n      [5, 145, 115, 10, 146, 116],\n      [19, 75, 47, 10, 76, 48],\n      [15, 54, 24, 25, 55, 25],\n      [23, 45, 15, 25, 46, 16],\n\n      // 31\n      [13, 145, 115, 3, 146, 116],\n      [2, 74, 46, 29, 75, 47],\n      [42, 54, 24, 1, 55, 25],\n      [23, 45, 15, 28, 46, 16],\n\n      // 32\n      [17, 145, 115],\n      [10, 74, 46, 23, 75, 47],\n      [10, 54, 24, 35, 55, 25],\n      [19, 45, 15, 35, 46, 16],\n\n      // 33\n      [17, 145, 115, 1, 146, 116],\n      [14, 74, 46, 21, 75, 47],\n      [29, 54, 24, 19, 55, 25],\n      [11, 45, 15, 46, 46, 16],\n\n      // 34\n      [13, 145, 115, 6, 146, 116],\n      [14, 74, 46, 23, 75, 47],\n      [44, 54, 24, 7, 55, 25],\n      [59, 46, 16, 1, 47, 17],\n\n      // 35\n      [12, 151, 121, 7, 152, 122],\n      [12, 75, 47, 26, 76, 48],\n      [39, 54, 24, 14, 55, 25],\n      [22, 45, 15, 41, 46, 16],\n\n      // 36\n      [6, 151, 121, 14, 152, 122],\n      [6, 75, 47, 34, 76, 48],\n      [46, 54, 24, 10, 55, 25],\n      [2, 45, 15, 64, 46, 16],\n\n      // 37\n      [17, 152, 122, 4, 153, 123],\n      [29, 74, 46, 14, 75, 47],\n      [49, 54, 24, 10, 55, 25],\n      [24, 45, 15, 46, 46, 16],\n\n      // 38\n      [4, 152, 122, 18, 153, 123],\n      [13, 74, 46, 32, 75, 47],\n      [48, 54, 24, 14, 55, 25],\n      [42, 45, 15, 32, 46, 16],\n\n      // 39\n      [20, 147, 117, 4, 148, 118],\n      [40, 75, 47, 7, 76, 48],\n      [43, 54, 24, 22, 55, 25],\n      [10, 45, 15, 67, 46, 16],\n\n      // 40\n      [19, 148, 118, 6, 149, 119],\n      [18, 75, 47, 31, 76, 48],\n      [34, 54, 24, 34, 55, 25],\n      [20, 45, 15, 61, 46, 16]\n    ];\n\n    var qrRSBlock = function(totalCount, dataCount) {\n      var _this = {};\n      _this.totalCount = totalCount;\n      _this.dataCount = dataCount;\n      return _this;\n    };\n\n    var _this = {};\n\n    var getRsBlockTable = function(typeNumber, errorCorrectionLevel) {\n\n      switch(errorCorrectionLevel) {\n      case QRErrorCorrectionLevel.L :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\n      case QRErrorCorrectionLevel.M :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\n      case QRErrorCorrectionLevel.Q :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\n      case QRErrorCorrectionLevel.H :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\n      default :\n        return undefined;\n      }\n    };\n\n    _this.getRSBlocks = function(typeNumber, errorCorrectionLevel) {\n\n      var rsBlock = getRsBlockTable(typeNumber, errorCorrectionLevel);\n\n      if (typeof rsBlock == 'undefined') {\n        throw 'bad rs block @ typeNumber:' + typeNumber +\n            '/errorCorrectionLevel:' + errorCorrectionLevel;\n      }\n\n      var length = rsBlock.length / 3;\n\n      var list = [];\n\n      for (var i = 0; i < length; i += 1) {\n\n        var count = rsBlock[i * 3 + 0];\n        var totalCount = rsBlock[i * 3 + 1];\n        var dataCount = rsBlock[i * 3 + 2];\n\n        for (var j = 0; j < count; j += 1) {\n          list.push(qrRSBlock(totalCount, dataCount) );\n        }\n      }\n\n      return list;\n    };\n\n    return _this;\n  }();\n\n  //---------------------------------------------------------------------\n  // qrBitBuffer\n  //---------------------------------------------------------------------\n\n  var qrBitBuffer = function() {\n\n    var _buffer = [];\n    var _length = 0;\n\n    var _this = {};\n\n    _this.getBuffer = function() {\n      return _buffer;\n    };\n\n    _this.getAt = function(index) {\n      var bufIndex = Math.floor(index / 8);\n      return ( (_buffer[bufIndex] >>> (7 - index % 8) ) & 1) == 1;\n    };\n\n    _this.put = function(num, length) {\n      for (var i = 0; i < length; i += 1) {\n        _this.putBit( ( (num >>> (length - i - 1) ) & 1) == 1);\n      }\n    };\n\n    _this.getLengthInBits = function() {\n      return _length;\n    };\n\n    _this.putBit = function(bit) {\n\n      var bufIndex = Math.floor(_length / 8);\n      if (_buffer.length <= bufIndex) {\n        _buffer.push(0);\n      }\n\n      if (bit) {\n        _buffer[bufIndex] |= (0x80 >>> (_length % 8) );\n      }\n\n      _length += 1;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrNumber\n  //---------------------------------------------------------------------\n\n  var qrNumber = function(data) {\n\n    var _mode = QRMode.MODE_NUMBER;\n    var _data = data;\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return _data.length;\n    };\n\n    _this.write = function(buffer) {\n\n      var data = _data;\n\n      var i = 0;\n\n      while (i + 2 < data.length) {\n        buffer.put(strToNum(data.substring(i, i + 3) ), 10);\n        i += 3;\n      }\n\n      if (i < data.length) {\n        if (data.length - i == 1) {\n          buffer.put(strToNum(data.substring(i, i + 1) ), 4);\n        } else if (data.length - i == 2) {\n          buffer.put(strToNum(data.substring(i, i + 2) ), 7);\n        }\n      }\n    };\n\n    var strToNum = function(s) {\n      var num = 0;\n      for (var i = 0; i < s.length; i += 1) {\n        num = num * 10 + chatToNum(s.charAt(i) );\n      }\n      return num;\n    };\n\n    var chatToNum = function(c) {\n      if ('0' <= c && c <= '9') {\n        return c.charCodeAt(0) - '0'.charCodeAt(0);\n      }\n      throw 'illegal char :' + c;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrAlphaNum\n  //---------------------------------------------------------------------\n\n  var qrAlphaNum = function(data) {\n\n    var _mode = QRMode.MODE_ALPHA_NUM;\n    var _data = data;\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return _data.length;\n    };\n\n    _this.write = function(buffer) {\n\n      var s = _data;\n\n      var i = 0;\n\n      while (i + 1 < s.length) {\n        buffer.put(\n          getCode(s.charAt(i) ) * 45 +\n          getCode(s.charAt(i + 1) ), 11);\n        i += 2;\n      }\n\n      if (i < s.length) {\n        buffer.put(getCode(s.charAt(i) ), 6);\n      }\n    };\n\n    var getCode = function(c) {\n\n      if ('0' <= c && c <= '9') {\n        return c.charCodeAt(0) - '0'.charCodeAt(0);\n      } else if ('A' <= c && c <= 'Z') {\n        return c.charCodeAt(0) - 'A'.charCodeAt(0) + 10;\n      } else {\n        switch (c) {\n        case ' ' : return 36;\n        case '$' : return 37;\n        case '%' : return 38;\n        case '*' : return 39;\n        case '+' : return 40;\n        case '-' : return 41;\n        case '.' : return 42;\n        case '/' : return 43;\n        case ':' : return 44;\n        default :\n          throw 'illegal char :' + c;\n        }\n      }\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qr8BitByte\n  //---------------------------------------------------------------------\n\n  var qr8BitByte = function(data) {\n\n    var _mode = QRMode.MODE_8BIT_BYTE;\n    var _data = data;\n    var _bytes = qrcode.stringToBytes(data);\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return _bytes.length;\n    };\n\n    _this.write = function(buffer) {\n      for (var i = 0; i < _bytes.length; i += 1) {\n        buffer.put(_bytes[i], 8);\n      }\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrKanji\n  //---------------------------------------------------------------------\n\n  var qrKanji = function(data) {\n\n    var _mode = QRMode.MODE_KANJI;\n    var _data = data;\n\n    var stringToBytes = qrcode.stringToBytesFuncs['SJIS'];\n    if (!stringToBytes) {\n      throw 'sjis not supported.';\n    }\n    !function(c, code) {\n      // self test for sjis support.\n      var test = stringToBytes(c);\n      if (test.length != 2 || ( (test[0] << 8) | test[1]) != code) {\n        throw 'sjis not supported.';\n      }\n    }('\\u53cb', 0x9746);\n\n    var _bytes = stringToBytes(data);\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return ~~(_bytes.length / 2);\n    };\n\n    _this.write = function(buffer) {\n\n      var data = _bytes;\n\n      var i = 0;\n\n      while (i + 1 < data.length) {\n\n        var c = ( (0xff & data[i]) << 8) | (0xff & data[i + 1]);\n\n        if (0x8140 <= c && c <= 0x9FFC) {\n          c -= 0x8140;\n        } else if (0xE040 <= c && c <= 0xEBBF) {\n          c -= 0xC140;\n        } else {\n          throw 'illegal char at ' + (i + 1) + '/' + c;\n        }\n\n        c = ( (c >>> 8) & 0xff) * 0xC0 + (c & 0xff);\n\n        buffer.put(c, 13);\n\n        i += 2;\n      }\n\n      if (i < data.length) {\n        throw 'illegal char at ' + (i + 1);\n      }\n    };\n\n    return _this;\n  };\n\n  //=====================================================================\n  // GIF Support etc.\n  //\n\n  //---------------------------------------------------------------------\n  // byteArrayOutputStream\n  //---------------------------------------------------------------------\n\n  var byteArrayOutputStream = function() {\n\n    var _bytes = [];\n\n    var _this = {};\n\n    _this.writeByte = function(b) {\n      _bytes.push(b & 0xff);\n    };\n\n    _this.writeShort = function(i) {\n      _this.writeByte(i);\n      _this.writeByte(i >>> 8);\n    };\n\n    _this.writeBytes = function(b, off, len) {\n      off = off || 0;\n      len = len || b.length;\n      for (var i = 0; i < len; i += 1) {\n        _this.writeByte(b[i + off]);\n      }\n    };\n\n    _this.writeString = function(s) {\n      for (var i = 0; i < s.length; i += 1) {\n        _this.writeByte(s.charCodeAt(i) );\n      }\n    };\n\n    _this.toByteArray = function() {\n      return _bytes;\n    };\n\n    _this.toString = function() {\n      var s = '';\n      s += '[';\n      for (var i = 0; i < _bytes.length; i += 1) {\n        if (i > 0) {\n          s += ',';\n        }\n        s += _bytes[i];\n      }\n      s += ']';\n      return s;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // base64EncodeOutputStream\n  //---------------------------------------------------------------------\n\n  var base64EncodeOutputStream = function() {\n\n    var _buffer = 0;\n    var _buflen = 0;\n    var _length = 0;\n    var _base64 = '';\n\n    var _this = {};\n\n    var writeEncoded = function(b) {\n      _base64 += String.fromCharCode(encode(b & 0x3f) );\n    };\n\n    var encode = function(n) {\n      if (n < 0) {\n        // error.\n      } else if (n < 26) {\n        return 0x41 + n;\n      } else if (n < 52) {\n        return 0x61 + (n - 26);\n      } else if (n < 62) {\n        return 0x30 + (n - 52);\n      } else if (n == 62) {\n        return 0x2b;\n      } else if (n == 63) {\n        return 0x2f;\n      }\n      throw 'n:' + n;\n    };\n\n    _this.writeByte = function(n) {\n\n      _buffer = (_buffer << 8) | (n & 0xff);\n      _buflen += 8;\n      _length += 1;\n\n      while (_buflen >= 6) {\n        writeEncoded(_buffer >>> (_buflen - 6) );\n        _buflen -= 6;\n      }\n    };\n\n    _this.flush = function() {\n\n      if (_buflen > 0) {\n        writeEncoded(_buffer << (6 - _buflen) );\n        _buffer = 0;\n        _buflen = 0;\n      }\n\n      if (_length % 3 != 0) {\n        // padding\n        var padlen = 3 - _length % 3;\n        for (var i = 0; i < padlen; i += 1) {\n          _base64 += '=';\n        }\n      }\n    };\n\n    _this.toString = function() {\n      return _base64;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // base64DecodeInputStream\n  //---------------------------------------------------------------------\n\n  var base64DecodeInputStream = function(str) {\n\n    var _str = str;\n    var _pos = 0;\n    var _buffer = 0;\n    var _buflen = 0;\n\n    var _this = {};\n\n    _this.read = function() {\n\n      while (_buflen < 8) {\n\n        if (_pos >= _str.length) {\n          if (_buflen == 0) {\n            return -1;\n          }\n          throw 'unexpected end of file./' + _buflen;\n        }\n\n        var c = _str.charAt(_pos);\n        _pos += 1;\n\n        if (c == '=') {\n          _buflen = 0;\n          return -1;\n        } else if (c.match(/^\\s$/) ) {\n          // ignore if whitespace.\n          continue;\n        }\n\n        _buffer = (_buffer << 6) | decode(c.charCodeAt(0) );\n        _buflen += 6;\n      }\n\n      var n = (_buffer >>> (_buflen - 8) ) & 0xff;\n      _buflen -= 8;\n      return n;\n    };\n\n    var decode = function(c) {\n      if (0x41 <= c && c <= 0x5a) {\n        return c - 0x41;\n      } else if (0x61 <= c && c <= 0x7a) {\n        return c - 0x61 + 26;\n      } else if (0x30 <= c && c <= 0x39) {\n        return c - 0x30 + 52;\n      } else if (c == 0x2b) {\n        return 62;\n      } else if (c == 0x2f) {\n        return 63;\n      } else {\n        throw 'c:' + c;\n      }\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // gifImage (B/W)\n  //---------------------------------------------------------------------\n\n  var gifImage = function(width, height) {\n\n    var _width = width;\n    var _height = height;\n    var _data = new Array(width * height);\n\n    var _this = {};\n\n    _this.setPixel = function(x, y, pixel) {\n      _data[y * _width + x] = pixel;\n    };\n\n    _this.write = function(out) {\n\n      //---------------------------------\n      // GIF Signature\n\n      out.writeString('GIF87a');\n\n      //---------------------------------\n      // Screen Descriptor\n\n      out.writeShort(_width);\n      out.writeShort(_height);\n\n      out.writeByte(0x80); // 2bit\n      out.writeByte(0);\n      out.writeByte(0);\n\n      //---------------------------------\n      // Global Color Map\n\n      // black\n      out.writeByte(0x00);\n      out.writeByte(0x00);\n      out.writeByte(0x00);\n\n      // white\n      out.writeByte(0xff);\n      out.writeByte(0xff);\n      out.writeByte(0xff);\n\n      //---------------------------------\n      // Image Descriptor\n\n      out.writeString(',');\n      out.writeShort(0);\n      out.writeShort(0);\n      out.writeShort(_width);\n      out.writeShort(_height);\n      out.writeByte(0);\n\n      //---------------------------------\n      // Local Color Map\n\n      //---------------------------------\n      // Raster Data\n\n      var lzwMinCodeSize = 2;\n      var raster = getLZWRaster(lzwMinCodeSize);\n\n      out.writeByte(lzwMinCodeSize);\n\n      var offset = 0;\n\n      while (raster.length - offset > 255) {\n        out.writeByte(255);\n        out.writeBytes(raster, offset, 255);\n        offset += 255;\n      }\n\n      out.writeByte(raster.length - offset);\n      out.writeBytes(raster, offset, raster.length - offset);\n      out.writeByte(0x00);\n\n      //---------------------------------\n      // GIF Terminator\n      out.writeString(';');\n    };\n\n    var bitOutputStream = function(out) {\n\n      var _out = out;\n      var _bitLength = 0;\n      var _bitBuffer = 0;\n\n      var _this = {};\n\n      _this.write = function(data, length) {\n\n        if ( (data >>> length) != 0) {\n          throw 'length over';\n        }\n\n        while (_bitLength + length >= 8) {\n          _out.writeByte(0xff & ( (data << _bitLength) | _bitBuffer) );\n          length -= (8 - _bitLength);\n          data >>>= (8 - _bitLength);\n          _bitBuffer = 0;\n          _bitLength = 0;\n        }\n\n        _bitBuffer = (data << _bitLength) | _bitBuffer;\n        _bitLength = _bitLength + length;\n      };\n\n      _this.flush = function() {\n        if (_bitLength > 0) {\n          _out.writeByte(_bitBuffer);\n        }\n      };\n\n      return _this;\n    };\n\n    var getLZWRaster = function(lzwMinCodeSize) {\n\n      var clearCode = 1 << lzwMinCodeSize;\n      var endCode = (1 << lzwMinCodeSize) + 1;\n      var bitLength = lzwMinCodeSize + 1;\n\n      // Setup LZWTable\n      var table = lzwTable();\n\n      for (var i = 0; i < clearCode; i += 1) {\n        table.add(String.fromCharCode(i) );\n      }\n      table.add(String.fromCharCode(clearCode) );\n      table.add(String.fromCharCode(endCode) );\n\n      var byteOut = byteArrayOutputStream();\n      var bitOut = bitOutputStream(byteOut);\n\n      // clear code\n      bitOut.write(clearCode, bitLength);\n\n      var dataIndex = 0;\n\n      var s = String.fromCharCode(_data[dataIndex]);\n      dataIndex += 1;\n\n      while (dataIndex < _data.length) {\n\n        var c = String.fromCharCode(_data[dataIndex]);\n        dataIndex += 1;\n\n        if (table.contains(s + c) ) {\n\n          s = s + c;\n\n        } else {\n\n          bitOut.write(table.indexOf(s), bitLength);\n\n          if (table.size() < 0xfff) {\n\n            if (table.size() == (1 << bitLength) ) {\n              bitLength += 1;\n            }\n\n            table.add(s + c);\n          }\n\n          s = c;\n        }\n      }\n\n      bitOut.write(table.indexOf(s), bitLength);\n\n      // end code\n      bitOut.write(endCode, bitLength);\n\n      bitOut.flush();\n\n      return byteOut.toByteArray();\n    };\n\n    var lzwTable = function() {\n\n      var _map = {};\n      var _size = 0;\n\n      var _this = {};\n\n      _this.add = function(key) {\n        if (_this.contains(key) ) {\n          throw 'dup key:' + key;\n        }\n        _map[key] = _size;\n        _size += 1;\n      };\n\n      _this.size = function() {\n        return _size;\n      };\n\n      _this.indexOf = function(key) {\n        return _map[key];\n      };\n\n      _this.contains = function(key) {\n        return typeof _map[key] != 'undefined';\n      };\n\n      return _this;\n    };\n\n    return _this;\n  };\n\n  var createDataURL = function(width, height, getPixel) {\n    var gif = gifImage(width, height);\n    for (var y = 0; y < height; y += 1) {\n      for (var x = 0; x < width; x += 1) {\n        gif.setPixel(x, y, getPixel(x, y) );\n      }\n    }\n\n    var b = byteArrayOutputStream();\n    gif.write(b);\n\n    var base64 = base64EncodeOutputStream();\n    var bytes = b.toByteArray();\n    for (var i = 0; i < bytes.length; i += 1) {\n      base64.writeByte(bytes[i]);\n    }\n    base64.flush();\n\n    return 'data:image/gif;base64,' + base64;\n  };\n\n  //---------------------------------------------------------------------\n  // returns qrcode function.\n\n  return qrcode;\n}();\n\n// multibyte support\n!function() {\n\n  qrcode.stringToBytesFuncs['UTF-8'] = function(s) {\n    // http://stackoverflow.com/questions/18729405/how-to-convert-utf8-string-to-byte-array\n    function toUTF8Array(str) {\n      var utf8 = [];\n      for (var i=0; i < str.length; i++) {\n        var charcode = str.charCodeAt(i);\n        if (charcode < 0x80) utf8.push(charcode);\n        else if (charcode < 0x800) {\n          utf8.push(0xc0 | (charcode >> 6),\n              0x80 | (charcode & 0x3f));\n        }\n        else if (charcode < 0xd800 || charcode >= 0xe000) {\n          utf8.push(0xe0 | (charcode >> 12),\n              0x80 | ((charcode>>6) & 0x3f),\n              0x80 | (charcode & 0x3f));\n        }\n        // surrogate pair\n        else {\n          i++;\n          // UTF-16 encodes 0x10000-0x10FFFF by\n          // subtracting 0x10000 and splitting the\n          // 20 bits of 0x0-0xFFFFF into two halves\n          charcode = 0x10000 + (((charcode & 0x3ff)<<10)\n            | (str.charCodeAt(i) & 0x3ff));\n          utf8.push(0xf0 | (charcode >>18),\n              0x80 | ((charcode>>12) & 0x3f),\n              0x80 | ((charcode>>6) & 0x3f),\n              0x80 | (charcode & 0x3f));\n        }\n      }\n      return utf8;\n    }\n    return toUTF8Array(s);\n  };\n\n}();\n\n(function (factory) {\n  if (typeof define === 'function' && define.amd) {\n      define([], factory);\n  } else if (typeof exports === 'object') {\n      module.exports = factory();\n  }\n}(function () {\n    return qrcode;\n}));\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.QRCode = void 0;\nvar isEqual = require(\"lodash.isequal\");\nvar qrGenerator = require(\"qrcode-generator\");\nvar React = require(\"react\");\nvar QRCode = /** @class */ (function (_super) {\n    __extends(QRCode, _super);\n    function QRCode(props) {\n        var _this = _super.call(this, props) || this;\n        _this.canvasRef = React.createRef();\n        return _this;\n    }\n    QRCode.prototype.download = function (fileType, fileName) {\n        if (this.canvasRef.current) {\n            var mimeType = void 0;\n            switch (fileType) {\n                case 'jpg':\n                    mimeType = 'image/jpeg';\n                    break;\n                case 'webp':\n                    mimeType = 'image/webp';\n                    break;\n                case 'png':\n                default:\n                    mimeType = 'image/png';\n                    break;\n            }\n            var url = this.canvasRef.current.toDataURL(mimeType, 1.0);\n            var link = document.createElement('a');\n            link.download = fileName !== null && fileName !== void 0 ? fileName : 'react-qrcode-logo';\n            link.href = url;\n            link.click();\n        }\n    };\n    QRCode.prototype.utf16to8 = function (str) {\n        var out = '', i, c;\n        var len = str.length;\n        for (i = 0; i < len; i++) {\n            c = str.charCodeAt(i);\n            if ((c >= 0x0001) && (c <= 0x007F)) {\n                out += str.charAt(i);\n            }\n            else if (c > 0x07FF) {\n                out += String.fromCharCode(0xE0 | ((c >> 12) & 0x0F));\n                out += String.fromCharCode(0x80 | ((c >> 6) & 0x3F));\n                out += String.fromCharCode(0x80 | ((c >> 0) & 0x3F));\n            }\n            else {\n                out += String.fromCharCode(0xC0 | ((c >> 6) & 0x1F));\n                out += String.fromCharCode(0x80 | ((c >> 0) & 0x3F));\n            }\n        }\n        return out;\n    };\n    /**\n     * Draw a rounded square in the canvas\n     */\n    QRCode.prototype.drawRoundedSquare = function (lineWidth, x, y, size, color, radii, fill, ctx) {\n        ctx.lineWidth = lineWidth;\n        ctx.fillStyle = color;\n        ctx.strokeStyle = color;\n        // Adjust coordinates so that the outside of the stroke is aligned to the edges\n        y += lineWidth / 2;\n        x += lineWidth / 2;\n        size -= lineWidth;\n        if (!Array.isArray(radii)) {\n            radii = [radii, radii, radii, radii];\n        }\n        // Radius should not be greater than half the size or less than zero\n        radii = radii.map(function (r) {\n            r = Math.min(r, size / 2);\n            return (r < 0) ? 0 : r;\n        });\n        var rTopLeft = radii[0] || 0;\n        var rTopRight = radii[1] || 0;\n        var rBottomRight = radii[2] || 0;\n        var rBottomLeft = radii[3] || 0;\n        ctx.beginPath();\n        ctx.moveTo(x + rTopLeft, y);\n        ctx.lineTo(x + size - rTopRight, y);\n        if (rTopRight)\n            ctx.quadraticCurveTo(x + size, y, x + size, y + rTopRight);\n        ctx.lineTo(x + size, y + size - rBottomRight);\n        if (rBottomRight)\n            ctx.quadraticCurveTo(x + size, y + size, x + size - rBottomRight, y + size);\n        ctx.lineTo(x + rBottomLeft, y + size);\n        if (rBottomLeft)\n            ctx.quadraticCurveTo(x, y + size, x, y + size - rBottomLeft);\n        ctx.lineTo(x, y + rTopLeft);\n        if (rTopLeft)\n            ctx.quadraticCurveTo(x, y, x + rTopLeft, y);\n        ctx.closePath();\n        ctx.stroke();\n        if (fill) {\n            ctx.fill();\n        }\n    };\n    /**\n     * Draw a single positional pattern eye.\n     */\n    QRCode.prototype.drawPositioningPattern = function (ctx, cellSize, offset, row, col, color, radii) {\n        if (radii === void 0) { radii = [0, 0, 0, 0]; }\n        var lineWidth = Math.ceil(cellSize);\n        var radiiOuter;\n        var radiiInner;\n        if (typeof radii !== 'number' && !Array.isArray(radii)) {\n            radiiOuter = radii.outer || 0;\n            radiiInner = radii.inner || 0;\n        }\n        else {\n            radiiOuter = radii;\n            radiiInner = radiiOuter;\n        }\n        var colorOuter;\n        var colorInner;\n        if (typeof color !== 'string') {\n            colorOuter = color.outer;\n            colorInner = color.inner;\n        }\n        else {\n            colorOuter = color;\n            colorInner = color;\n        }\n        var y = (row * cellSize) + offset;\n        var x = (col * cellSize) + offset;\n        var size = cellSize * 7;\n        // Outer box\n        this.drawRoundedSquare(lineWidth, x, y, size, colorOuter, radiiOuter, false, ctx);\n        // Inner box\n        size = cellSize * 3;\n        y += cellSize * 2;\n        x += cellSize * 2;\n        this.drawRoundedSquare(lineWidth, x, y, size, colorInner, radiiInner, true, ctx);\n    };\n    ;\n    /**\n     * Is this dot inside a positional pattern zone.\n     */\n    QRCode.prototype.isInPositioninZone = function (col, row, zones) {\n        return zones.some(function (zone) { return (row >= zone.row && row <= zone.row + 7 &&\n            col >= zone.col && col <= zone.col + 7); });\n    };\n    QRCode.prototype.transformPixelLengthIntoNumberOfCells = function (pixelLength, cellSize) {\n        return pixelLength / cellSize;\n    };\n    QRCode.prototype.isCoordinateInImage = function (col, row, dWidthLogo, dHeightLogo, dxLogo, dyLogo, cellSize, logoImage) {\n        if (logoImage) {\n            var numberOfCellsMargin = 2;\n            var firstRowOfLogo = this.transformPixelLengthIntoNumberOfCells(dxLogo, cellSize);\n            var firstColumnOfLogo = this.transformPixelLengthIntoNumberOfCells(dyLogo, cellSize);\n            var logoWidthInCells = this.transformPixelLengthIntoNumberOfCells(dWidthLogo, cellSize) - 1;\n            var logoHeightInCells = this.transformPixelLengthIntoNumberOfCells(dHeightLogo, cellSize) - 1;\n            return row >= firstRowOfLogo - numberOfCellsMargin && row <= firstRowOfLogo + logoWidthInCells + numberOfCellsMargin // check rows\n                && col >= firstColumnOfLogo - numberOfCellsMargin && col <= firstColumnOfLogo + logoHeightInCells + numberOfCellsMargin; // check cols\n        }\n        else {\n            return false;\n        }\n    };\n    QRCode.prototype.shouldComponentUpdate = function (nextProps) {\n        return !isEqual(this.props, nextProps);\n    };\n    QRCode.prototype.componentDidMount = function () {\n        this.update();\n    };\n    QRCode.prototype.componentDidUpdate = function () {\n        this.update();\n    };\n    QRCode.prototype.update = function () {\n        var _a;\n        var _b = this.props, value = _b.value, ecLevel = _b.ecLevel, enableCORS = _b.enableCORS, bgColor = _b.bgColor, fgColor = _b.fgColor, logoImage = _b.logoImage, logoOpacity = _b.logoOpacity, logoOnLoad = _b.logoOnLoad, removeQrCodeBehindLogo = _b.removeQrCodeBehindLogo, qrStyle = _b.qrStyle, eyeRadius = _b.eyeRadius, eyeColor = _b.eyeColor, logoPaddingStyle = _b.logoPaddingStyle;\n        // just make sure that these params are passed as numbers\n        var size = +this.props.size;\n        var quietZone = +this.props.quietZone;\n        var logoWidth = this.props.logoWidth ? +this.props.logoWidth : 0;\n        var logoHeight = this.props.logoHeight ? +this.props.logoHeight : 0;\n        var logoPadding = this.props.logoPadding ? +this.props.logoPadding : 0;\n        var qrCode = qrGenerator(0, ecLevel);\n        qrCode.addData(this.utf16to8(value));\n        qrCode.make();\n        var canvas = (_a = this.canvasRef) === null || _a === void 0 ? void 0 : _a.current;\n        var ctx = canvas.getContext('2d');\n        var canvasSize = size + (2 * quietZone);\n        var length = qrCode.getModuleCount();\n        var cellSize = size / length;\n        var scale = (window.devicePixelRatio || 1);\n        canvas.height = canvas.width = canvasSize * scale;\n        ctx.scale(scale, scale);\n        ctx.fillStyle = bgColor;\n        ctx.fillRect(0, 0, canvasSize, canvasSize);\n        var offset = quietZone;\n        var positioningZones = [\n            { row: 0, col: 0 },\n            { row: 0, col: length - 7 },\n            { row: length - 7, col: 0 },\n        ];\n        ctx.strokeStyle = fgColor;\n        if (qrStyle === 'dots') {\n            ctx.fillStyle = fgColor;\n            var radius = cellSize / 2;\n            for (var row = 0; row < length; row++) {\n                for (var col = 0; col < length; col++) {\n                    if (qrCode.isDark(row, col) && !this.isInPositioninZone(row, col, positioningZones)) {\n                        ctx.beginPath();\n                        ctx.arc(Math.round(col * cellSize) + radius + offset, Math.round(row * cellSize) + radius + offset, (radius / 100) * 75, 0, 2 * Math.PI, false);\n                        ctx.closePath();\n                        ctx.fill();\n                    }\n                }\n            }\n        }\n        else if (qrStyle === 'fluid') {\n            var radius = Math.ceil(cellSize / 2);\n            for (var row = 0; row < length; row++) {\n                for (var col = 0; col < length; col++) {\n                    if (qrCode.isDark(row, col) && !this.isInPositioninZone(row, col, positioningZones)) {\n                        var roundedCorners = [false, false, false, false]; // top-left, top-right, bottom-right, bottom-left\n                        if ((row > 0 && !qrCode.isDark(row - 1, col)) && (col > 0 && !qrCode.isDark(row, col - 1)))\n                            roundedCorners[0] = true;\n                        if ((row > 0 && !qrCode.isDark(row - 1, col)) && (col < length - 1 && !qrCode.isDark(row, col + 1)))\n                            roundedCorners[1] = true;\n                        if ((row < length - 1 && !qrCode.isDark(row + 1, col)) && (col < length - 1 && !qrCode.isDark(row, col + 1)))\n                            roundedCorners[2] = true;\n                        if ((row < length - 1 && !qrCode.isDark(row + 1, col)) && (col > 0 && !qrCode.isDark(row, col - 1)))\n                            roundedCorners[3] = true;\n                        var w = (Math.ceil((col + 1) * cellSize) - Math.floor(col * cellSize));\n                        var h = (Math.ceil((row + 1) * cellSize) - Math.floor(row * cellSize));\n                        ctx.fillStyle = fgColor;\n                        ctx.beginPath();\n                        ctx.arc(Math.round(col * cellSize) + radius + offset, Math.round(row * cellSize) + radius + offset, radius, 0, 2 * Math.PI, false);\n                        ctx.closePath();\n                        ctx.fill();\n                        if (!roundedCorners[0])\n                            ctx.fillRect(Math.round(col * cellSize) + offset, Math.round(row * cellSize) + offset, w / 2, h / 2);\n                        if (!roundedCorners[1])\n                            ctx.fillRect(Math.round(col * cellSize) + offset + Math.floor(w / 2), Math.round(row * cellSize) + offset, w / 2, h / 2);\n                        if (!roundedCorners[2])\n                            ctx.fillRect(Math.round(col * cellSize) + offset + Math.floor(w / 2), Math.round(row * cellSize) + offset + Math.floor(h / 2), w / 2, h / 2);\n                        if (!roundedCorners[3])\n                            ctx.fillRect(Math.round(col * cellSize) + offset, Math.round(row * cellSize) + offset + Math.floor(h / 2), w / 2, h / 2);\n                    }\n                }\n            }\n        }\n        else {\n            for (var row = 0; row < length; row++) {\n                for (var col = 0; col < length; col++) {\n                    if (qrCode.isDark(row, col) && !this.isInPositioninZone(row, col, positioningZones)) {\n                        ctx.fillStyle = fgColor;\n                        var w = (Math.ceil((col + 1) * cellSize) - Math.floor(col * cellSize));\n                        var h = (Math.ceil((row + 1) * cellSize) - Math.floor(row * cellSize));\n                        ctx.fillRect(Math.round(col * cellSize) + offset, Math.round(row * cellSize) + offset, w, h);\n                    }\n                }\n            }\n        }\n        // Draw positioning patterns\n        for (var i = 0; i < 3; i++) {\n            var _c = positioningZones[i], row = _c.row, col = _c.col;\n            var radii = eyeRadius;\n            var color = void 0;\n            if (Array.isArray(radii)) {\n                radii = radii[i];\n            }\n            if (typeof radii == 'number') {\n                radii = [radii, radii, radii, radii];\n            }\n            if (!eyeColor) { // if not specified, eye color is the same as foreground, \n                color = fgColor;\n            }\n            else {\n                if (Array.isArray(eyeColor)) { // if array, we pass the single color\n                    color = eyeColor[i];\n                }\n                else {\n                    color = eyeColor;\n                }\n            }\n            this.drawPositioningPattern(ctx, cellSize, offset, row, col, color, radii);\n        }\n        if (logoImage) {\n            var image_1 = new Image();\n            if (enableCORS) {\n                image_1.crossOrigin = 'Anonymous';\n            }\n            image_1.onload = function (e) {\n                ctx.save();\n                var dWidthLogo = logoWidth || size * 0.2;\n                var dHeightLogo = logoHeight || dWidthLogo;\n                var dxLogo = ((size - dWidthLogo) / 2);\n                var dyLogo = ((size - dHeightLogo) / 2);\n                if (removeQrCodeBehindLogo || logoPadding) {\n                    ctx.beginPath();\n                    ctx.strokeStyle = bgColor;\n                    ctx.fillStyle = bgColor;\n                    var dWidthLogoPadding = dWidthLogo + (2 * logoPadding);\n                    var dHeightLogoPadding = dHeightLogo + (2 * logoPadding);\n                    var dxLogoPadding = dxLogo + offset - logoPadding;\n                    var dyLogoPadding = dyLogo + offset - logoPadding;\n                    if (logoPaddingStyle === 'circle') {\n                        var dxCenterLogoPadding = dxLogoPadding + (dWidthLogoPadding / 2);\n                        var dyCenterLogoPadding = dyLogoPadding + (dHeightLogoPadding / 2);\n                        ctx.ellipse(dxCenterLogoPadding, dyCenterLogoPadding, dWidthLogoPadding / 2, dHeightLogoPadding / 2, 0, 0, 2 * Math.PI);\n                        ctx.stroke();\n                        ctx.fill();\n                    }\n                    else {\n                        ctx.fillRect(dxLogoPadding, dyLogoPadding, dWidthLogoPadding, dHeightLogoPadding);\n                    }\n                }\n                ctx.globalAlpha = logoOpacity;\n                ctx.drawImage(image_1, dxLogo + offset, dyLogo + offset, dWidthLogo, dHeightLogo);\n                ctx.restore();\n                if (logoOnLoad) {\n                    logoOnLoad(e);\n                }\n            };\n            image_1.src = logoImage;\n        }\n    };\n    QRCode.prototype.render = function () {\n        var _a;\n        var qrSize = +this.props.size + (2 * +this.props.quietZone);\n        return React.createElement(\"canvas\", { id: (_a = this.props.id) !== null && _a !== void 0 ? _a : 'react-qrcode-logo', height: qrSize, width: qrSize, style: __assign({ height: qrSize + 'px', width: qrSize + 'px' }, this.props.style), ref: this.canvasRef });\n    };\n    QRCode.defaultProps = {\n        value: 'https://reactjs.org/',\n        ecLevel: 'M',\n        enableCORS: false,\n        size: 150,\n        quietZone: 10,\n        bgColor: '#FFFFFF',\n        fgColor: '#000000',\n        logoOpacity: 1,\n        qrStyle: 'squares',\n        eyeRadius: [0, 0, 0],\n        logoPaddingStyle: 'square'\n    };\n    return QRCode;\n}(React.Component));\nexports.QRCode = QRCode;\n"],"names":["uuid","counter","concat","Math","random","toString","slice","toArray","arrayLike","arr","i","l","length","push","px","node","styleProperty","val","ownerDocument","defaultView","window","getComputedStyle","getPropertyValue","parseFloat","replace","getImageSize","targetNode","options","arguments","undefined","width","leftBorder","rightBorder","clientWidth","getNodeWidth","height","topBorder","bottomBorder","clientHeight","getNodeHeight","canvasDimensionLimit","createImage","url","Promise","resolve","reject","img","Image","decode","onload","onerror","crossOrigin","decoding","src","async","nodeToDataURL","xmlns","svg","document","createElementNS","foreignObject","setAttribute","appendChild","then","XMLSerializer","serializeToString","encodeURIComponent","html","svgToDataURL","isInstanceOfElement","instance","nodePrototype","Object","getPrototypeOf","constructor","name","getPseudoElementStyle","className","pseudo","style","selector","cssText","content","formatCSSText","map","value","priority","getPropertyPriority","join","formatCSSProperties","createTextNode","clonePseudoElement","nativeNode","clonedNode","err","styleElement","createElement","WOFF","JPEG","mimes","woff","woff2","ttf","eot","png","jpg","jpeg","gif","tiff","webp","getMimeType","extension","match","exec","getExtension","toLowerCase","isDataUrl","search","makeDataUrl","mimeType","fetchAsDataURL","init","process","res","fetch","status","Error","blob","reader","FileReader","onloadend","result","error","readAsDataURL","cache","resourceToDataURL","resourceUrl","contentType","cacheKey","includeQueryParams","key","test","getCacheKey","dataURL","cacheBust","Date","getTime","fetchRequestInit","_ref","headers","get","split","getContentFromDataUrl","imagePlaceholder","msg","message","console","warn","cloneSingleNode","HTMLCanvasElement","canvas","toDataURL","cloneNode","cloneCanvasElement","HTMLVideoElement","video","currentSrc","ctx","getContext","drawImage","poster","cloneVideoElement","HTMLIFrameElement","iframe","_a","contentDocument","body","_b","cloneIFrameElement","isSlotElement","tagName","toUpperCase","decorate","Element","targetStyle","sourceStyle","transformOrigin","forEach","endsWith","reducedFont","floor","substring","getAttribute","setProperty","cloneCSSStyle","clonePseudoElements","HTMLTextAreaElement","innerHTML","HTMLInputElement","cloneInputValue","HTMLSelectElement","clonedSelect","selectedOption","Array","from","children","find","child","cloneSelectValue","isRoot","filter","assignedNodes","childNodes","shadowRoot","reduce","deferred","clonedChild","cloneChildren","clone","uses","querySelectorAll","processedDefs","id","exist","querySelector","definition","nodes","values","ns","position","overflow","display","defs","ensureSVGSymbols","URL_REGEX","URL_WITH_FORMAT_REGEX","FONT_SRC_REGEX","embed","resourceURL","baseURL","getContentFromUrl","resolvedURL","baseUrl","location","protocol","doc","implementation","createHTMLDocument","base","a","head","href","resolveUrl","escaped","RegExp","toRegex","shouldEmbed","embedResources","filteredCSSText","str","preferredFontFormat","format","filterPreferredFontFormat","urls","raw","quotation","parseURLs","css","embedProp","propName","propValue","cssString","embedImages","embedBackground","isImageElement","HTMLImageElement","SVGImageElement","baseVal","image","loading","srcset","embedImageNode","deferreds","all","embedChildren","cssFetchCache","fetchCSS","text","embedFonts","data","regexUrl","loadFonts","loc","startsWith","URL","parseCSS","source","keyframesRegex","matches","importRegex","unifiedRegex","lastIndex","parseWebFontRules","styleSheets","cssRules","ret","sheet","item","index","type","CSSRule","IMPORT_RULE","importIndex","metadata","rule","insertRule","catch","e","inline","getCSSRules","FONT_FACE_RULE","getWebFontRules","embedWebFonts","fontEmbedCSS","skipFonts","rules","parentStyleSheet","getWebFontCSS","styleNode","sytleContent","firstChild","insertBefore","toSvg","backgroundColor","manual","keys","applyStyle","toCanvas","context","ratio","pixelRatio","FINAL_PROCESS","env","devicePixelRatio","parseInt","Number","isNaN","getPixelRatio","canvasWidth","canvasHeight","skipAutoScale","checkCanvasDimensions","fillStyle","fillRect","toPng","HASH_UNDEFINED","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","MAX_SAFE_INTEGER","argsTag","arrayTag","asyncTag","boolTag","dateTag","errorTag","funcTag","genTag","mapTag","numberTag","nullTag","objectTag","promiseTag","proxyTag","regexpTag","setTag","stringTag","symbolTag","undefinedTag","weakMapTag","arrayBufferTag","dataViewTag","reIsHostCtor","reIsUint","typedArrayTags","freeGlobal","global","freeSelf","self","root","Function","freeExports","exports","nodeType","freeModule","module","moduleExports","freeProcess","nodeUtil","binding","nodeIsTypedArray","isTypedArray","arraySome","array","predicate","mapToArray","size","setToArray","set","func","transform","arrayProto","prototype","funcProto","objectProto","coreJsData","funcToString","hasOwnProperty","maskSrcKey","uid","IE_PROTO","nativeObjectToString","reIsNative","call","Buffer","Symbol","Uint8Array","propertyIsEnumerable","splice","symToStringTag","toStringTag","nativeGetSymbols","getOwnPropertySymbols","nativeIsBuffer","isBuffer","nativeKeys","arg","DataView","getNative","Map","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","Hash","entries","this","clear","entry","ListCache","MapCache","SetCache","__data__","add","Stack","arrayLikeKeys","inherited","isArr","isArray","isArg","isArguments","isBuff","isType","skipIndexes","n","iteratee","baseTimes","String","isIndex","assocIndexOf","eq","baseGetTag","isOwn","tag","unmasked","getRawTag","objectToString","baseIsArguments","isObjectLike","baseIsEqual","other","bitmask","customizer","stack","object","equalFunc","objIsArr","othIsArr","objTag","getTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","byteLength","byteOffset","buffer","convert","isPartial","stacked","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","getAllKeys","objLength","othProps","othLength","skipCtor","objValue","othValue","compared","objCtor","othCtor","equalObjects","baseIsEqualDeep","baseIsNative","isObject","isMasked","isFunction","baseKeys","Ctor","proto","isPrototype","arrLength","seen","arrValue","othIndex","has","keysFunc","symbolsFunc","offset","arrayPush","baseGetAllKeys","getSymbols","getMapData","isKeyable","getValue","pop","pairs","LARGE_ARRAY_SIZE","resIndex","arrayFilter","symbol","ArrayBuffer","ctorString","isLength","baseUnary","qrcode","typeNumber","errorCorrectionLevel","_typeNumber","_errorCorrectionLevel","QRErrorCorrectionLevel","_modules","_moduleCount","_dataCache","_dataList","_this","makeImpl","maskPattern","moduleCount","modules","row","col","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","r","c","pos","QRUtil","getPatternPosition","j","bits","getBCHTypeNumber","mod","getBCHTypeInfo","inc","bitIndex","byteIndex","maskFunc","getMaskFunction","dark","dataList","rsBlocks","QRRSBlock","getRSBlocks","qrBitBuffer","put","getMode","getLength","getLengthInBits","write","totalDataCount","dataCount","putBit","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","totalCount","max","getBuffer","rsPoly","getErrorCorrectPolynomial","modPoly","qrPolynomial","modIndex","getAt","totalCodeCount","createBytes","addData","mode","newData","qrNumber","qrAlphaNum","qr8BitByte","qrKanji","isDark","getModuleCount","make","minLostPoint","pattern","lostPoint","getLostPoint","getBestMaskPattern","createTableTag","cellSize","margin","qrHtml","createSvgTag","alt","title","opts","mr","rect","qrSvg","scalable","escapeXml","trim","createDataURL","min","x","y","createImgTag","s","charAt","createASCII","r1","r2","p","blocks","blocksLastLineNoMargin","ascii","_createHalfASCII","white","black","line","renderTo2dContext","stringToBytes","stringToBytesFuncs","bytes","charCodeAt","createStringToBytes","unicodeData","numChars","unicodeMap","bin","base64DecodeInputStream","read","b","count","b0","b1","v","fromCharCode","unknownChar","QRMode","L","M","Q","H","QRMaskPattern","PATTERN_POSITION_TABLE","G15","G18","getBCHDigit","digit","d","errorCorrectLength","multiply","QRMath","gexp","sameCount","darkCount","abs","EXP_TABLE","LOG_TABLE","num","shift","_num","glog","RS_BLOCK_TABLE","qrRSBlock","rsBlock","getRsBlockTable","list","_buffer","_length","bufIndex","bit","_mode","_data","strToNum","chatToNum","getCode","_bytes","code","byteArrayOutputStream","writeByte","off","len","_str","_pos","_buflen","getPixel","_width","_height","pixel","out","writeString","writeShort","raster","getLZWRaster","writeBytes","lzwMinCodeSize","clearCode","endCode","bitLength","table","lzwTable","byteOut","bitOut","_out","_bitLength","_bitBuffer","bitOutputStream","dataIndex","contains","indexOf","flush","toByteArray","_map","_size","gifImage","setPixel","base64","_base64","writeEncoded","encode","padlen","base64EncodeOutputStream","utf8","charcode","toUTF8Array","define","__extends","extendStatics","setPrototypeOf","__proto__","TypeError","__","create","__assign","assign","t","apply","defineProperty","QRCode","isEqual","require","qrGenerator","React","_super","props","canvasRef","createRef","download","fileType","fileName","current","link","click","utf16to8","drawRoundedSquare","lineWidth","color","radii","fill","strokeStyle","rTopLeft","rTopRight","rBottomRight","rBottomLeft","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","stroke","drawPositioningPattern","radiiOuter","radiiInner","colorOuter","colorInner","ceil","outer","inner","isInPositioninZone","zones","some","zone","transformPixelLengthIntoNumberOfCells","pixelLength","isCoordinateInImage","dWidthLogo","dHeightLogo","dxLogo","dyLogo","logoImage","firstRowOfLogo","firstColumnOfLogo","logoWidthInCells","logoHeightInCells","shouldComponentUpdate","nextProps","componentDidMount","update","componentDidUpdate","ecLevel","enableCORS","bgColor","fgColor","logoOpacity","logoOnLoad","removeQrCodeBehindLogo","qrStyle","eyeRadius","eyeColor","logoPaddingStyle","quietZone","logoWidth","logoHeight","logoPadding","qrCode","canvasSize","scale","positioningZones","radius","arc","round","PI","roundedCorners","w","h","_c","image_1","save","dWidthLogoPadding","dHeightLogoPadding","dxLogoPadding","dyLogoPadding","dxCenterLogoPadding","dyCenterLogoPadding","ellipse","globalAlpha","restore","render","qrSize","ref","defaultProps","Component"],"sourceRoot":""}