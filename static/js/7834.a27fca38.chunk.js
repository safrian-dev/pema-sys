"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[7834],{24944:(e,t,s)=>{s.d(t,{Z:()=>n});s(72791);var l=s(80184);const n=e=>{let{data:t,color:s}=e;return(0,l.jsx)("div",{className:"flex-wrapper",children:(0,l.jsx)("div",{className:"single-chart",children:(0,l.jsxs)("svg",{viewBox:"0 0 36 36",className:"circular-chart ".concat(100===t?"green":100!==t?"blue":s),children:[(0,l.jsx)("path",{className:"circle-bg",d:"M18 2.0845\r a 15.9155 15.9155 0 0 1 0 31.831\r a 15.9155 15.9155 0 0 1 0 -31.831"}),(0,l.jsx)("path",{className:"circle",strokeDasharray:"".concat(t,", 100"),d:"M18 2.0845\r a 15.9155 15.9155 0 0 1 0 31.831\r a 15.9155 15.9155 0 0 1 0 -31.831"}),100===t?(0,l.jsx)("text",{x:"18",y:"22.35",className:"percentage",style:{fontSize:"14px"},children:"\u2714"}):(0,l.jsxs)("text",{x:"18",y:"22.35",className:"percentage",children:[t,"%"]})]})})})}},87535:(e,t,s)=>{s.d(t,{Z:()=>l});const l=e=>{const t=new Date(e);return"".concat(t.getDate()," ").concat(["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Aug","Sep","Oct","Nov","Des"][t.getMonth()]," ").concat(t.getFullYear())}},77904:(e,t,s)=>{s.d(t,{Z:()=>l});const l=e=>{const t=new Date;return((new Date(e)-t)/864e5).toFixed()<1}},33267:(e,t,s)=>{s.r(t),s.d(t,{default:()=>T});var l=s(63009),n=s(39773),i=s(17834),a=s(72791),d=s(76807),r=s(11087),c=s(43464),o=s(49037),x=s(14448),u=s(8118),m=s(19127),j=s(48089),h=s(24944),v=s(87681),g=s(87535),p=s(77904),f=s(80184);const y=()=>{var e,t,s;const{auth:y}=(0,i.Z)(),[N,b]=(0,a.useState)([]),[Z,k]=(0,a.useState)([]),[_,w]=(0,a.useState)(),[S,D]=(0,a.useState)([]),F=(0,j.Z)(),{isLoading:z,error:O,data:T}=(0,d.a)({queryKey:["projectsdash"],queryFn:()=>{var e;return F.get("".concat(null!==y&&void 0!==y&&null!==(e=y.user)&&void 0!==e&&e.roles.includes("Director")?"api/project":"api/project/".concat(null===y||void 0===y?void 0:y.user.employe_id,"/list?for=dashboard"))).then((e=>(b(e.data.divisions),w("all"),e.data.data)))}});(0,a.useEffect)((()=>{var e,t;if(null!==y&&void 0!==y&&null!==(e=y.user)&&void 0!==e&&null!==(t=e.roles)&&void 0!==t&&t.includes("Director"))if("all"===_){const e=[],t=null===T||void 0===T?void 0:T.filter((e=>e.total_progress>10));for(let s=0;s<t.length;s++)s<10&&e.push(t[s]);k(e.reverse())}else k(null===T||void 0===T?void 0:T.filter((e=>e.division.toString()===_)));else{const e=[];for(let t=0;t<(null===T||void 0===T?void 0:T.length);t++)t<10&&e.push(T[t]);k(e)}}),[_,T]);(0,a.useEffect)((()=>{var e;const t=()=>{const e=[];for(let t=0;t<(null===Z||void 0===Z?void 0:Z.length);t++)e.push(Z[t].project_id);return e};(null===(e=t())||void 0===e?void 0:e.length)>0&&(async e=>{await F.post("api/project/progress/collection",{ids:e}).then((e=>{D(e.data.data)})).catch((e=>console.log(e)))})(t())}),[Z]);const M=e=>{var t,s,l;const n=null===S||void 0===S?void 0:S.filter((t=>t.project_id===e));return 0!==(null===(t=n[0])||void 0===t?void 0:t.progress)?null===(s=n[0])||void 0===s||null===(l=s.progress)||void 0===l?void 0:l.toFixed():0};return(0,f.jsx)(l.Z,{children:(0,f.jsx)(n.Z,{lg:"12",children:(0,f.jsx)(c.Z,{className:"rounded-3",children:(0,f.jsxs)(o.Z,{className:"d-flex flex-column gap-2",style:{minHeight:"130px"},children:[(0,f.jsxs)(l.Z,{lg:"d-flex justify-content-between",children:[(0,f.jsx)(n.Z,{sm:"12",md:"6",lg:"3",children:(0,f.jsxs)(x.Z,{tag:"h4",children:["Projects ",null!==y&&void 0!==y&&null!==(e=y.user)&&void 0!==e&&null!==(t=e.roles)&&void 0!==t&&t.includes("Director")?"Inprogress":""," "]})}),(0,f.jsxs)(n.Z,{sm:"12",md:"6",lg:"5",className:"d-flex gap-2 align-items-end justify-content-end",children:[null!==y&&void 0!==y&&null!==(s=y.user)&&void 0!==s&&s.roles.includes("Director")?(0,f.jsx)("div",{className:"w-75",children:(0,f.jsxs)(u.Z,{type:"select",bsSize:"sm",onChange:e=>w(e.target.value),value:_,children:[(0,f.jsx)("option",{value:"all",children:"All Division"}),null===N||void 0===N?void 0:N.map((e=>(0,f.jsxs)("option",{value:e.organization_id,children:[e.organization_name," "]},e.organization_id)))]})}):"",(0,f.jsx)("div",{className:"w-25",children:(0,f.jsx)(r.rU,{to:"projects",style:{textDecoration:"none"},children:(0,f.jsxs)(m.Z,{type:"button",size:"sm",outline:!0,color:"info",className:"rounded-2",block:!0,children:[" ","See all"]})})})]})]}),z?"Loading...":O?"Something went wrong.":(0,f.jsx)(f.Fragment,{children:(null===Z||void 0===Z?void 0:Z.length)>0?null===Z||void 0===Z?void 0:Z.map(((e,t)=>{var s,i;return(0,f.jsx)(r.rU,{className:"d-flex justify-content-between rounded-3 px-2 py-2 align-items-center link-item text-dark bg-light",to:"projects/details/".concat(e.project_id),style:{textDecoration:"none"},children:(0,f.jsx)(n.Z,{lg:"12",children:(0,f.jsxs)(l.Z,{lg:"12",style:{paddingRight:"5px"},children:[(0,f.jsx)(n.Z,{lg:"6",children:(0,f.jsx)("table",{children:(0,f.jsx)("tbody",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{minWidth:"30px",textAlign:"left"},children:(0,f.jsx)("span",{className:"text-muted",style:{marginLeft:"12px"},children:t+1})}),(0,f.jsx)("td",{children:(0,f.jsxs)("abbr",{title:e.project_name,style:{textDecoration:"none"},children:[(0,f.jsx)("span",{className:"fw-bold",style:{fontSize:"13px"},children:e.project_name}),(0,f.jsx)("div",{children:(0,f.jsx)("span",{className:"badge text-primary bg-light-primary rounded-pill d-inline-block",children:(0,f.jsx)("small",{className:"fw-bold",children:e.organization_name})})})]})})]})})})}),(0,f.jsx)(n.Z,{xs:"12",sm:"12",lg:"5",children:(0,f.jsxs)(l.Z,{lg:"12",className:"my-auto h-100 ",children:[(0,f.jsxs)(n.Z,{xs:"4",sm:"4",lg:"4",className:"my-auto ",content:"center",children:[(0,f.jsx)("div",{style:{marginBottom:"-7px"},children:(0,f.jsxs)("small",{className:"text-muted",style:{fontSize:"12px"},children:["Deadline"," "]})}),(0,f.jsx)("small",{className:"".concat((0,p.Z)(null===(s=e.current_stage)||void 0===s?void 0:s.end_date)?"text-danger":""),children:(0,g.Z)(null===(i=e.current_stage)||void 0===i?void 0:i.end_date)})]}),(0,f.jsx)(n.Z,{xs:"4",sm:"4",lg:"4",className:"d-flex align-items-center",children:(0,f.jsx)("span",{className:"badge text-info bg-light-info rounded-pill d-inline-block fw-bold",style:{textTransform:"capitalize"},children:e.category})}),(0,f.jsx)(n.Z,{xs:"4",sm:"4",lg:"4",className:"d-flex align-items-center justify-content-end",children:(0,f.jsx)("div",{className:"d-flex gap-1 justify-content-center align-items-center",children:(0,f.jsx)("div",{className:"circular-progress",children:(0,f.jsx)(h.Z,{data:M(e.project_id)?parseInt(M(e.project_id),10):0})})})})]})}),(0,f.jsx)(n.Z,{lg:"1",className:"my-auto d-flex justify-content-start px-2",children:(0,f.jsx)("div",{className:"p-2",children:(0,f.jsx)("img",{src:v,className:"rounded-circle",alt:"avatar",width:"40",height:"40"})})})]})})},e.project_id)})):(0,f.jsx)("div",{className:"d-flex justify-content-center",children:(0,f.jsx)("p",{className:"text-muted",children:"No data yet."})})})]})})})})};var N=s(19623);const b=()=>{const{auth:e}=(0,i.Z)(),t=(0,j.Z)(),{isLoading:s,data:a}=(0,d.a)({queryKey:["totaldata"],queryFn:()=>t.get("api/project/".concat(null===e||void 0===e?void 0:e.user.employe_id,"/total-data")).then((e=>e.data.data))});return(0,f.jsxs)(l.Z,{children:[(0,f.jsx)(n.Z,{sm:"6",lg:"3",children:(0,f.jsx)(N.Z,{bg:"primary",icon:"wallet2",title:null===a||void 0===a?void 0:a.total_project,subtitle:"Total Project",loading:s})}),(0,f.jsx)(n.Z,{sm:"6",lg:"3",children:(0,f.jsx)(N.Z,{bg:"info",icon:"list-task",title:null===a||void 0===a?void 0:a.total_task,subtitle:"Total Task",loading:s})}),(0,f.jsx)(n.Z,{sm:"6",lg:"3",children:(0,f.jsx)(N.Z,{bg:"warning",icon:"clock-history",title:null===a||void 0===a?void 0:a.total_inprogress,subtitle:"Task In Progress",loading:s})}),(0,f.jsx)(n.Z,{sm:"6",lg:"3",children:(0,f.jsx)(N.Z,{bg:"success",icon:"check-circle",title:null===a||void 0===a?void 0:a.total_done,subtitle:"Task Done",loading:s})})]})};var Z=s(4828),k=s(57689),_=s(30690),w=s.n(_),S=s(31043),D=s(74458);const F=e=>{let{title:t,type:s}=e;const{auth:l}=(0,i.Z)(),[n,u]=(0,a.useState)(),[m,v]=(0,a.useState)(void 0),[y,N]=(0,a.useState)(),[b,_]=(0,a.useState)(!1),[F,z]=(0,a.useState)(),[O,T]=(0,a.useState)(!1),M=(0,j.Z)(),{isLoading:q,error:I,data:L,refetch:A}=(0,d.a)({queryKey:["tasklist-".concat(s)],queryFn:()=>{var e;return M.get("".concat(null!==l&&void 0!==l&&null!==(e=l.user)&&void 0!==e&&e.roles.includes("Director")?"api/task/director/dashboard/list?type=".concat(s):"api/task/".concat(null===l||void 0===l?void 0:l.user.employe_id,"/recent/activity"))).then((e=>e.data.data))}}),C=e=>{var t,s;null!==l&&void 0!==l&&null!==(t=l.user)&&void 0!==t&&t.roles.includes("director")?(s=e,_(!0),v(s)):(T(!0),z(e.project_id))};return O?(0,f.jsx)(k.Fg,{to:"projects/details/".concat(F)}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.Z,{className:"rounded-3",children:(0,f.jsxs)(o.Z,{className:"d-flex flex-column gap-1",style:{minHeight:"".concat("recent"===s?"130px":"400px")},children:[(0,f.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,f.jsx)(x.Z,{tag:"h4",children:t}),"inprogress"===s&&(0,f.jsx)(r.rU,{to:"director/inprogress-task",style:{textDecoration:"none"},children:"See all"})]}),(0,f.jsx)("div",{className:"d-flex flex-column gap-2 justify-content-center",children:q?"Loading...":I?"Something went wrong.":(null===L||void 0===L?void 0:L.length)>0?L.map(((e,t)=>{var i,a,d;return(0,f.jsxs)("div",{className:"d-flex justify-content-between gap-1",children:[(0,f.jsxs)("div",{className:"d-flex col-sm-".concat("marked"===s?"11":"12 w-100"," justify-content-between align-items-center p-2 rounded-3 link-item-bordered"),style:{border:"1px dashed #21C1D6"},children:[(0,f.jsxs)(r.rU,{type:"button",className:"d-flex gap-2 col-md-".concat("done"===s?"12":"10"," align-items-center text-muted"),style:{fontSize:"13px",textDecoration:"none"},onClick:()=>C(e),children:[(0,f.jsx)("span",{children:t+1}),(0,f.jsxs)("div",{className:"d-flex flex-column col-md-12",children:[(0,f.jsx)("div",{className:"d-flex",children:(0,f.jsx)("span",{className:"text-dark",children:"marked"===s?(null===e||void 0===e?void 0:e.task_title.trim().length)>35?"".concat(null===e||void 0===e||null===(i=e.task_title)||void 0===i?void 0:i.substring(0,35),"..."):null===e||void 0===e?void 0:e.task_title:"done"===s?(null===e||void 0===e?void 0:e.task_title.trim().length)>53?"".concat(null===e||void 0===e||null===(a=e.task_title)||void 0===a?void 0:a.substring(0,53),"..."):null===e||void 0===e?void 0:e.task_title:(null===e||void 0===e?void 0:e.task_title.trim().length)>40?"".concat(null===e||void 0===e||null===(d=e.task_title)||void 0===d?void 0:d.substring(0,40),"..."):null===e||void 0===e?void 0:e.task_title})}),(0,f.jsxs)("div",{className:"d-flex align-items-end gap-3",children:[(0,f.jsx)("span",{className:"badge text-primary bg-light-primary rounded-pill d-inline-block",children:0===e.status?"To do":1===e.status?"In progress":2===e.status?"Review":3===e.status?"Approved":"Revision"}),(0,f.jsxs)("div",{className:"d-flex gap-1",children:[(0,f.jsx)("span",{style:{fontSize:"12px"},className:"text-muted",children:"Deadline:"}),(0,f.jsx)("span",{style:{fontSize:"12px"},className:"".concat((0,p.Z)(null===e||void 0===e?void 0:e.end_date)?"text-danger":"text-muted"),children:(0,g.Z)(null===e||void 0===e?void 0:e.end_date)})]})]})]})]}),"done"!==s&&(0,f.jsx)("div",{children:(0,f.jsx)("div",{className:"d-flex gap-1 justify-content-center align-items-center",children:(0,f.jsx)("div",{className:"circular-progress",children:(0,f.jsx)(h.Z,{data:parseInt(e.task_progress.toFixed(),10),color:"red"})})})})]}),"marked"===s&&(null===l||void 0===l?void 0:l.user.roles.includes("Director"))&&(y&&n===(null===e||void 0===e?void 0:e.task_id)?(0,f.jsx)("div",{className:"d-flex align-items-center",children:(0,f.jsx)(Z.Z,{size:"sm",color:"warning"})}):(0,f.jsx)("abbr",{title:"Mark task",style:{textDecoration:"none"},className:"d-flex align-items-center",children:(0,f.jsx)("button",{type:"button",className:"fav-btn",onClick:()=>(async e=>{u(e),N(!0),await M.post("api/task/".concat(null===l||void 0===l?void 0:l.user.employe_id,"/").concat(e,"/favorite")).then((e=>{A(),(0,S.Z)("success",e.data.message)})).catch((()=>{(0,S.Z)("error","Bad request.")})),u(),N(!1)})(null===e||void 0===e?void 0:e.task_id),children:(0,f.jsx)(w(),{icon:"star",className:"is_favorite"})})}))]},e.task_id)})):(0,f.jsx)("div",{className:"d-flex justify-content-center",children:(0,f.jsx)("p",{className:"text-muted",children:"No data yet."})})})]})}),b&&(0,f.jsx)(D.Z,{modal:b,setModal:_,toggle:()=>{_(!b)},task:m,mode:"activities"})]})},z=()=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(b,{}),(0,f.jsxs)(l.Z,{children:[(0,f.jsx)(n.Z,{lg:"12",children:(0,f.jsx)(y,{})}),(0,f.jsx)(n.Z,{lg:"4",children:(0,f.jsx)(F,{title:"Need Review",type:"done"})}),(0,f.jsx)(n.Z,{lg:"4",children:(0,f.jsx)(F,{title:"Inprogress Tasks",type:"inprogress"})}),(0,f.jsx)(n.Z,{lg:"4",children:(0,f.jsx)(F,{title:"Marked Tasks",type:"marked"})})]})]}),O=()=>{const e=(0,j.Z)(),{isLoading:t,error:s,data:l}=(0,d.a)({queryKey:["additional-tasks"],queryFn:()=>e.get("api/task/employe/additional/list").then((e=>e.data.data))});return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(c.Z,{className:"rounded-3",children:(0,f.jsxs)(o.Z,{className:"d-flex flex-column gap-1",children:[(0,f.jsx)("div",{className:"d-flex justify-content-between",children:(0,f.jsx)(x.Z,{tag:"h4",children:"Additional Tasks"})}),(0,f.jsx)("div",{className:"d-flex flex-column gap-2 justify-content-center",children:t?"Loading...":s?"Something went wrong.":(null===l||void 0===l?void 0:l.length)>0?l.map(((e,t)=>{var s;return(0,f.jsx)("div",{className:"d-flex justify-content-between gap-1",children:(0,f.jsxs)("div",{className:"d-flex w-100 justify-content-between align-items-center p-2 rounded-3 link-item-bordered bg-white",style:{border:"1px dashed #FFB22B"},children:[(0,f.jsx)("abbr",{title:null===e||void 0===e?void 0:e.task_title,style:{textDecoration:"none",width:"100%"},children:(0,f.jsxs)(r.rU,{to:"/projects/details/".concat(null===e||void 0===e?void 0:e.project_id),className:"d-flex gap-2 col-md-12 align-items-center text-muted",style:{fontSize:"13px",textDecoration:"none"},children:[(0,f.jsx)("span",{children:t+1}),(0,f.jsxs)("div",{className:"d-flex flex-column col-md-12",children:[(0,f.jsx)("div",{className:"d-flex",children:(0,f.jsx)("span",{className:"text-dark",children:(null===e||void 0===e?void 0:e.task_title.trim().length)>40?"".concat(null===e||void 0===e||null===(s=e.task_title)||void 0===s?void 0:s.substring(0,40),"..."):null===e||void 0===e?void 0:e.task_title})}),(0,f.jsxs)("div",{className:"d-flex align-items-end gap-3",children:[(0,f.jsx)("span",{className:"badge text-primary bg-light-primary rounded-pill d-inline-block",children:0===e.status?"To do":1===e.status?"In progress":2===e.status?"Review":3===e.status?"Approved":"Revision"}),(0,f.jsxs)("span",{style:{fontSize:"12px"},className:"text-muted",children:["Deadline: ",null===e||void 0===e?void 0:e.end_date]})]})]})]})}),(0,f.jsx)("div",{children:(0,f.jsx)("div",{className:"d-flex gap-1 justify-content-center align-items-center",children:(0,f.jsx)("div",{className:"circular-progress",children:(0,f.jsx)(h.Z,{data:parseInt(e.task_progress.toFixed(),10),color:"red"})})})})]})},e.task_id)})):(0,f.jsx)("div",{className:"d-flex justify-content-center",children:(0,f.jsx)("p",{className:"text-muted",children:"No data yet."})})})]})})})},T=()=>{const{auth:e}=(0,i.Z)();return e.user.roles.includes("Director")?(0,f.jsx)(z,{}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(b,{}),(0,f.jsxs)(l.Z,{children:[(0,f.jsx)(n.Z,{lg:"8",children:(0,f.jsx)(y,{})}),(0,f.jsxs)(n.Z,{lg:"4",children:[(0,f.jsx)(F,{title:"Recent Tasks",type:"recent"}),(0,f.jsx)(O,{})]})]})]})}},19623:(e,t,s)=>{s.d(t,{Z:()=>d});var l=s(43464),n=s(49037),i=s(80971),a=s(80184);const d=e=>{let{bg:t,icon:s,title:d,subtitle:r,loading:c}=e;return(0,a.jsx)(l.Z,{className:"rounded-3",children:(0,a.jsx)(n.Z,{children:(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)("span",{className:"circle-box md-box text-dark-white bg-".concat(t),children:(0,a.jsx)("i",{className:"fs-2 bi bi-".concat(s)})}),(0,a.jsxs)("div",{className:"ms-3",children:[(0,a.jsx)("h2",{className:"mb-1 fw-normal",children:c?"...":d}),(0,a.jsx)(i.Z,{className:"fs-6 text-muted",children:r})]})]})})})}},80971:(e,t,s)=>{s.d(t,{Z:()=>j});var l=s(72791),n=s(52007),i=s.n(n),a=s(81694),d=s.n(a),r=s(9622),c=["className","cssModule","tag"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e},o.apply(this,arguments)}function x(e,t){if(null==e)return{};var s,l,n=function(e,t){if(null==e)return{};var s,l,n={},i=Object.keys(e);for(l=0;l<i.length;l++)s=i[l],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)s=i[l],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}var u={className:i().string,cssModule:i().object,tag:r.iC};function m(e){var t=e.className,s=e.cssModule,n=e.tag,i=void 0===n?"div":n,a=x(e,c),u=(0,r.mx)(d()(t,"card-subtitle"),s);return l.createElement(i,o({},a,{className:u}))}m.propTypes=u;const j=m}}]);
//# sourceMappingURL=7834.a27fca38.chunk.js.map