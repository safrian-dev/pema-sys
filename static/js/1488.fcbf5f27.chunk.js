"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[1488],{31043:(e,n,s)=>{s.d(n,{F:()=>l,Z:()=>i});s(72791);var t=s(65218),a=s(80184);const l=()=>(0,a.jsx)(t.x7,{toastOptions:{className:"",style:{}}}),i=(e,n)=>{((e,n)=>{"success"===e?t.ZP.success(n):"create"===e?(0,t.ZP)(n,{icon:"\ud83e\udd17"}):"start"===e?(0,t.ZP)("Lets get started, cheer up!",{icon:"\ud83d\udcaa"}):"done"===e?(0,t.ZP)("Horeee, task done!",{icon:"\ud83d\udc4f"}):t.ZP.error(n)})(e,n)}},81488:(e,n,s)=>{s.r(n),s.d(n,{default:()=>z});var t=s(72791),a=s(76807),l=s(43464),i=s(49037),d=s(19127),r=s(48089),c=s(39773),o=s(25853),h=s(63009),u=s(42976),x=s(8118),j=s(46724),p=s(55211),m=s(94938),g=s(73830),b=s(4828),Z=s(69399),v=s(76167),f=s(55472),k=s(11087),_=s(30690),y=s.n(_),S=s(90838),w=s(23606),N=s(31043),P=s(37493),C=s(80184);const D=e=>{let{tender:n,action:s}=e;const[a,_]=(0,t.useState)(!1),[D,z]=(0,t.useState)(!1),[F,T]=(0,t.useState)(!1),[B,I]=(0,t.useState)([]),[O,U]=(0,t.useState)([]),[A,M]=(0,t.useState)(!1),[L,E]=(0,t.useState)(!1),[K,J]=(0,t.useState)(),[R,H]=(0,t.useState)([]),[Y,q]=(0,t.useState)([]),[V,W]=(0,t.useState)(),[G,Q]=(0,t.useState)(!1),[X,$]=(0,t.useState)([]),[ee,ne]=(0,t.useState)(),[se,te]=(0,t.useState)(!1),[ae,le]=(0,t.useState)(),[ie,de]=(0,t.useState)(!1),[re,ce]=(0,t.useState)(),[oe,he]=(0,t.useState)(!1),[ue,xe]=(0,t.useState)(!1),[je,pe]=(0,t.useState)(),[me,ge]=(0,t.useState)(),[be,Ze]=(0,t.useState)(!1),ve=(0,r.Z)(),fe=()=>{_(!a)},ke=()=>{z(!D)},_e=async()=>{T(!0),await ve.get("dapi/vendor/tender/".concat(n.id_tender)).then((e=>{console.log("RESS",e),I(e.data.data.perusahaan_yang_ikut)})).catch((e=>console.log(e))),T(!1)};(0,t.useEffect)((()=>{const e=null===B||void 0===B?void 0:B.filter((e=>"register"!==e.status)),s=null===B||void 0===B?void 0:B.filter((e=>"lulus_tahap_1"===e.status||"pemenang"===e.status)),t=null===B||void 0===B?void 0:B.filter((e=>"pemenang"===e.status));U(e),H(s),W(e),$("pasca kualifikasi"===n.sistem_kualifikasi?e:s),le(t)}),[B]);const ye=async(e,s)=>{ce(s),de(!0);const t=await(0,P.Z)(e).then((e=>e.split(",")[1])).catch((e=>console.log(e)));await ve.post("dapi/vendor/tender/ba/".concat(n.id_tender),{base64:t,key:s}).then((()=>{(0,N.Z)("success","Berita Acara Penetapan Berhasil didupload"),_e()})).catch((()=>(0,N.Z)("error","Something went wrong"))),ce(),de(!1)};return(0,C.jsxs)(c.Z,{title:"Collapse",children:[A?(0,C.jsx)(d.Z,{type:"button",color:"primary",outline:!0,size:"sm",onClick:(()=>M(!A)).bind(null),style:{marginBottom:"1rem"},children:"Close"}):(0,C.jsx)(d.Z,{type:"button",color:"primary",outline:!0,size:"sm",onClick:async()=>{M(!0),_e()},style:{marginBottom:"1rem"},children:"Details"}),(0,C.jsx)(o.Z,{isOpen:A,children:(0,C.jsx)(l.Z,{className:"border rounded-3",style:{fontSize:"14px"},children:F?(0,C.jsx)("div",{className:"d-flex justify-content-center py-4",children:"Loading.."}):(0,C.jsxs)(i.Z,{children:[(0,C.jsxs)(h.Z,{children:[(0,C.jsxs)(c.Z,{md:"6",children:[(0,C.jsx)("table",{width:"100%",children:(0,C.jsxs)("tbody",{children:[(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:"Lokasi Pengerjaan"}),(0,C.jsx)("td",{children:":"}),(0,C.jsx)("td",{children:n.lokasi})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:"Waktu Pendaftaran"}),(0,C.jsx)("td",{children:":"}),(0,C.jsxs)("td",{children:[n.tgl_pendaftaran," s/d ",n.batas_pendaftaran]})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:"Jenis Pengadaan"}),(0,C.jsx)("td",{children:":"}),(0,C.jsx)("td",{style:{textTransform:"capitalize"},children:n.jenis_pengadaan})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:"HPS"}),(0,C.jsx)("td",{children:":"}),(0,C.jsx)("td",{children:(0,w.Z)(n.hps)})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:"Nomor KBLI"}),(0,C.jsx)("td",{children:":"}),(0,C.jsx)("td",{children:(0,C.jsx)("div",{className:"d-flex gap 1",children:Array.isArray(JSON.parse(n.kbli))?JSON.parse(n.kbli).map(((e,s)=>(0,C.jsxs)("span",{children:[e," ",s+1===JSON.parse(n.kbli).length?"":"|"," \xa0"]},e))):"null"})})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:"Sistem Kualifikasi"}),(0,C.jsx)("td",{children:":"}),(0,C.jsx)("td",{style:{textTransform:"capitalize"},children:n.sistem_kualifikasi})]})]})}),(0,C.jsx)(c.Z,{className:"mt-3",children:(0,C.jsxs)("table",{className:"w-100",children:[(0,C.jsx)("thead",{children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{children:"Perusahaan Yang Mendaftar"}),(0,C.jsx)("th",{children:"Tanggal Mendaftar"})]})}),(0,C.jsxs)("tbody",{children:[(null===B||void 0===B?void 0:B.length)>0?null===B||void 0===B?void 0:B.map(((e,n)=>(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:(0,C.jsxs)("div",{className:"d-flex gap-2",children:[(0,C.jsxs)("span",{children:[n+1,"."]}),e.detail.bentuk_usaha," ",e.detail.nama_perusahaan]})}),(0,C.jsx)("td",{children:(0,S.Z)(e.detail.created_at)})]},e.id_peserta))):(0,C.jsx)("tr",{children:(0,C.jsx)("td",{colSpan:"2",children:"No data."})}),(0,C.jsx)("tr",{children:(0,C.jsx)("td",{colSpan:"2",children:"\xa0"})})]}),"pasca kualifikasi"===n.sistem_kualifikasi&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("thead",{children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{children:"Perusahaan Yang Input Dokumen"}),(0,C.jsx)("th",{children:"Dokumen Penawaran"})]})}),(0,C.jsx)("tbody",{children:(null===O||void 0===O?void 0:O.length)>0?null===O||void 0===O?void 0:O.map(((e,n)=>(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:(0,C.jsxs)("div",{className:"d-flex gap-2",children:[(0,C.jsxs)("span",{children:[n+1,"."]}),e.detail.bentuk_usaha," ",e.detail.nama_perusahaan]})}),(0,C.jsx)("td",{children:(0,C.jsx)(k.rU,{to:"",children:"Download"})})]},e.id_peserta))):(0,C.jsx)("tr",{children:(0,C.jsx)("td",{colSpan:"2",children:"No data."})})})]})]})})]}),(0,C.jsx)(c.Z,{md:"6",children:(0,C.jsxs)("table",{className:"w-100",children:["pra kualifikasi"===n.sistem_kualifikasi&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("thead",{children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{children:"Tahap I"}),(0,C.jsx)("th",{children:"Dokumen Penawaran"})]})}),(0,C.jsxs)("tbody",{children:[(null===O||void 0===O?void 0:O.length)>0?null===O||void 0===O?void 0:O.map(((e,n)=>(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:(0,C.jsxs)("div",{className:"d-flex gap-2",children:[(0,C.jsxs)("span",{children:[n+1,"."]}),e.detail.bentuk_usaha," ",e.detail.nama_perusahaan]})}),(0,C.jsx)("td",{children:(0,C.jsx)(k.rU,{to:"",children:"Download"})})]},e.id_peserta)}))):(0,C.jsx)("tr",{children:(0,C.jsx)("td",{colSpan:"2",children:"No data."})}),(0,C.jsx)("tr",{children:(0,C.jsx)("td",{colSpan:"2",children:"\xa0"})})]}),(0,C.jsx)("thead",{children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{children:"Tahap II"}),(0,C.jsx)("th",{children:"Dokumen Penawaran"})]})}),(0,C.jsxs)("tbody",{children:[(null===R||void 0===R?void 0:R.length)>0?null===R||void 0===R?void 0:R.map(((e,s)=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:(0,C.jsxs)("div",{className:"d-flex gap-2",children:[(0,C.jsxs)("span",{children:[s+1,"."]}),e.detail.bentuk_usaha," ",e.detail.nama_perusahaan]})}),(0,C.jsx)("td",{children:(0,C.jsx)(k.rU,{to:"",children:"Download"})})]},e.id_peserta),s+1===(null===O||void 0===O?void 0:O.length)&&(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"fw-bold",children:"Berita Acara"}),null!==(null===n||void 0===n?void 0:n.upload_ba_seleksi)?(0,C.jsx)("td",{children:(0,C.jsx)(k.rU,{children:"Download"})}):(0,C.jsx)("td",{children:ie&&"upload_ba_seleksi"===re?"Uploding..":(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(u.Z,{htmlFor:"uploadBaSeleksi".concat(n.id_tender),className:"btn btn-outline-info btn-sm outline",children:"Upload Berita Acara"}),(0,C.jsx)(x.Z,{hidden:!0,id:"uploadBaSeleksi".concat(n.id_tender),type:"file",onChange:e=>{ye(e.target.files[0],"upload_ba_seleksi")}})]})})]})]}))):(0,C.jsx)("tr",{children:(0,C.jsx)("td",{children:(0,C.jsx)(d.Z,{type:"button",size:"sm",color:"info",onClick:fe.bind(null),children:"Pilih Peserta"})})}),(0,C.jsx)("tr",{children:(0,C.jsx)("td",{colSpan:"2",children:"\xa0"})})]}),(0,C.jsxs)(j.Z,{isOpen:a,toggle:fe.bind(null),centered:!0,size:"lg",children:[(0,C.jsx)(p.Z,{toggle:fe.bind(null),children:"Pilih Peserta Tahap II"}),(0,C.jsx)(m.Z,{children:0===(null===V||void 0===V?void 0:V.length)?(0,C.jsx)("div",{className:"text-center",children:"Belum ada perusahaan yang submit dokumen."}):(0,C.jsx)(f.ZP,{closeMenuOnSelect:!0,options:V,onChange:e=>q(e),isMulti:!0})}),(0,C.jsx)(g.Z,{children:0===(null===V||void 0===V?void 0:V.length)?(0,C.jsx)(d.Z,{color:"secondary",size:"sm",outline:!0,onClick:fe.bind(null),children:"Tutup"}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.Z,{color:"primary",onClick:async()=>{Q(!0);const e=[];Y.map((n=>e.push(n.value))),await ve.post("dapi/vendor/tender/tahapdua/".concat(n.id_tender),{list_peserta:e}).then((()=>{_e(),(0,N.Z)("success","Peserta Tahap II berhasil dipilih")})).catch((()=>{(0,N.Z)("error","Something went wrong")})),_(!1),Q(!1)},disabled:G,children:G?"Menyimpan..":"Simpan"}),(0,C.jsx)(d.Z,{color:"secondary",onClick:fe.bind(null),children:"Cancel"})]})})]})]}),(0,C.jsx)("thead",{children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{children:"Penetapan Pemenang"}),(0,C.jsx)("th",{children:"Dokumen Penetapan"})]})}),(0,C.jsx)("tbody",{children:(null===ae||void 0===ae?void 0:ae.length)>0?(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("tr",{children:[(0,C.jsxs)("td",{children:[ae[0].detail.bentuk_usaha," ",ae[0].detail.nama_perusahaan]}),null!==(null===n||void 0===n?void 0:n.upload_ba_pemenang)?(0,C.jsx)("td",{children:(0,C.jsx)(k.rU,{children:"Download"})}):(0,C.jsx)("td",{children:ie&&"upload_ba_pemenang"===re?"Uploding..":(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(u.Z,{htmlFor:"uploadBa".concat(n.id_tender),className:"btn btn-outline-info btn-sm outline",children:"Upload Penetapan"}),(0,C.jsx)(x.Z,{hidden:!0,id:"uploadBa".concat(n.id_tender),type:"file",onChange:e=>{ye(e.target.files[0],"upload_ba_pemenang")}})]})})]})}):(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:(0,C.jsx)(d.Z,{type:"button",size:"sm",color:"info",onClick:ke.bind(null),children:"Piih Pemenang"})}),(0,C.jsx)("td",{children:(0,C.jsx)(d.Z,{type:"button",size:"sm",color:"info",outline:!0,disabled:!0,children:"Upload Penetapan"})})]})})}),(0,C.jsxs)(j.Z,{isOpen:D,toggle:ke.bind(null),centered:!0,size:"lg",children:[(0,C.jsx)(p.Z,{toggle:ke.bind(null),children:"Pilih Pemenang"}),(0,C.jsx)(m.Z,{children:0===(null===X||void 0===X?void 0:X.length)?(0,C.jsx)("div",{className:"text-center",children:"Belum ada list kandidat pemenang."}):(0,C.jsx)(f.ZP,{closeMenuOnSelect:!0,options:X,onChange:e=>ne(e)})}),(0,C.jsx)(g.Z,{children:0===(null===O||void 0===O?void 0:O.length)?(0,C.jsx)(d.Z,{color:"secondary",size:"sm",outline:!0,onClick:ke.bind(null),children:"Tutup"}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.Z,{color:"primary",onClick:async()=>{te(!0),await ve.post("dapi/vendor/tender/pemenang/".concat(n.id_tender),{list_peserta:ee.value}).then((()=>{(0,N.Z)("success","Pemenang Tender telah ditetapkan"),_e()})).catch((()=>(0,N.Z)("error","Something went wrong"))),z(!1),te(!1)},disabled:se,children:se?"Menyimpan..":"Simpan"}),(0,C.jsx)(d.Z,{color:"secondary",onClick:ke.bind(null),children:"Cancel"})]})})]})]})})]}),(0,C.jsx)("div",{className:"d-flex justify-content-end",children:(0,C.jsxs)("div",{className:"d-flex gap-3",children:[(0,C.jsx)("abbr",{title:"Edit Status",children:(0,C.jsx)(d.Z,{type:"button",size:"sm",color:"primary",onClick:()=>xe(!0),children:"Edit Status"})}),(0,C.jsx)("abbr",{title:"Hapus Tender",children:(0,C.jsx)(d.Z,{type:"button",size:"sm",color:"danger",outline:!0,onClick:()=>{var e;e=n.id_tender,he(!oe),J(e)},children:L&&K===n.id_tender?"Deleting..":(0,C.jsx)(y(),{icon:"delete",style:{fontSize:"14px"}})})})]})}),(0,C.jsxs)(j.Z,{isOpen:oe,centered:!0,onAnimationStart:!1,children:[(0,C.jsx)(p.Z,{children:"Konfirmasi"}),(0,C.jsx)(m.Z,{children:(0,C.jsx)("div",{className:"d-flex flex-row gap-2",children:"Apakah Anda yakin akan menghapus data pengadaan ini?"})}),(0,C.jsxs)(g.Z,{children:[L?(0,C.jsx)(d.Z,{type:"button",color:"success",disabled:!0,children:(0,C.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,C.jsx)(b.Z,{size:"sm"}),"Deleting.."]})}):(0,C.jsx)(d.Z,{type:"button",color:"danger",onClick:()=>(async e=>{E(!0),await ve.post("dapi/vendor/tender/delete/".concat(e)).then((()=>{(0,N.Z)("success","Tender berhasil dihapus"),s()})).catch((()=>(0,N.Z)("error","Something went wrong"))),E(!1)})(n.id_tender),disabled:L,size:"sm",children:"Ya"}),(0,C.jsx)(d.Z,{color:"secondary",size:"sm",outline:!0,onClick:()=>he(!1),children:"Batal"})]})]}),(0,C.jsxs)(j.Z,{isOpen:ue,centered:!0,children:[(0,C.jsx)(p.Z,{children:"Status Tender"}),(0,C.jsxs)(Z.Z,{onSubmit:async e=>{e.preventDefault(),Ze(!0);const t={status_tender:null===je||void 0===je?void 0:je.status_tender,file_document:null===me||void 0===me?void 0:me.status_dokumen};await ve.post("dapi/vendor/tender/status-update/".concat(n.id_tender),t,{headers:{"Content-Type":"multipart/form-data"}}).then((()=>{s(),xe(!1),Ze(!1),(0,N.Z)("success","Tender status updated successfully")})).catch((()=>{xe(!1),Ze(!1),(0,N.Z)("error","Action failed.")}))},children:[(0,C.jsxs)(m.Z,{children:[(0,C.jsxs)(v.Z,{children:[(0,C.jsx)(u.Z,{for:"status_tender",children:"Status"}),(0,C.jsxs)(x.Z,{type:"select",id:"status_tender",name:"status_tender",onChange:e=>(e=>{pe((n=>({...n,[e.target.id]:e.target.value})))})(e),defaultValue:null===n||void 0===n?void 0:n.status_tender,children:[(0,C.jsx)("option",{value:"buka",children:"Buka"}),(0,C.jsx)("option",{value:"tutup",children:"Tutup"}),(0,C.jsx)("option",{value:"batal",children:"Batal"})]})]}),(0,C.jsxs)(v.Z,{children:[(0,C.jsx)(u.Z,{for:"status_dokumen",children:"Upload Dokumen"}),(0,C.jsx)(x.Z,{type:"file",id:"status_dokumen",name:"status_dokumen",accept:"application/pdf",onChange:e=>(e=>{ge((n=>({...n,[e.target.id]:e.target.files[0]})))})(e)}),(0,C.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,C.jsx)("small",{className:"text-muted",children:"File format .pdf (max. 10mb)"}),(0,C.jsx)("small",{className:"text-muted",children:(0,C.jsx)("i",{children:"Opsional"})})]})]})]}),(0,C.jsxs)(g.Z,{children:[(0,C.jsx)(d.Z,{type:"submit",color:"primary",size:"sm",disabled:be,children:be?"Menyimpan..":"Submit"}),(0,C.jsx)(d.Z,{color:"secondary",size:"sm",outline:!0,onClick:()=>xe(!1),children:"Batal"})]})]})]})]})})})]})},z=()=>{const e=(0,r.Z)(),{data:n,refetch:s}=(0,a.a)({queryKey:["cat"],queryFn:()=>e.get("dapi/vendor/tender").then((e=>e.data.data))});return(0,C.jsx)(C.Fragment,{children:null===n||void 0===n?void 0:n.reverse().map((e=>(0,C.jsx)(l.Z,{className:"mb-2 rounded-3",children:(0,C.jsxs)(i.Z,{children:[(0,C.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,C.jsxs)("div",{className:"d-flex flex-column",children:[(0,C.jsx)("strong",{children:e.nama_tender}),(0,C.jsxs)("div",{className:"d-flex gap-2",children:[(0,C.jsxs)("small",{children:[" ","Sistem Kualifikasi: ",(0,C.jsx)("span",{className:"fw-bold",children:e.sistem_kualifikasi})]})," ","|",(0,C.jsxs)("small",{children:[" ","Metode: ",(0,C.jsx)("span",{className:"fw-bold",children:e.metode_pengadaan})]})," ","|",(0,C.jsxs)("small",{children:[" ","Status: ",(0,C.jsx)("span",{className:"fw-bold",children:e.status_tender})]})]})]}),(0,C.jsx)("div",{children:(0,C.jsx)(d.Z,{href:"vendor/update-tender/".concat(e.id_tender),color:"primary",size:"sm",children:"Edit Tender"})})]}),(0,C.jsx)(D,{tender:e,action:s})]})},e.id_tender)))})}},90838:(e,n,s)=>{s.d(n,{Z:()=>t});const t=e=>{if(e){const n=new Date,s=new Date(e),t=s.toDateString()===n.toDateString()?"Today":s.toDateString(),a=s.toLocaleString().split(",")[1];return"".concat(t,", ").concat(a.split(":")[0],":").concat(a.split(":")[1]," ").concat(a.split(" ")[2]||"")}return e}},37493:(e,n,s)=>{s.d(n,{Z:()=>t});const t=e=>new Promise((n=>{let s="";const t=new FileReader;t.readAsDataURL(e),t.onload=()=>{s=t.result,n(s)}}))},23606:(e,n,s)=>{s.d(n,{Z:()=>t});const t=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e)}}]);
//# sourceMappingURL=1488.fcbf5f27.chunk.js.map