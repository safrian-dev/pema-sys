(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[633],{14097:(e,s,t)=>{"use strict";t.d(s,{Z:()=>d});var l=t(72791),i=t(46272),a=t(80184);const n=i.mM.create({body:{paddingTop:35,paddingBottom:65,paddingHorizontal:35},title:{fontSize:10,textAlign:"center"},text:{margin:10,fontSize:10,textAlign:"justify"},image:{marginVertical:4,marginHorizontal:15,width:50,height:50},header:{fontSize:10,marginBottom:5,textAlign:"left",color:"#3f3f3f",fontWeight:"bold"},pageNumber:{position:"absolute",fontSize:10,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},printAt:{position:"absolute",fontSize:8,bottom:30,left:35,right:0,textAlign:"left",color:"grey"},table:{display:"table",width:"auto",borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0,color:"#3f3f3f"},tableRow:{margin:"auto",flexDirection:"row"},tableCol:{borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCell:{marginTop:3,marginBottom:3,marginLeft:3,marginRight:3,fontSize:10}}),r=()=>{const e=new Date;return"".concat(e.toDateString(),", ").concat(e.toLocaleString().split(",")[1])},d=e=>{let{projectTitle:s,data:t}=e;return(0,a.jsx)(i.BB,{children:(0,a.jsxs)(i.T3,{style:{...n.body,backgroundColor:"#fff"},children:[(0,a.jsxs)(i.xv,{style:n.header,fixed:!0,children:["Project : ",null===s||void 0===s?void 0:s.project_name]}),(0,a.jsxs)(i.xv,{style:n.header,fixed:!0,children:["Partner : ",null===s||void 0===s?void 0:s.partner]}),(0,a.jsxs)(i.xv,{style:n.header,fixed:!0,children:["Division : ",null===s||void 0===s?void 0:s.division]}),(0,a.jsxs)(i.xv,{style:n.header,fixed:!0,children:["Phase : ",null===s||void 0===s?void 0:s.phase]}),(0,a.jsxs)(i.xv,{style:n.header,fixed:!0,children:["Schema : ","jo"===(null===s||void 0===s?void 0:s.schema)?"Join Operational":"Join Venture"]}),(0,a.jsxs)(i.G7,{style:n.table,children:[(0,a.jsxs)(i.G7,{style:n.tableRow,children:[(0,a.jsx)(i.G7,{style:{...n.tableCol,width:"5%"},children:(0,a.jsx)(i.xv,{style:n.tableCell,children:"No."})}),(0,a.jsx)(i.G7,{style:{...n.tableCol,width:"35%"},children:(0,a.jsx)(i.xv,{style:n.tableCell,children:"Task Title"})}),(0,a.jsx)(i.G7,{style:{...n.tableCol,width:"15%"},children:(0,a.jsx)(i.xv,{style:n.tableCell,children:"Status"})}),(0,a.jsx)(i.G7,{style:{...n.tableCol,width:"15%"},children:(0,a.jsx)(i.xv,{style:n.tableCell,children:"Deadline"})}),(0,a.jsx)(i.G7,{style:{...n.tableCol,width:"30%"},children:(0,a.jsx)(i.xv,{style:n.tableCell,children:"PIC"})})]}),null===t||void 0===t?void 0:t.map(((e,s)=>(0,a.jsxs)(l.Fragment,{children:[(0,a.jsxs)(i.G7,{style:n.tableRow,children:[(0,a.jsx)(i.G7,{style:{...n.tableCol,width:"5%"},children:(0,a.jsx)(i.xv,{style:{...n.tableCell,textAlign:"center"},children:s+1})}),(0,a.jsx)(i.G7,{style:{...n.tableCol,width:"35%"},children:(0,a.jsx)(i.xv,{style:n.tableCell,children:e.task_title})}),(0,a.jsx)(i.G7,{style:{...n.tableCol,width:"15%"},children:(0,a.jsx)(i.xv,{style:{...n.tableCell,fontSize:"10px"},children:0===e.status?"To do":1===e.status?"In progress":2===e.status?"Under review":3===e.status?"Approved":"Revision"})}),(0,a.jsx)(i.G7,{style:{...n.tableCol,width:"15%"},children:(0,a.jsx)(i.xv,{style:n.tableCell,children:e.end_date})}),(0,a.jsx)(i.G7,{style:{...n.tableCol,width:"30%"},children:e.pics.map((e=>(0,a.jsx)(i.xv,{style:n.tableCell,children:e.first_name},e.id)))})]}),e.subtasks.map((e=>(0,a.jsxs)(i.G7,{style:n.tableRow,children:[(0,a.jsx)(i.G7,{style:{...n.tableCol,width:"5%"},children:(0,a.jsx)(i.xv,{style:n.tableCell})}),(0,a.jsx)(i.G7,{style:{...n.tableCol,width:"35%"},children:(0,a.jsx)(i.xv,{style:n.tableCell,children:e.task_title})}),(0,a.jsx)(i.G7,{style:{...n.tableCol,width:"15%"},children:(0,a.jsx)(i.xv,{style:n.tableCell,children:"-"})}),(0,a.jsx)(i.G7,{style:{...n.tableCol,width:"15%"},children:(0,a.jsx)(i.xv,{style:n.tableCell,children:e.end_date})}),(0,a.jsx)(i.G7,{style:{...n.tableCol,width:"30%"},children:e.pics.map((e=>(0,a.jsx)(i.xv,{style:n.tableCell,children:e.first_name},e.id)))})]},e.task_id)))]},e.task_id)))]}),(0,a.jsx)(i.xv,{style:n.pageNumber,render:e=>{let{pageNumber:s,totalPages:t}=e;return"".concat(s," / ").concat(t)}}),(0,a.jsx)(i.xv,{style:n.printAt,render:r})]})})}},78166:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Ce});var l=t(72791),i=t(39773),a=t(43464),n=t(49037),r=t(63009),d=t(14448),c=t(52007),o=t.n(c),x=t(81694),h=t.n(x),m=t(9622),u=["children","className","barClassName","cssModule","value","min","max","animated","striped","color","bar","multi","tag","style","barStyle","barAriaValueText","barAriaLabelledBy"];function j(){return j=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},j.apply(this,arguments)}function v(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);s&&(l=l.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),t.push.apply(t,l)}return t}function p(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?v(Object(t),!0).forEach((function(s){g(e,s,t[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))}))}return e}function g(e,s,t){return s in e?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}function f(e,s){if(null==e)return{};var t,l,i=function(e,s){if(null==e)return{};var t,l,i={},a=Object.keys(e);for(l=0;l<a.length;l++)t=a[l],s.indexOf(t)>=0||(i[t]=e[t]);return i}(e,s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)t=a[l],s.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var b={animated:o().bool,bar:o().bool,barAriaLabelledBy:o().string,barAriaValueText:o().string,barClassName:o().string,barStyle:o().object,children:o().node,className:o().string,cssModule:o().object,color:o().string,max:o().oneOfType([o().string,o().number]),min:o().oneOfType([o().string,o().number]),multi:o().bool,striped:o().bool,style:o().object,tag:m.iC,value:o().oneOfType([o().string,o().number])};function y(e){var s=e.children,t=e.className,i=e.barClassName,a=e.cssModule,n=e.value,r=void 0===n?0:n,d=e.min,c=void 0===d?0:d,o=e.max,x=void 0===o?100:o,v=e.animated,g=e.striped,b=e.color,y=e.bar,N=e.multi,Z=e.tag,w=void 0===Z?"div":Z,_=e.style,k=void 0===_?{}:_,S=e.barStyle,C=void 0===S?{}:S,O=e.barAriaValueText,T=e.barAriaLabelledBy,z=f(e,u),I=(0,m.He)(r)/(0,m.He)(x)*100,R=(0,m.mx)(h()(t,"progress"),a),F={className:(0,m.mx)(h()("progress-bar",y&&t||i,v?"progress-bar-animated":null,b?"bg-".concat(b):null,g||v?"progress-bar-striped":null),a),style:p(p(p({},y?k:{}),C),{},{width:"".concat(I,"%")}),role:"progressbar","aria-valuenow":r,"aria-valuemin":c,"aria-valuemax":x,"aria-valuetext":O,"aria-labelledby":T,children:s};return y?l.createElement(w,j({},z,F)):l.createElement(w,j({},z,{style:k,className:R}),N?s:l.createElement("div",F))}y.propTypes=b;const N=y;var Z=t(19127),w=t(46724),_=t(55211),k=t(94938),S=t(76167),C=t(42976),O=t(8118),T=t(73830),z=t(4828),I=t(76807),R=t(30690),F=t.n(R),D=t(57689),P=t(11087),A=t(55472),L=t(90235),E=t(87681),U=t(48089),B=t(90838),M=t(17834),q=t(31043),G=t(21234),H=t(87535),K=t(23606),W=t(80184);const V=(0,L.ZP)(),J=e=>{const s=(new Date).toLocaleString().split(",")[0],t=s.split("/")[1],l=s.split("/")[0],i=s.split("/")[2],a="".concat(i,"-").concat(l,"-").concat(t),n=new Date(a);return(new Date(e).getTime()-n.getTime())/864e5},Y=()=>{var e,s,t,c,o;const{auth:x}=(0,M.Z)(),{projectId:h}=(0,D.UO)(),[m,u]=(0,l.useState)(),[j,v]=(0,l.useState)(!1),[p,g]=(0,l.useState)(),[f,b]=(0,l.useState)(),[y,R]=(0,l.useState)(!1),[L,Y]=(0,l.useState)([]),[Q,X]=(0,l.useState)(void 0),[$,ee]=(0,l.useState)(""),[se,te]=(0,l.useState)(),[le,ie]=(0,l.useState)([]),[ae,ne]=(0,l.useState)(void 0),[re,de]=(0,l.useState)({todo:0,inprogress:0,underReview:0,done:0}),ce=(0,U.Z)(),oe=()=>{v(!j)},{isLoading:xe,error:he,data:me}=(0,I.a)({queryKey:["overview"],queryFn:()=>ce.get("api/project/".concat(h)).then((e=>e.data.data))});(0,l.useEffect)((()=>{var e,s,t,l,i;const a=null===me||void 0===me||null===(e=me.task_by_active_user)||void 0===e?void 0:e.filter((e=>0===parseInt(e.status,10)||4===parseInt(e.status,10))),n=null===me||void 0===me||null===(s=me.task_by_active_user)||void 0===s?void 0:s.filter((e=>1===parseInt(e.status,10))),r=null===me||void 0===me||null===(t=me.task_by_active_user)||void 0===t?void 0:t.filter((e=>2===parseInt(e.status,10)||3===parseInt(e.status,10))),d=null===me||void 0===me||null===(l=me.task_by_active_user)||void 0===l?void 0:l.filter((e=>2===parseInt(e.status,10)));de({todo:null===a||void 0===a?void 0:a.length,inprogress:null===n||void 0===n?void 0:n.length,underReview:null===d||void 0===d?void 0:d.length,done:null===r||void 0===r?void 0:r.length}),X(null===me||void 0===me||null===(i=me.current_stage)||void 0===i?void 0:i.phase_id),"business"===(null===me||void 0===me?void 0:me.category)?te(!0):te(!1)}),[me]);const ue=async()=>{await ce.get("api/project/".concat(h,"/history")).then((e=>u(e.data.data))).catch((e=>console.log(e)))};(0,l.useEffect)((()=>{ue()}),[h]),(0,l.useEffect)((()=>{!async function(){await ce.get("api/employe/assignment-list").then((e=>b(e.data.data))).catch((e=>console.log(e)))}()}),[]);const je=["Manager","Director"];return(0,l.useEffect)((()=>{!async function(){await ce.get("api/project/partner/options").then((e=>ie(e.data.data))).catch((e=>console.log(e)))}()}),[]),(0,W.jsx)(W.Fragment,{children:xe?(0,W.jsx)(i.Z,{lg:"12",children:(0,W.jsx)(a.Z,{children:(0,W.jsx)(n.Z,{children:"Loading..."})})}):he?"Soemthing went wrong.":(0,W.jsxs)(r.Z,{children:[(0,W.jsxs)(i.Z,{lg:"8",children:[(0,W.jsx)(a.Z,{className:"rounded-3 mb-3",children:(0,W.jsxs)(n.Z,{children:[(0,W.jsx)("div",{children:(0,W.jsx)(d.Z,{tag:"h5",className:"text-dark fw-bold",children:"Description"})}),(0,W.jsx)("div",{className:"ms-auto mt-3 mt-md-0",children:se?null===(e=me.current_stage)||void 0===e?void 0:e.desc:null===me||void 0===me?void 0:me.goals}),(0,W.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[(0,W.jsxs)("div",{className:"d-flex flex-column",children:[(0,W.jsx)("small",{className:"text-muted",children:"Level"}),(0,W.jsx)("span",{className:"text-dark",children:me.level_desc})]}),(0,W.jsxs)("div",{className:"d-flex flex-column col-4",children:[(0,W.jsx)("small",{className:"text-muted",children:"Base"}),(0,W.jsxs)("div",{className:"d-flex",children:[(0,W.jsx)("span",{className:"wtext-dark",children:(null===me||void 0===me?void 0:me.base_description.trim().length)>25?"".concat(null===me||void 0===me?void 0:me.base_description.substring(0,25),"..."):null===me||void 0===me?void 0:me.base_description}),(0,W.jsx)("abbr",{title:null===me||void 0===me?void 0:me.base_description,children:(0,W.jsx)("i",{className:"me-2 bi-info-circle-fill",style:{fontSize:"14px",marginLeft:"4px"}})})]})]}),(0,W.jsxs)("div",{className:"d-flex flex-column",children:[(0,W.jsx)("small",{className:"text-muted",children:"Start date"}),(0,W.jsx)("span",{className:"text-dark",children:(0,H.Z)((null===me||void 0===me?void 0:me.current_stage)&&(null===(s=me.current_stage)||void 0===s?void 0:s.start_date))})]}),(0,W.jsxs)("div",{className:"d-flex flex-column",children:[(0,W.jsx)("small",{className:"text-muted",children:"Deadline"}),(0,W.jsx)("span",{className:"text-dark",children:(0,H.Z)(null!==(null===me||void 0===me?void 0:me.current_stage)&&(null===(t=me.current_stage)||void 0===t?void 0:t.end_date))})]})]}),(0,W.jsxs)("div",{className:"d-flex justify-content-between bg-light align-items-end p-2 mt-3",style:{borderRadius:"8px"},children:[(0,W.jsxs)("div",{className:"d-flex gap-3 align-items-center",children:[(0,W.jsx)("img",{src:E,className:"rounded-circle",alt:"avatar",width:"45",height:"45"}),(0,W.jsxs)("div",{className:"d-flex flex-column",children:[(0,W.jsx)("small",{className:"text-muted",children:"PIC"}),(0,W.jsx)("span",{className:"text-dark fw-bold",children:me.pic_active.first_name})]})]}),(0,W.jsxs)("div",{className:"d-flex gap-3",children:[(0,W.jsxs)("span",{className:"badge text-info bg-light-info rounded-pill d-inline-block",children:["Est. Cost ",(0,W.jsx)("span",{className:"fw-bold",children:(0,K.Z)(me.estimated_cost)})]}),(0,W.jsxs)("span",{className:"badge text-info bg-light-info rounded-pill d-inline-block",children:["Est. Income ",(0,W.jsx)("span",{className:"fw-bold",children:(0,K.Z)(me.estimated_income)})]})]})]})]})}),(0,W.jsx)(a.Z,{className:"rounded-3",children:(0,W.jsxs)(n.Z,{children:[(0,W.jsx)("div",{children:(0,W.jsx)(d.Z,{tag:"h5",className:"text-dark fw-bold",children:"Project Histories"})}),(0,W.jsx)("div",{className:"d-flex flex-column gap-2",children:m?null===m||void 0===m?void 0:m.map((e=>{var s;return(0,W.jsxs)("div",{className:"col-md-12 d-flex justify-content-between align-items-center py-2 px-3",style:{backgroundColor:"#F3F2F2",borderRadius:"8px"},children:[(0,W.jsxs)("div",{className:"col-md-4 d-flex flex-column",children:[(0,W.jsx)("span",{className:"text-dark",children:e.organization_name}),(0,W.jsx)("small",{children:e.history_desc}),(null===x||void 0===x||null===(s=x.user)||void 0===s?void 0:s.roles.find((e=>je.includes(e))))&&(0,W.jsx)(P.rU,{to:"/projects/details/".concat(h,"?div=").concat(e.organization_id,"&to=activities"),style:{textDecoration:"none"},children:"See all task"})]}),(0,W.jsx)("div",{className:"col-md-2",children:(0,W.jsx)("span",{className:"badge bg-light-".concat("handover"===e.status&&0===e.active?"danger text-danger":"handover"===e.status?"success text-success":"review"===e.status?"danger text-danger":"primary text-primary"," rounded-pill d-inline-block fw-bold"),children:"handover"===e.status&&0===e.active?"waiting for approval":"handover"===e.status&&1===e.active||1===e.active?"active":e.status})}),(0,W.jsx)("div",{className:"col-md-3 d-flex flex-column",children:(0,W.jsx)("small",{children:(0,B.Z)(e.created_at)})}),(0,W.jsxs)("div",{className:"col-md-1 member",children:[(0,W.jsx)("img",{id:"tooltip-".concat(e.history_id),src:e.img||E,className:"rounded-circle",alt:"avatar",width:"35",height:"35"}),(0,W.jsx)(G.Z,{title:e.first_name,id:e.history_id.toString()})]})]},e.history_id)})):"Loading..."})]})})]}),(0,W.jsxs)(i.Z,{lg:"4",children:[(0,W.jsx)(a.Z,{className:"rounded-3 mb-3",children:(0,W.jsxs)(n.Z,{children:[(0,W.jsxs)(d.Z,{tag:"h5",className:"d-flex justify-content-between fw-bold",children:["Project Active",(0,W.jsxs)("span",{className:"text-success fw-bold",children:[me.total_progress.toFixed(100!==me.total_progress&&2),"%"]})]}),(0,W.jsx)(N,{className:"",color:"success",value:me.total_progress,style:{height:"15px"}})]})}),(0,W.jsx)(a.Z,{className:"rounded-3",children:(0,W.jsxs)(n.Z,{children:[(0,W.jsxs)("div",{className:"overall-process",children:[(0,W.jsxs)("div",{className:"overall-child",children:[(0,W.jsxs)("div",{children:[(0,W.jsx)("h6",{className:"text-muted",children:"Remaining days"}),(0,W.jsx)("span",{className:"text-danger",children:J(null!==(null===me||void 0===me?void 0:me.current_stage)&&(null===(c=me.current_stage)||void 0===c?void 0:c.end_date)).toFixed()})]}),(0,W.jsx)(F(),{icon:"timer"})]}),(0,W.jsxs)("div",{className:"overall-child",children:[(0,W.jsxs)("div",{children:[(0,W.jsx)("h6",{className:"text-muted",children:"Task Todo"}),(0,W.jsx)("span",{children:null===re||void 0===re?void 0:re.todo})]}),(0,W.jsx)(F(),{icon:"schedule"})]})]}),(0,W.jsxs)("div",{className:"overall-process",children:[(0,W.jsxs)("div",{className:"overall-child",children:[(0,W.jsxs)("div",{children:[(0,W.jsx)("h6",{className:"text-muted",children:"Task In Progress"}),(0,W.jsx)("span",{children:null===re||void 0===re?void 0:re.inprogress})]}),(0,W.jsx)(F(),{icon:"play_circle_outline"})]}),(0,W.jsxs)("div",{className:"overall-child",children:[(0,W.jsxs)("div",{children:[(0,W.jsx)("h6",{className:"text-muted",children:"Task Done"}),(0,W.jsx)("span",{children:null===re||void 0===re?void 0:re.done})]}),(0,W.jsx)(F(),{icon:"task_alt"})]})]})]})}),se&&x.user.roles.includes("Manager")&&(0,W.jsx)(a.Z,{children:(0,W.jsx)(Z.Z,{type:"button",color:"info",disabled:100!==(null===me||void 0===me?void 0:me.total_progress)||0!==(null===re||void 0===re?void 0:re.underReview)||0!==(null===re||void 0===re?void 0:re.todo)||0!==(null===re||void 0===re?void 0:re.inprogress),outline:!0,onClick:oe.bind(null),children:"Handover Project"})})]}),(0,W.jsxs)(w.Z,{isOpen:j,toggle:oe.bind(null),size:"md",fade:!1,centered:!0,children:[(0,W.jsx)(_.Z,{toggle:oe.bind(null),children:"Handover Project"}),(0,W.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),R(!0),await ce.post("api/project/handover",{project_id:h,new_pic:p.value,file:L,schema:2===Q?$:"",partner:2===Q?ae:""},{headers:{"Content-Type":"multipart/form-data"}}).then((()=>{ue(),(0,q.Z)("success","BAST is under review")})).catch((e=>console.log(e))),R(!1),v(!1)},children:[(0,W.jsxs)(k.Z,{children:[(0,W.jsxs)(S.Z,{children:[(0,W.jsx)(C.Z,{children:"Option"}),(0,W.jsxs)(O.Z,{type:"select",id:"base_id",name:"base_id",defaultValue:"a",children:[(0,W.jsx)("option",{value:"a",disabled:!0,children:"Select"}),(0,W.jsx)("option",{value:"",children:"Hand Over"}),(0,W.jsx)("option",{value:"",children:"Done"})]})]}),2===Q&&(0,W.jsxs)(W.Fragment,{children:[null===(null===me||void 0===me||null===(o=me.current_stage)||void 0===o?void 0:o.partner)&&(0,W.jsxs)(S.Z,{children:[(0,W.jsx)(C.Z,{for:"partner",children:"Partner"}),(0,W.jsxs)(O.Z,{type:"select",id:"partner",name:"partner",defaultValue:"pa",onChange:e=>ne(e.target.value),children:[(0,W.jsx)("option",{disabled:!0,value:"pa",children:"- Select -"}),le.length>0&&le.map((e=>(0,W.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,W.jsxs)(S.Z,{children:[(0,W.jsx)(C.Z,{children:"Schema"}),(0,W.jsxs)(O.Z,{type:"select",id:"base_id",name:"base_id",defaultValue:"a",onChange:e=>ee(e.target.value),children:[(0,W.jsx)("option",{value:"a",disabled:!0,children:"Select"}),(0,W.jsx)("option",{value:"jo",children:"JO"}),(0,W.jsx)("option",{value:"jv",children:"JV"})]})]})]}),(0,W.jsxs)(S.Z,{children:[(0,W.jsx)(C.Z,{children:"PIC"}),(0,W.jsx)(A.ZP,{components:V,options:f,onChange:e=>g(e)})]}),(0,W.jsxs)(S.Z,{children:[(0,W.jsx)(C.Z,{htmlFor:"bst",children:"BAST"}),(0,W.jsx)(S.Z,{children:(0,W.jsx)(O.Z,{type:"file",name:"file",id:"bst",onChange:e=>Y(e.target.files)})})]})]}),(0,W.jsxs)(T.Z,{children:[(0,W.jsx)(Z.Z,{color:"secondary",outline:!0,onClick:oe.bind(null),children:"Cancel"}),(0,W.jsx)(Z.Z,{type:"submit",color:"info",disabled:y,className:"d-flex gap-1 align-items-center",children:y?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(z.Z,{className:"me-2",size:"sm",color:"light"}),"Sending"]}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(F(),{icon:"send",style:{fontSize:"20px"}}),"Send"]})})]})]})]})]})})};var Q=t(16354),X=t(74458);const $=e=>{const{auth:s}=(0,M.Z)(),{projectId:t,setNewTaskOpen:i,setAddSubtaskOpen:a,refetch:n,type:r,taskId:d}=e,[c,o]=(0,l.useState)(!1),[x,h]=(0,l.useState)({}),[m,u]=(0,l.useState)(!1),[j,v]=(0,l.useState)([]),[p,g]=(0,l.useState)(),f=(0,L.ZP)(),b=(0,D.s0)(),y=()=>{u(!m)},N=(0,U.Z)();(0,l.useEffect)((()=>{!async function(){await N.get("api/employe/assignment-list").then((e=>{g(e.data.data)})).catch((e=>console.log(e)))}(),v([{value:s.user.employe_id,label:s.user.first_name}])}),[]);const S=e=>{h((s=>({...s,[e.target.name]:e.target.value})))},C=()=>{1===r?i(!1):a(void 0)};return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:"task-form-overlay",onClick:C}),(0,W.jsx)("form",{onSubmit:async e=>{e.preventDefault(),o(!0),x.project_id=t,x.task_pic=j,2===r&&(x.task_parent=d),await N.post("api/task",x,{headers:{"Content-Type":"multipart/form-data"}}).then((()=>{if(null!==s&&void 0!==s&&s.user.roles.includes("Manager")){const e=[];j.map((s=>e.push(s.value))),e.includes(null===s||void 0===s?void 0:s.user.employe_id)||b("?to=activities")}else b("");(0,q.Z)("create","New task has been created.")})).catch((e=>console.log(e.message))),o(!1),n(),C()},style:{width:"100%"},encType:"multipart/form-data",children:(0,W.jsxs)("div",{className:"new-task",children:[(0,W.jsxs)("div",{className:"body",children:[(0,W.jsx)("div",{className:"input",children:(0,W.jsx)(O.Z,{type:"textarea",name:"task_title",placeholder:"Task title here..",required:!0,onChange:S})}),(0,W.jsxs)("button",{type:"button",className:"btn-assigne",id:"tooltip-2",onClick:()=>{u(!0)},children:[(0,W.jsx)("i",{className:"bi-person-plus-fill"}),(0,W.jsx)("span",{children:(null===j||void 0===j?void 0:j.length)||0})]}),(0,W.jsx)(G.Z,{title:"Assigne",id:"2"})]}),(0,W.jsxs)("div",{className:"footer",children:[(0,W.jsx)("div",{className:"option",children:(0,W.jsxs)("div",{className:"duedate",children:[(0,W.jsxs)("span",{className:"datepicker-toggle",id:"tooltip-1",children:[(0,W.jsx)("span",{className:"datepicker-toggle-button",children:(0,W.jsx)(F(),{icon:"calendar_month"})}),(0,W.jsx)("input",{type:"date",name:"end_date",className:"datepicker-input",required:!0,onChange:S})]}),(0,W.jsx)(G.Z,{title:"Due date",id:"1"}),(0,W.jsx)("span",{children:x.end_date})]})}),(0,W.jsxs)("div",{className:"action",children:[(0,W.jsx)(Z.Z,{type:"button",size:"sm",color:"light",disabled:c,onClick:C,children:"Cancel"}),(0,W.jsx)(Z.Z,{type:"submit",size:"sm",className:"d-flex gap-2 align-items-center",disabled:c,children:c?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(z.Z,{size:"sm"}),"Loading..."]}):"Save"})]})]})]})}),(0,W.jsxs)(w.Z,{isOpen:m,toggle:y.bind(null),size:"md",fade:!1,centered:!0,children:[(0,W.jsx)(_.Z,{toggle:y.bind(null),children:"Assigne Employee"}),(0,W.jsx)(k.Z,{children:(0,W.jsx)(A.ZP,{components:f,isMulti:!0,defaultValue:j,options:p,onChange:e=>v(e)})})]})]})};var ee=t(79463),se=t(24944);const te=e=>{let{data:s,projectId:t,refetch:i}=e;const{auth:a}=(0,M.Z)(),[n,r]=(0,l.useState)(!1),[d,c]=(0,l.useState)(void 0),[o,x]=(0,l.useState)(void 0),[h,m]=(0,l.useState)(),[u,j]=(0,l.useState)(),[v,p]=(0,l.useState)(),g=(0,U.Z)(),f=e=>{r(!0),x(e)},b=async(e,s)=>{j(e),p(s),m(!0),await g.put("api/task/".concat(e,"/status"),{employe_id:a.user.employe_id,status:s}).then((()=>{(0,q.Z)(1===s?"start":2===s?"done":"success","Task status has been changed to ".concat(0===s?"To Do":1===s?"In Progress":"Done"))})).catch((e=>{(0,q.Z)("error",e.response.data.error)})),i(),m(!1),j(),p()},y={options:[{id:1,icon:(0,W.jsx)(F(),{icon:"edit_note"}),type:"button",label:"To do",to:0},{id:2,icon:(0,W.jsx)(F(),{icon:"play_circle_outline"}),type:"button",label:"In Progress",to:1},{id:3,icon:(0,W.jsx)(F(),{icon:"task_alt"}),type:"button",label:"Done",to:2}]};return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:"",children:null===s||void 0===s?void 0:s.map(((e,s)=>{var l,n;return(0,W.jsxs)("div",{className:"board",children:[(0,W.jsxs)("div",{className:"board-header",children:[(0,W.jsxs)("div",{className:"d-flex gap-2",style:{height:"max-content"},children:[(0,W.jsxs)(Q.Z,{color:"info",className:"bg-light-".concat(0===e.status?"primary":1===e.status?"warning":"success"," text-").concat(0===e.status?"primary":1===e.status?"warning":"success"," fw-bold"),children:["#",s+1]}),4===parseInt(e.status,10)&&(0,W.jsxs)(Q.Z,{color:"danger",children:[(0,W.jsx)("i",{className:"bi-pencil-square mr-4",style:{fontSize:"12px"}}),"\xa0 Revision"]})]}),0===parseInt(e.status,10)||1===parseInt(e.status,10)||4===parseInt(e.status,10)?h&&u===e.task_id?(0,W.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[(0,W.jsx)(z.Z,{size:"sm",color:"success"}),(0,W.jsxs)("span",{children:["Updating status to"," ",(0,W.jsx)("strong",{children:0===v?"To do":1===v?"In Progress":2===v?"Done":""})]})]}):(0,W.jsxs)("div",{className:"d-flex gap-2",children:[(0,W.jsx)("div",{className:"",children:1===parseInt(e.status,10)&&(0,W.jsxs)("span",{style:{fontSize:"12px"},children:["Progress","  ",(0,W.jsxs)("strong",{style:{fontSize:"14px",color:100===e.task_progress?"#4cc790":"#21C1D6"},children:[e.task_progress.toFixed(100!==e.task_progress&&2),"%"]})]})}),(0,W.jsx)("div",{children:e.pics.map((s=>s.employe_id.toString()===(null===a||void 0===a?void 0:a.user.employe_id)&&(0,W.jsx)(ee.Z,{menuOptions:y,taskId:e.task_id,status:parseInt(e.status,10),action:b,progress:e.task_progress},e.task_id)))},e.task_id)]}):2===parseInt(e.status,10)?(0,W.jsxs)(Q.Z,{color:"light",className:"d-flex text-dark",children:[(0,W.jsx)("i",{className:"bi-clock mr-4",style:{fontSize:"12px"}}),"\xa0 Waiting for approval"]}):3===parseInt(e.status,10)?(0,W.jsxs)(Q.Z,{color:"success",className:"d-flex",children:[(0,W.jsx)("i",{className:"bi-check2-circle mr-4",style:{fontSize:"13px"}}),"\xa0 Approved"]}):""]}),(0,W.jsxs)("div",{className:"board-body",onClick:()=>f(e),children:[(0,W.jsx)("div",{className:"task-title fw-bold",children:e.task_title}),(0,W.jsxs)("div",{className:"task-bottom",children:[(0,W.jsx)("div",{className:"task-info",children:(0,W.jsxs)("small",{className:"text-muted",children:[e.subtasks.length," Subtask"]})}),(0,W.jsx)("div",{className:"task-action",children:(0,W.jsxs)("div",{className:"comment",children:[(0,W.jsx)(F(),{icon:"comment"}),(0,W.jsx)("div",{children:e.comments})]})})]})]}),e.subtasks.length>=1&&e.subtasks.map((e=>(0,W.jsxs)("div",{className:"board-body subtask",onClick:()=>f(e),children:[(0,W.jsx)("div",{className:"task-title text-muted",children:e.task_title}),(0,W.jsxs)("div",{className:"task-action",children:[(0,W.jsx)("div",{className:"circular-progress",children:(0,W.jsx)(se.Z,{data:e.task_progress})}),(0,W.jsxs)("div",{className:"comment",children:[(0,W.jsx)(F(),{icon:"comment"}),(0,W.jsx)("div",{children:e.comments})]})]})]},e.task_id))),3!==parseInt(e.status,10)&&(0,W.jsx)("div",{className:"board-footer",children:d===e.task_id?(0,W.jsx)($,{projectId:t,setAddSubtaskOpen:c,refetch:i,type:2,taskId:e.task_id}):(0,W.jsxs)(W.Fragment,{children:[2!==e.status?(0,W.jsxs)(Z.Z,{type:"button",size:"sm",color:"light",className:"d-flex align-items-center",onClick:()=>c(e.task_id),children:[(0,W.jsx)(F(),{icon:"add",style:{fontSize:"14px"}}),"Add Subtask"]}):(0,W.jsx)("div",{}),(0,W.jsx)("div",{className:"member-2",children:(0,W.jsxs)("div",{className:"member-item",children:[null===e||void 0===e||null===(l=e.pics)||void 0===l?void 0:l.map(((e,s)=>s<2&&(0,W.jsxs)("div",{className:"ava-img",children:[(0,W.jsx)("img",{id:"tooltip-".concat(e.id),src:E,className:"rounded-circle",alt:"avatar",width:"35",height:"35"}),(0,W.jsx)(G.Z,{title:e.first_name,id:e.id.toString()})]},e.id))),(null===e||void 0===e||null===(n=e.pics)||void 0===n?void 0:n.length)>2&&(0,W.jsxs)("div",{className:"member-plus bg-light-info text-info fw-bold",children:["+",e.pics.length-2]})]})})]})})]},e.task_id)}))}),n&&(0,W.jsx)(X.Z,{modal:n,setModal:r,toggle:()=>{r(!n)},task:o,refetch:i})]})},le=e=>{let{data:s,isLoading:t,error:a,refetch:n,isRefetching:r}=e;const[d,c]=(0,l.useState)(!1),{projectId:o}=(0,D.UO)();return(0,W.jsxs)(i.Z,{lg:"4",className:"mt-1",children:[(0,W.jsxs)("div",{className:"d-flex align-items-center justify-content-between bg-light-primary text-primary py-2 px-3 mb-2 rounded-2",children:[(0,W.jsx)("span",{className:"fw-bold",children:"To do"}),(0,W.jsx)("span",{className:"fw-bold",children:null===s||void 0===s?void 0:s.length})]}),t?"Loading...":a?"Something went wrong.":(0,W.jsxs)(W.Fragment,{children:[d?(0,W.jsx)($,{projectId:o,setNewTaskOpen:c,refetch:n,type:1}):(0,W.jsxs)(Z.Z,{type:"button",size:"sm",color:"secondary",className:"d-flex align-items-center justify-content-center",block:!0,onClick:()=>c(!0),children:[(0,W.jsx)(F(),{icon:"add",style:{fontSize:"14px"}}),"New Task"]}),(0,W.jsx)(te,{data:s,projectId:o,refetch:n,isRefetching:r})]})]})},ie=e=>{let{data:s,isLoading:t,error:l,refetch:a,isRefetching:n}=e;const{projectId:r}=(0,D.UO)();return(0,W.jsxs)(i.Z,{lg:"4",className:"mt-1",children:[(0,W.jsxs)("div",{className:"d-flex align-items-center justify-content-between bg-light-warning text-warning py-2 px-3 mb-2 rounded-2",children:[(0,W.jsx)("span",{className:"fw-bold",children:"In progress"}),(0,W.jsx)("span",{className:"fw-bold",children:null===s||void 0===s?void 0:s.length})]}),t?"Loading...":l?"Something went wrong.":(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(te,{data:s,projectId:r,refetch:a,isRefetching:n})})]})},ae=e=>{let{data:s,isLoading:t,error:l,refetch:a,isRefetching:n}=e;const{projectId:r}=(0,D.UO)();return(0,W.jsxs)(i.Z,{lg:"4",className:"mt-1",children:[(0,W.jsxs)("div",{className:"d-flex align-items-center justify-content-between bg-light-success text-success py-2 px-3 mb-2 rounded-2",children:[(0,W.jsx)("span",{className:"fw-bold",children:"Done"}),(0,W.jsx)("span",{className:"fw-bold",children:null===s||void 0===s?void 0:s.length})]}),t?"Loading...":l?"Something went wrong.":(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(te,{data:s,projectId:r,refetch:a,isRefetching:n})})]})},ne=()=>{const{projectId:e}=(0,D.UO)(),[s,t]=(0,l.useState)(),[d,c]=(0,l.useState)(),[o,x]=(0,l.useState)(),[h,m]=(0,l.useState)(!0),u=(0,U.Z)(),{isLoading:j,error:v,data:p,refetch:g,isRefetching:f}=(0,I.a)({queryKey:["todos"],queryFn:()=>u.get("api/task/".concat(e,"/employe/all")).then((e=>(m(e.data.is_member_active),e.data.tasks)))});return(0,l.useEffect)((()=>{const e=null===p||void 0===p?void 0:p.filter((e=>0===parseInt(e.status,10)||4===parseInt(e.status,10))),s=null===p||void 0===p?void 0:p.filter((e=>1===parseInt(e.status,10))),l=null===p||void 0===p?void 0:p.filter((e=>2===parseInt(e.status,10)||3===parseInt(e.status,10)));t(e),c(s),x(l)}),[p]),(0,W.jsx)(r.Z,{children:j?(0,W.jsx)(i.Z,{children:(0,W.jsx)(a.Z,{children:(0,W.jsx)(n.Z,{className:"text-center",children:(0,W.jsx)("h6",{className:"tex-muted",children:"Loading..."})})})}):h?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(le,{data:s,isLoading:j,error:v,refetch:g,isRefetching:f}),(0,W.jsx)(ie,{data:d,isLoading:j,error:v,refetch:g,isRefetching:f}),(0,W.jsx)(ae,{data:o,isLoading:j,error:v,refetch:g,isRefetching:f})]}):(0,W.jsx)(i.Z,{children:(0,W.jsx)(a.Z,{children:(0,W.jsx)(n.Z,{className:"text-center",children:(0,W.jsx)("h6",{className:"tex-muted",children:"You cannot create a task because you are not an active member."})})})})})},re=e=>{let{children:s}=e;return(0,W.jsx)("table",{className:"rounded-corners",children:s})},de=()=>{const[e,s]=(0,l.useState)(),t=(0,U.Z)(),{projectId:r}=(0,D.UO)(),{isLoading:d,error:c,data:o}=(0,I.a)({queryKey:["members"],queryFn:()=>t.get("api/project/".concat(r,"/members")).then((e=>(s(e.data.count_task),e.data.data)))});return(0,W.jsx)(i.Z,{children:(0,W.jsx)(a.Z,{className:"rounded-3",children:(0,W.jsx)(n.Z,{children:d?"Loading...":c?"Something went wrong.":(null===o||void 0===o?void 0:o.length)>0?(0,W.jsx)(re,{children:(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("thead",{children:(0,W.jsxs)("tr",{children:[(0,W.jsx)("th",{children:"#"}),(0,W.jsx)("th",{children:"Name"}),(0,W.jsx)("th",{children:"Position"}),(0,W.jsx)("th",{children:"Total Task"})]})}),(0,W.jsx)("tbody",{style:{overflow:"hidden"},children:null===o||void 0===o?void 0:o.map(((s,t)=>{return(0,W.jsxs)("tr",{children:[(0,W.jsx)("td",{children:t+1}),(0,W.jsx)("td",{children:s.first_name}),(0,W.jsx)("td",{children:s.position_name}),(0,W.jsx)("td",{children:e?(l=e,i=s.employe_id.toString(),l[i]):"-"})]},s.first_name);var l,i}))})]})}):(0,W.jsx)("div",{className:"d-flex justify-content-center",children:(0,W.jsx)("h6",{children:"No data yet."})})})})})};var ce=t(28755);const oe=()=>{const{projectId:e}=(0,D.UO)(),s=(0,U.Z)(),{isLoading:t,error:l,data:r}=(0,I.a)({queryKey:["files"],queryFn:()=>s.get("api/project/".concat(e,"/files")).then((e=>e.data.data))});return(0,W.jsx)(i.Z,{children:(0,W.jsx)(a.Z,{children:(0,W.jsx)(n.Z,{children:t?"Loading...":l?"Something went wrong.":(0,W.jsxs)(ce.Z,{className:"no-wrap mt-3 align-middle",hover:!0,style:{zIndex:"-1"},children:[(0,W.jsx)("thead",{children:(0,W.jsxs)("tr",{children:[(0,W.jsx)("th",{children:"#"}),(0,W.jsx)("th",{children:"Filename"}),(0,W.jsx)("th",{children:"Date Added"})]})}),(0,W.jsx)("tbody",{style:{overflow:"hidden"},children:null===r||void 0===r?void 0:r.map(((e,s)=>(0,W.jsxs)("tr",{children:[(0,W.jsx)("td",{children:s+1}),(0,W.jsx)("td",{children:(0,W.jsx)(P.rU,{to:"".concat("https://api.ptpema.co.id/","taskfiles/").concat(e.file_name),target:"blank",children:e.file_name})}),(0,W.jsx)("td",{children:(0,B.Z)(e.created_at)})]},e.file_id)))})]})})})})};var xe=t(69399);const he=e=>{let{setTotalReview:s}=e;const{projectId:t}=(0,D.UO)(),[r,c]=(0,l.useState)(!1),[o,x]=(0,l.useState)(""),[h,m]=(0,l.useState)(),[u,j]=(0,l.useState)(!1),[v,p]=(0,l.useState)(),[g,f]=(0,l.useState)(),b=(0,U.Z)(),[y,N]=(0,l.useState)([]),{isLoading:C,error:R,refetch:A,isRefetching:L}=(0,I.a)({queryKey:["review"],queryFn:()=>b.get("api/task/".concat(t,"/level1/review")).then((e=>(N(e.data.data),e.data.data)))}),E=()=>{c(!r)};(0,l.useEffect)((()=>{s(y.length)}),[y]),(0,l.useEffect)((()=>{A()}),[t]);const M={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASEURL:"https://api.ptpema.co.id/"}.REACT_APP_FILEURL,G=(e,s,t)=>{c(!0),x(e),m(s),f(t)};return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(i.Z,{children:C||L?(0,W.jsx)("div",{className:"d-flex justify-content-center",children:"Loading..."}):R?(0,W.jsxs)("div",{className:"d-flex justify-content-center",children:["Something went wrong ",(0,W.jsx)("span",{className:"material-icons",children:"sentiment_very_dissatisfied"})]}):y.map(((e,s)=>(0,W.jsx)(a.Z,{className:"custom-card",children:(0,W.jsxs)(n.Z,{children:[(0,W.jsxs)(d.Z,{tag:"h4",className:"d-flex justify-content-between",children:[(0,W.jsxs)("div",{className:"d-flex gap-2",children:[(0,W.jsxs)(Q.Z,{color:"light",className:"text-dark",children:["#",s+1]}),(0,W.jsx)(Q.Z,{color:"info",className:"",children:e.first_name})]}),(0,W.jsx)("span",{style:{fontSize:"14px"},children:(0,B.Z)(e.send_date)})]}),(0,W.jsx)("h5",{children:(0,W.jsx)("strong",{children:e.task_title})}),(0,W.jsx)("p",{children:e.task_desc}),(0,W.jsx)("span",{className:"text-dark",children:"Attachment:"}),(0,W.jsx)("div",{className:"",children:e.files.length>0?e.files.map(((e,s)=>(0,W.jsxs)("div",{className:"d-flex gap-3",children:[(0,W.jsxs)("span",{children:[s+1,"."]}),(0,W.jsx)(P.rU,{className:"file-link",to:"".concat(M,"taskfiles/").concat(e.file_name),target:"blank",children:e.file_name})]},e.file_name))):"-"}),(0,W.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-4 border  py-2 px-3",style:{borderRadius:"10px"},children:[(0,W.jsxs)("div",{className:"d-flex gap-4",children:[(0,W.jsxs)("div",{color:"muted",children:[(0,W.jsx)("span",{className:"text-dark",children:"Start at: "}),(0,W.jsx)("br",{})," ",(0,B.Z)(e.start_date).split(",")[0]]}),(0,W.jsxs)("div",{color:"muted",children:[(0,W.jsx)("span",{className:"text-dark",children:"Due at: "}),(0,W.jsx)("br",{})," ",(0,B.Z)(e.end_date).split(",")[0]]})]}),(0,W.jsxs)("div",{className:"d-flex gap-2",children:[(0,W.jsx)(Z.Z,{type:"button",size:"md",color:"warning",outline:!0,onClick:()=>G("revision",e.task_id,e.employe_id),children:"Revision"}),(0,W.jsx)(Z.Z,{type:"button",size:"md",color:"success",onClick:()=>G("approve",e.task_id,e.employe_id),children:"Approve"})]})]})]})},e.approval_id)))}),(0,W.jsxs)(w.Z,{isOpen:r,toggle:E.bind(null),size:"md",fade:!1,centered:!0,children:[(0,W.jsx)(_.Z,{toggle:E.bind(null),children:"approve"===o?"Approval":"Revision"}),(0,W.jsxs)(xe.Z,{onSubmit:async e=>{e.preventDefault(),j(!0),await b.put("api/task/".concat(h,"/status"),{employe_id:g,status:"approve"===o?3:4,note:v}).then((()=>{(0,q.Z)("success","Task has been ".concat("approve"===o?"approved":"reviewed"))})).catch((e=>console.log(e))),A(),c(!1),j(!1)},children:[(0,W.jsx)(k.Z,{children:(0,W.jsx)(S.Z,{children:(0,W.jsx)(O.Z,{type:"textarea",id:"goals",name:"goals",placeholder:"Comment here..",rows:"3",required:!0,onChange:e=>p(e.target.value)})})}),(0,W.jsxs)(T.Z,{children:[(0,W.jsx)(Z.Z,{color:"secondary",outline:!0,onClick:E.bind(null),children:"Cancel"}),(0,W.jsx)(Z.Z,{type:"submit",color:"".concat("approve"===o?"success":"warning"),disabled:u,className:"d-flex gap-1 align-items-center",children:u?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(z.Z,{className:"me-2",size:"sm"}),"Sending..."]}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(F(),{icon:"send",style:{fontSize:"20px"}}),"approve"===o?"Approve":"Send"]})})]})]})]})]})},me=()=>{var e,s;const[t,c]=(0,l.useState)(!1),[o,x]=(0,l.useState)(!1),[h,m]=(0,l.useState)({}),{auth:u}=(0,M.Z)(),{projectId:j}=(0,D.UO)(),v=(0,U.Z)(),p=()=>{c(!t)},{isLoading:g,error:f,data:b,refetch:y,isRefetching:N}=(0,I.a)({queryKey:["review"],queryFn:()=>v.get("api/project/".concat(null===u||void 0===u?void 0:u.user.employe_id,"/").concat(j,"/handover")).then((e=>e.data.data))}),R=e=>{m((s=>({...s,[e.target.name]:e.target.value})))};return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(i.Z,{children:g||N?(0,W.jsx)("div",{className:"d-flex justify-content-center",children:"Loading..."}):f?(0,W.jsxs)("div",{className:"d-flex justify-content-center",children:["Something went wrong ",(0,W.jsx)("span",{className:"material-icons",children:"sentiment_very_dissatisfied"})]}):null!==b&&(0,W.jsx)(a.Z,{className:"custom-card",children:(0,W.jsxs)(n.Z,{children:[(0,W.jsxs)(d.Z,{tag:"h4",className:"d-flex justify-content-between",children:[(0,W.jsx)("div",{className:"d-flex gap-2",children:(0,W.jsx)(Q.Z,{color:"light",className:"text-dark",children:"Handover project"})}),(0,W.jsx)("span",{style:{fontSize:"14px"},children:(0,B.Z)(b.created_at)})]}),(0,W.jsx)("div",{className:"d-flex  justify-content-center",children:(0,W.jsxs)("h5",{children:["Handover of the project from ",(0,W.jsx)("strong",{children:b.from_division})," to"," ",(0,W.jsx)("strong",{children:b.to_division})]})}),(0,W.jsx)("p",{}),(0,W.jsx)("span",{className:"text-dark",children:"BAST File:"}),(0,W.jsx)("div",{className:"",children:(0,W.jsx)("div",{className:"d-flex gap-3",children:(0,W.jsx)(P.rU,{className:"file-link",to:"".concat("https://api.ptpema.co.id/","project/").concat(b.file),target:"blank",children:b.file})})}),(0,W.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-4 border  py-2 px-3",style:{borderRadius:"10px"},children:[(0,W.jsx)("div",{className:"d-flex gap-4",children:(0,W.jsxs)("div",{className:"d-flex gap-3 align-items-center",children:[(0,W.jsx)("img",{src:E,className:"rounded-circle",alt:"avatar",width:"45",height:"45"}),(0,W.jsxs)("div",{className:"d-flex flex-column",children:[(0,W.jsx)("span",{className:"text-dark fw-bold",children:b.old_pic}),(0,W.jsx)("small",{className:"text-muted",children:b.from_division})]})]})}),(0,W.jsx)("div",{className:"d-flex gap-2",children:(0,W.jsx)(Z.Z,{type:"button",size:"md",color:"success",outline:!0,onClick:p.bind(null),children:"Confirm"})})]})]})})}),(0,W.jsxs)(w.Z,{isOpen:t,toggle:p.bind(null),size:"md",fade:!1,centered:!0,children:[(0,W.jsx)(_.Z,{toggle:p.bind(null),children:"Confirmation"}),(0,W.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),x(!0),v.post("api/project/".concat(null===b||void 0===b?void 0:b.history_id,"/confirm"),h).then((e=>{y(),(0,q.Z)("success",e.data.message)})).catch((e=>{(0,q.Z)("error",e.response.data.error)})),c(!1),x(!1)},children:[(0,W.jsxs)(k.Z,{children:[(0,W.jsx)("div",{className:"d-flex justify-content-center",children:(0,W.jsxs)("h6",{className:"fw-bold",children:["Next stage:"," ",1===(null===b||void 0===b||null===(e=b.current_stage)||void 0===e?void 0:e.phase)?"Planning":2===(null===b||void 0===b||null===(s=b.current_stage)||void 0===s?void 0:s.phase)?"Execution, Control & Monitoring":""]})}),(0,W.jsxs)(S.Z,{children:[(0,W.jsx)(C.Z,{htmlFor:"desc_stage",children:"Description"}),(0,W.jsx)(O.Z,{type:"textarea",name:"desc_stage",id:"desc_stage",placeholder:"stage description here..",rows:"3",onChange:R})]}),(0,W.jsxs)(r.Z,{children:[(0,W.jsx)(i.Z,{md:"6",children:(0,W.jsxs)(S.Z,{children:[(0,W.jsx)(C.Z,{for:"start_date",children:"Start date"}),(0,W.jsx)(O.Z,{type:"date",id:"start_date",name:"start_date",onChange:R})]})}),(0,W.jsx)(i.Z,{md:"6",children:(0,W.jsxs)(S.Z,{children:[(0,W.jsx)(C.Z,{for:"end_date",children:"End date"}),(0,W.jsx)(O.Z,{type:"date",id:"end_date",name:"end_date",onChange:R})]})})]})]}),(0,W.jsxs)(T.Z,{children:[(0,W.jsx)(Z.Z,{color:"secondary",outline:!0,onClick:p.bind(null),children:"Cancel"}),(0,W.jsx)(Z.Z,{type:"submit",color:"success",disabled:o,className:"d-flex gap-1 align-items-center",children:o?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(z.Z,{className:"me-2",size:"sm",color:"light"}),"Sending"]}):"Send"})]})]})]})]})};var ue=t(46272),je=t(79617),ve=t(20890),pe=t(14097);t(42459);const ge=()=>{const{auth:e}=(0,M.Z)(),{projectId:s}=(0,D.UO)(),[t,d]=(0,l.useState)(!1),[c,o]=(0,l.useState)(void 0),[x,h]=(0,l.useState)(),[m,u]=(0,l.useState)(),[j,v]=(0,l.useState)(!1),[p,g]=(0,l.useState)(),[f,b]=(0,l.useState)(),y=(0,U.Z)(),{search:N}=(0,D.TH)(),{isLoading:w,error:_,data:k,refetch:S}=(0,I.a)({queryKey:["act"],queryFn:()=>y.get("api/task/".concat(s,"/activities/all").concat(N)).then((e=>(g(e.data.project),e.data.data)))});(0,l.useEffect)((()=>{b(k)}),[k]);const C=e=>{d(!0),o(e)},T=async s=>{h(s),u(!0),await y.post("api/task/".concat(null===e||void 0===e?void 0:e.user.employe_id,"/").concat(s,"/favorite")).then((e=>{S(),(0,q.Z)("success",e.data.message)})).catch((()=>{(0,q.Z)("error","Something went wrong.")})),h(),u(!1)},R=["Director"],A=["Manager"];(0,l.useEffect)((()=>{null!==e&&void 0!==e&&e.user.roles.find((e=>R.includes(e)))&&v(!0)}),[e]);const[L,B]=l.useState(null),H=Boolean(L),K=H?"simple-popover":void 0;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(i.Z,{children:(0,W.jsx)(a.Z,{className:"rounded-3",children:(0,W.jsx)(n.Z,{children:w?"loading...":_?"Something went wrong.":(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(r.Z,{children:[(0,W.jsx)(i.Z,{sm:"12 mb-2",md:"6",children:(0,W.jsxs)("div",{className:"d-flex gap-2",children:[(0,W.jsxs)(Z.Z,{type:"button",className:"d-flex align-items-center gap-2 rounded-3",color:"light",size:"sm",children:[(0,W.jsx)(F(),{icon:"filter_list",style:{fontSize:"12px"}}),"Sort"]}),(0,W.jsxs)(Z.Z,{type:"button",className:"d-flex align-items-center gap-2 rounded-3",color:"light",size:"sm",children:[(0,W.jsx)(F(),{icon:"tune",style:{fontSize:"12px"}}),"Filters"]})]})}),(0,W.jsx)(i.Z,{sm:"12",md:"6",children:(0,W.jsxs)("div",{className:"d-flex gap-3 col-md-6 w-100",children:[(0,W.jsxs)("div",{className:"w-100 position-relative",children:[(0,W.jsx)(O.Z,{type:"text",className:"rounded-3",bsSize:"md",placeholder:"Search task...",onChange:e=>(e=>{const s=k.filter((s=>s.task_title.toLowerCase().includes(e.toLowerCase())));b(s)})(e.target.value)}),(0,W.jsxs)("div",{className:"position-absolute top-0 end-0 h-100 p-1",children:[(0,W.jsx)(Z.Z,{type:"button",className:"btn btn-light w-100 h-100 border-0 rounded-3 text-muted","aria-describedby":K,variant:"contained",onClick:e=>{B(e.currentTarget)},children:(0,W.jsx)(F(),{icon:"more_horiz",style:{fontSize:"16px"}})}),(0,W.jsx)(je.ZP,{id:K,open:H,anchorEl:L,onClick:()=>{B(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,W.jsx)(ve.Z,{sx:{p:2},children:(0,W.jsxs)(i.Z,{children:[(0,W.jsx)(r.Z,{children:(0,W.jsx)(P.rU,{to:"#",children:"Task"})}),(0,W.jsx)(r.Z,{children:(0,W.jsx)(P.rU,{to:"#",children:"Employee"})}),(0,W.jsx)(r.Z,{children:(0,W.jsx)(P.rU,{to:"#",children:"Date"})})]})})})]})]}),(null===e||void 0===e?void 0:e.user.roles.find((e=>A.includes(e))))&&(0,W.jsx)(ue.WD,{document:(0,W.jsx)(pe.Z,{projectTitle:p,data:k}),fileName:"Task Report - ".concat(null===p||void 0===p?void 0:p.project_number," - ").concat(null===p||void 0===p?void 0:p.division),style:{textDecoration:"none"},children:(0,W.jsx)(Z.Z,{type:"button",className:"btn btn-light-info text-info rounded-3 d-flex py-2",children:(0,W.jsx)(F(),{icon:"file_download",style:{fontSize:"18px"}})})})]})})]}),(0,W.jsxs)(i.Z,{sm:"12 overflow-auto",children:[(0,W.jsxs)("h6",{className:"fw-bold mt-3",children:["List of tasks from ",null===p||void 0===p?void 0:p.division]}),(0,W.jsxs)("table",{className:"rounded-corners",children:[(0,W.jsx)("thead",{children:(0,W.jsxs)("tr",{children:[(0,W.jsx)("th",{width:"30",children:"#"}),(0,W.jsx)("th",{children:"Task title"}),(0,W.jsx)("th",{width:"",children:"Status"}),(0,W.jsx)("th",{children:"Progress"}),(0,W.jsx)("th",{width:"100",children:"PIC"}),j&&(0,W.jsx)("th",{width:"50"})]})}),(0,W.jsx)("tbody",{children:(null===f||void 0===f?void 0:f.length)>0?null===f||void 0===f?void 0:f.map(((e,s)=>{var t,i,a,n;return(0,W.jsxs)(l.Fragment,{children:[(0,W.jsxs)("tr",{children:[(0,W.jsxs)("td",{children:[s+1,"."]}),(0,W.jsxs)("td",{style:{cursor:"pointer"},onClick:()=>C(e),children:[(0,W.jsx)("span",{style:{fontWeight:"600"},children:e.task_title}),(0,W.jsx)("br",{}),(0,W.jsxs)(Q.Z,{color:"light",className:"text-muted",children:[null===e||void 0===e||null===(t=e.subtasks)||void 0===t?void 0:t.length," subtask"]}),"  ",(0,W.jsxs)(Q.Z,{color:"light",className:"text-muted",children:[(0,W.jsx)(F(),{icon:"comment",style:{fontSize:"12px"}}),e.comments]})]}),(0,W.jsx)("td",{children:0===e.status?(0,W.jsx)(Q.Z,{color:"light",className:"text-dark",children:"To Do"}):1===e.status?(0,W.jsx)(Q.Z,{color:"warning",children:"In Progress"}):2===e.status?(0,W.jsx)(Q.Z,{color:"light",className:"text-dark",children:"Under Review"}):3===e.status?(0,W.jsx)(Q.Z,{color:"success",children:"Approved"}):(0,W.jsx)(Q.Z,{color:"danger",children:"Revision"})}),(0,W.jsx)("td",{children:(0,W.jsxs)("span",{className:"badge bg-light-success text-primary rounded-pill d-inline-block fw-bold",children:[null===e||void 0===e||null===(i=e.task_progress)||void 0===i?void 0:i.toFixed(),"%"]})}),(0,W.jsx)("td",{children:(0,W.jsx)("div",{className:"members",children:(0,W.jsxs)("div",{className:"member-item",children:[null===e||void 0===e||null===(a=e.pics)||void 0===a?void 0:a.map(((e,s)=>{var t;return s<2&&(0,W.jsxs)("div",{className:"ava-img",children:[(0,W.jsx)("img",{id:"tooltip-".concat(e.id),src:E,className:"rounded-circle",alt:"avatar",width:"35",height:"35"}),(0,W.jsx)(G.Z,{title:e.first_name,id:null===(t=e.id)||void 0===t?void 0:t.toString()})]},e.id)})),(null===e||void 0===e||null===(n=e.pics)||void 0===n?void 0:n.length)>2&&(0,W.jsxs)("div",{className:"member-plus bg-light-info text-info fw-bold",children:["+",e.pics.length-2]})]})})}),j&&(0,W.jsx)("td",{className:"text-center",children:m&&x===e.task_id?(0,W.jsx)(z.Z,{size:"sm",color:"warning"}):(0,W.jsx)("abbr",{title:"Mark task",style:{textDecoration:"none"},children:(0,W.jsx)("button",{type:"button",className:"fav-btn",onClick:()=>T(e.task_id),children:(0,W.jsx)(F(),{icon:"star",className:"".concat(e.isFavorite&&"is_favorite")})})})})]}),e.subtasks.length>0&&e.subtasks.map((e=>{var s,t,l;return(0,W.jsxs)("tr",{children:[(0,W.jsx)("td",{}),(0,W.jsxs)("td",{onClick:()=>C(e),style:{cursor:"pointer"},children:[e.task_title,(0,W.jsx)("br",{}),(0,W.jsxs)(Q.Z,{color:"light",className:"text-muted",children:[(0,W.jsx)(F(),{icon:"comment",style:{fontSize:"12px"}}),e.comments]})]}),(0,W.jsx)("td",{children:"-"}),(0,W.jsx)("td",{children:(0,W.jsxs)("span",{className:"badge bg-light-primary text-primary rounded-pill d-inline-block fw-bold",children:[null===e||void 0===e||null===(s=e.task_progress)||void 0===s?void 0:s.toFixed(),"%"]})}),(0,W.jsx)("td",{children:(0,W.jsx)("div",{className:"members",children:(0,W.jsxs)("div",{className:"member-item",children:[null===e||void 0===e||null===(t=e.pics)||void 0===t?void 0:t.map(((e,s)=>{var t;return s<2&&(0,W.jsxs)("div",{className:"ava-img",children:[(0,W.jsx)("img",{id:"tooltip-".concat(e.id),src:E,className:"rounded-circle",alt:"avatar",width:"35",height:"35"}),(0,W.jsx)(G.Z,{title:e.first_name,id:null===(t=e.id)||void 0===t?void 0:t.toString()})]},e.id)})),(null===e||void 0===e||null===(l=e.pics)||void 0===l?void 0:l.length)>2&&(0,W.jsxs)("div",{className:"member-plus bg-light-info text-info fw-bold",children:["+",e.pics.length-2]})]})})}),j&&(0,W.jsx)("td",{className:"text-center",children:m&&x===e.task_id?(0,W.jsx)(z.Z,{size:"sm",color:"warning"}):(0,W.jsx)("abbr",{title:"Mark task",style:{textDecoration:"none"},children:(0,W.jsx)("button",{type:"button",className:"fav-btn",onClick:()=>T(e.task_id),children:(0,W.jsx)(F(),{icon:"star",className:"".concat(e.isFavorite&&"is_favorite")})})})})]},e.task_id)}))]},e.task_id)})):(0,W.jsx)("tr",{children:(0,W.jsx)("td",{colSpan:"5",align:"center",children:"Data not found."})})})]})]})]})})})}),t&&(0,W.jsx)(X.Z,{modal:t,setModal:d,toggle:()=>{d(!t)},task:c,mode:"activities"})]})},fe=e=>{let{setTotalBastReview:s}=e;const{auth:t}=(0,M.Z)(),{projectId:r}=(0,D.UO)(),[c,o]=(0,l.useState)(!1),[x,h]=(0,l.useState)(""),[m,u]=(0,l.useState)(),[j,v]=(0,l.useState)(),[p,g]=(0,l.useState)(),[f,b]=(0,l.useState)(),[y,N]=(0,l.useState)(!1),C=(0,U.Z)(),{isLoading:R,error:A,data:L,refetch:G}=(0,I.a)({queryKey:["bast-review"],queryFn:()=>C.get("api/project/".concat(r,"/").concat(null===t||void 0===t?void 0:t.user.employe_id,"/bast/review")).then((e=>e.data.data))});(0,l.useEffect)((()=>{s(10)}),[L]);const H=(e,s,t,l)=>{o(!0),h(e),v(s||null),g(t),b(l)},K=()=>{o(!c)};return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(i.Z,{children:R?(0,W.jsx)(a.Z,{children:(0,W.jsx)(n.Z,{children:"Loading..."})}):A?"Something went wrong.":(0,W.jsx)(a.Z,{className:"custom-card",children:L&&(0,W.jsxs)(n.Z,{children:[(0,W.jsxs)(d.Z,{tag:"h4",className:"d-flex justify-content-between",children:[(0,W.jsx)("div",{className:"d-flex gap-2",children:(0,W.jsx)(Q.Z,{color:"light",className:"text-dark",children:"Review BAST"})}),(0,W.jsx)("span",{style:{fontSize:"14px"},children:(0,B.Z)(L.created_at)})]}),(0,W.jsx)("div",{className:"d-flex  justify-content-center",children:(0,W.jsxs)("h5",{children:["Handover of the project from ",(0,W.jsx)("strong",{children:L.old_pic_division})," to"," ",(0,W.jsx)("strong",{children:L.new_pic_division})]})}),(0,W.jsx)("span",{className:"text-dark",children:"BAST file:"}),(0,W.jsx)("div",{className:"",children:(0,W.jsx)("div",{className:"d-flex gap-3",children:(0,W.jsx)(P.rU,{className:"file-link",to:"",target:"blank",children:L.file})})}),(0,W.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-4 border  py-2 px-3",style:{borderRadius:"10px"},children:[(0,W.jsx)("div",{className:"d-flex gap-4",children:(0,W.jsxs)("div",{className:"d-flex gap-3 align-items-center",children:[(0,W.jsx)("img",{src:E,className:"rounded-circle",alt:"avatar",width:"45",height:"45"}),(0,W.jsxs)("div",{className:"d-flex flex-column",children:[(0,W.jsx)("span",{className:"text-dark fw-bold",children:L.old_pic}),(0,W.jsx)("small",{className:"text-muted",children:L.old_pic_division})]})]})}),(0,W.jsxs)("div",{className:"d-flex gap-2",children:[(0,W.jsx)(Z.Z,{type:"button",size:"md",color:"warning",outline:!0,onClick:()=>H("revision",L.old_pic_id,L.review_by),children:"Revision"}),(0,W.jsx)(Z.Z,{type:"button",size:"md",color:"success",onClick:()=>H("approve",L.old_pic_id,L.new_pic_id,L.review_by),children:"Approve"})]})]})]})})}),(0,W.jsxs)(w.Z,{isOpen:c,toggle:K.bind(null),size:"md",fade:!1,centered:!0,children:[(0,W.jsx)(_.Z,{toggle:K.bind(null),children:"approve"===x?"Approval":"Revision"}),(0,W.jsxs)(xe.Z,{onSubmit:async e=>{e.preventDefault(),N(!0),await C.post("api/project/".concat(null===L||void 0===L?void 0:L.history_id,"/bast/approval"),{project_id:r,old_pic:j,notif_to:p,review_by:f,status:"approve"===x?"handover":"revision",note:m}).then((()=>{G(),(0,q.Z)("success","BAST has been ".concat("approve"===x?"approved":"reviewed"))})).catch((e=>console.log(e))),o(!1),N(!1)},children:[(0,W.jsx)(k.Z,{children:(0,W.jsx)(S.Z,{children:(0,W.jsx)(O.Z,{type:"textarea",id:"goals",name:"goals",placeholder:"Comment here..",rows:"3",required:!0,onChange:e=>u(e.target.value)})})}),(0,W.jsxs)(T.Z,{children:[(0,W.jsx)(Z.Z,{color:"secondary",outline:!0,onClick:K.bind(null),children:"Cancel"}),(0,W.jsx)(Z.Z,{type:"submit",color:"".concat("approve"===x?"success":"warning"),disabled:y,className:"d-flex gap-1 align-items-center",children:y?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(z.Z,{className:"me-2",size:"sm"}),"Sending..."]}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(F(),{icon:"send",style:{fontSize:"20px"}}),"approve"===x?"Approve":"Send"]})})]})]})]})]})},be=e=>{let{navActive:s,setTotalReview:t,setTotalBastReview:l}=e;return(0,W.jsxs)(W.Fragment,{children:[1===s&&(0,W.jsx)(Y,{}),2===s&&(0,W.jsx)(ne,{}),3===s&&(0,W.jsx)(de,{}),4===s&&(0,W.jsx)(oe,{}),5===s&&(0,W.jsx)(he,{setTotalReview:t}),6===s&&(0,W.jsx)(me,{}),7===s&&(0,W.jsx)(ge,{}),8===s&&(0,W.jsx)(fe,{setTotalBastReview:l})]})};t(35754);const ye=["Manager","Director"],Ne=["Director"],Ze=e=>{var s,t,d,c,o,x,h,m,u,j,v,p;let{navActive:g,setNavActive:f,totalReview:b,totalBastReview:y}=e;const[N,Z]=(0,l.useState)(""),[w,_]=(0,l.useState)(0),{auth:k}=(0,M.Z)(),{roles:S}=k.user,C=(0,U.Z)(),{projectId:O}=(0,D.UO)(),[T,z]=(0,l.useState)(!1),[R,A]=(0,l.useState)(),L=new URLSearchParams(window.location.search),B=L.get("to");(0,l.useEffect)((()=>{"review"===B?f(5):"handover"===B?f(6):"overview"===B?f(1):"activities"===B?f(7):"bast-review"===B&&f(8)}),[L]),(0,l.useEffect)((()=>{null!==S&&void 0!==S&&S.find((e=>ye.includes(e)))&&async function(){await C.get("api/task/".concat(O,"/level1/review")).then((e=>Z(e.data.data))).catch((e=>console.log(e)))}()}),[b]),(0,l.useEffect)((()=>{null!==S&&void 0!==S&&S.find((e=>Ne.includes(e)))&&async function(){await C.get("api/project/".concat(O,"/").concat(null===k||void 0===k?void 0:k.user.employe_id,"/bast/review")).then((e=>{_(e.data.data)})).catch((e=>console.log(e)))}()}),[y]);const{isLoading:q,data:G}=(0,I.a)({queryKey:["project-number"],queryFn:()=>C.get("api/project/".concat(O)).then((e=>e.data.data))});(0,l.useEffect)((()=>{"business"===(null===G||void 0===G?void 0:G.category)?A(!0):A(!1)}),[G]);const H=["Staff","Manager"],K=["Staff","Manager","Director"],V=["Manager","Director"],J=["Staff"],Y=["Director"],Q=["Manager","Director"],X=["Manager"];return(0,W.jsxs)(i.Z,{children:[(0,W.jsxs)(i.Z,{className:"d-flex justify-content-between gap-3 mb-3 align-items-center",children:[(0,W.jsxs)("div",{className:"project-nav overflow-auto",children:[(0,W.jsx)(P.rU,{className:"".concat(1===g&&"active"," text-muted fw-bold"),onClick:()=>f(1),children:"Overview"}),(null===k||void 0===k||null===(s=k.user)||void 0===s?void 0:s.roles.find((e=>H.includes(e))))&&(0,W.jsx)(P.rU,{className:"".concat(2===g&&"active"," text-muted fw-bold"),onClick:()=>f(2),children:"Board"}),(null===k||void 0===k||null===(t=k.user)||void 0===t?void 0:t.roles.find((e=>V.includes(e))))&&(0,W.jsx)(P.rU,{className:"".concat(7===g&&"active"," text-muted fw-bold"),onClick:()=>f(7),children:"Activities"}),(null===k||void 0===k||null===(d=k.user)||void 0===d?void 0:d.roles.find((e=>J.includes(e))))&&(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(P.rU,{className:"".concat(4===g&&"active"," text-muted fw-bold"),onClick:()=>f(4),children:"Files"})}),(null===k||void 0===k||null===(c=k.user)||void 0===c?void 0:c.roles.find((e=>Y.includes(e))))&&!(null!==k&&void 0!==k&&null!==(o=k.user)&&void 0!==o&&o.roles.includes("Presdir"))&&(0,W.jsxs)(P.rU,{className:"".concat(8===g&&"active"," text-muted fw-bold"),onClick:()=>f(8),children:["BAST Review"," ",(0,W.jsx)("div",{color:"danger",className:"count ".concat(w?"bg-danger text-white":"bg-light text-dark"),children:null===w||void 0===w?void 0:w.length})]}),(null===k||void 0===k||null===(x=k.user)||void 0===x?void 0:x.roles.find((e=>Q.includes(e))))&&(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(P.rU,{className:"".concat(5===g&&"active"," text-muted fw-bold"),onClick:()=>f(5),children:["Review"," ",(0,W.jsx)("div",{color:"danger",className:"count ".concat((null===N||void 0===N?void 0:N.length)>0?"bg-danger text-white":"bg-light text-dark"),children:null===N||void 0===N?void 0:N.length})]})}),(null===k||void 0===k||null===(h=k.user)||void 0===h?void 0:h.roles.find((e=>X.includes(e))))&&(0,W.jsxs)(P.rU,{className:"".concat(6===g&&"active"," text-muted fw-bold"),onClick:()=>f(6),children:["Handover"," "]}),(null===k||void 0===k||null===(m=k.user)||void 0===m?void 0:m.roles.find((e=>K.includes(e))))&&(0,W.jsx)(P.rU,{className:"".concat(3===g&&"active"," text-muted fw-bold"),onClick:()=>f(3),children:"Members"})]}),(0,W.jsx)("h3",{className:"fw-bold",children:q?"Loading..":null===G||void 0===G?void 0:G.project_number})]}),(0,W.jsx)(a.Z,{className:"rounded-3 mb-3",children:(0,W.jsx)(n.Z,{children:q?(0,W.jsx)("p",{children:"Loading..."}):(0,W.jsxs)(r.Z,{children:[(0,W.jsxs)(i.Z,{lg:"8",children:[(0,W.jsx)(r.Z,{md:"12",children:(0,W.jsx)("h5",{className:"fw-bold",children:null===G||void 0===G?void 0:G.project_name})}),R?(0,W.jsxs)(r.Z,{lg:"12",children:[(0,W.jsx)(i.Z,{sm:"12 mb-2",md:"4",children:(0,W.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,W.jsx)(F(),{icon:"manage_accounts",className:"text-muted",style:{fontSize:"28px"}}),(0,W.jsxs)("div",{className:"d-flex flex-column",children:[(0,W.jsx)("span",{className:"text-muted",style:{fontSize:"10px",marginBottom:"-4px"},children:"Partner"}),(0,W.jsx)("small",{className:"fw-bold",children:(null===G||void 0===G||null===(u=G.current_stage)||void 0===u?void 0:u.partner)||"-"})]})]})}),(0,W.jsx)(i.Z,{sm:"12 mb-2",md:"4",children:(0,W.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,W.jsx)(F(),{icon:"handshake",className:"text-muted",style:{fontSize:"28px"}}),(0,W.jsxs)("div",{className:"d-flex flex-column",children:[(0,W.jsx)("span",{className:"text-muted",style:{fontSize:"10px",marginBottom:"-4px"},children:"Schema"}),(0,W.jsx)("small",{className:"fw-bold",children:"jo"===(null===G||void 0===G||null===(j=G.current_stage)||void 0===j?void 0:j.schema)?"Join Operational":"jv"===(null===G||void 0===G||null===(v=G.current_stage)||void 0===v?void 0:v.schema)?"Join Venture":"-"})]})]})}),(0,W.jsx)(i.Z,{sm:"12 mb-2",md:"4",children:(0,W.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,W.jsx)(F(),{icon:"play_circle_outline",className:"text-muted",style:{fontSize:"28px"}}),(0,W.jsxs)("div",{className:"d-flex flex-column",children:[(0,W.jsx)("span",{className:"text-muted",style:{fontSize:"10px",marginBottom:"-4px"},children:"Phase"}),(0,W.jsx)("small",{className:"fw-bold",children:null===G||void 0===G||null===(p=G.current_stage)||void 0===p?void 0:p.phase})]})]})})]}):(0,W.jsx)(r.Z,{lg:"12",children:(0,W.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,W.jsx)(F(),{icon:"work_off",style:{fontSize:"18px"}}),(0,W.jsx)("small",{className:"fw-bold",children:"Non-business"})]})})]}),(0,W.jsx)(i.Z,{lg:"4",className:"d-flex align-items-center justify-content-end",children:(0,W.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,W.jsxs)("div",{className:"d-flex flex-column align-items-end",style:{marginLeft:"10px"},children:[(0,W.jsx)("small",{className:"fw-bold",children:null===G||void 0===G?void 0:G.pic_active.first_name}),(0,W.jsx)("span",{className:"fw-bold",style:{fontSize:"14px"},children:null===G||void 0===G?void 0:G.pic_active.organization_name})]}),(0,W.jsx)("img",{src:E,className:"rounded-circle",alt:"avatar",width:"35",height:"35"}),(null===k||void 0===k?void 0:k.user.first_name)===(null===G||void 0===G?void 0:G.created_by)?(0,W.jsxs)("div",{className:"action-table",children:[(0,W.jsx)("button",{type:"button",className:"btn d-flex",onClick:()=>z(!0),children:(0,W.jsx)(F(),{icon:"more_vert"})}),T&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:"action-overlay",onClick:()=>z(!1)}),(0,W.jsxs)("div",{className:"action-options",children:[(0,W.jsxs)(P.rU,{to:"/",className:"text-muted",children:[(0,W.jsx)(F(),{icon:"update"}),"Update"]}),(0,W.jsxs)("button",{type:"button",className:"text-muted fw-bold",onClick:()=>z(void 0),children:[(0,W.jsx)(F(),{icon:"delete"}),"Delete"]})]})]})]}):""]})})]})})})]})},we={task:["satu","dua"]},_e=(0,l.createContext)(we),ke=(e,s)=>"SET_TASK"===s.type?{task:s.payload}:e,Se=e=>{let{children:s}=e;const[t,i]=(0,l.useReducer)(ke,we);return(0,W.jsx)(_e.Provider,{value:{task:t.task,dispatch:i},children:s})},Ce=()=>{const{auth:e}=(0,M.Z)(),{roles:s}=null===e||void 0===e?void 0:e.user,[t,i]=(0,l.useState)(2),[a,n]=(0,l.useState)(0),[r,d]=(0,l.useState)(0);return(0,l.useEffect)((()=>{s.includes("Director")&&i(1)}),[s]),(0,W.jsx)(Se,{children:(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Ze,{navActive:t,setNavActive:i,totalReview:a,totalBastReview:r}),(0,W.jsx)(be,{navActive:t,setTotalReview:n,setTotalBastReview:d})]})})}},23606:(e,s,t)=>{"use strict";t.d(s,{Z:()=>l});const l=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e)},73830:(e,s,t)=>{"use strict";t.d(s,{Z:()=>u});var l=t(72791),i=t(52007),a=t.n(i),n=t(81694),r=t.n(n),d=t(9622),c=["className","cssModule","tag"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},o.apply(this,arguments)}function x(e,s){if(null==e)return{};var t,l,i=function(e,s){if(null==e)return{};var t,l,i={},a=Object.keys(e);for(l=0;l<a.length;l++)t=a[l],s.indexOf(t)>=0||(i[t]=e[t]);return i}(e,s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)t=a[l],s.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var h={className:a().string,cssModule:a().object,tag:d.iC};function m(e){var s=e.className,t=e.cssModule,i=e.tag,a=void 0===i?"div":i,n=x(e,c),h=(0,d.mx)(r()(s,"modal-footer"),t);return l.createElement(a,o({},n,{className:h}))}m.propTypes=h;const u=m},35754:()=>{},42459:()=>{},42480:()=>{}}]);
//# sourceMappingURL=633.9f1a767a.chunk.js.map