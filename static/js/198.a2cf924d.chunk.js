"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[198],{31043:(e,n,a)=>{a.d(n,{F:()=>l,Z:()=>i});a(72791);var s=a(65218),t=a(80184);const l=()=>(0,t.jsx)(s.x7,{toastOptions:{className:"",style:{}}}),i=(e,n)=>{((e,n)=>{"success"===e?s.ZP.success(n):"create"===e?(0,s.ZP)(n,{icon:"\ud83e\udd17"}):"start"===e?(0,s.ZP)("Lets get started, cheer up!",{icon:"\ud83d\udcaa"}):"done"===e?(0,s.ZP)("Horeee, task done!",{icon:"\ud83d\udc4f"}):s.ZP.error(n)})(e,n)}},22198:(e,n,a)=>{a.r(n),a.d(n,{default:()=>O});var s=a(72791),t=a(16354),l=a(43464),i=a(49037),d=a(63009),o=a(39773),r=a(19127),c=a(71513),u=a(46724),v=a(55211),h=a(94938),m=a(8118),p=a(76167),x=a(42976),j=a(55472),g=a(30690),Z=a.n(g),y=a(90235),b=a(43513),f=a(10829),_=a(57689),N=a(48089),w=a(23606),C=(a(87369),a(31043)),S=a(80184);const k=(0,y.ZP)(),O=()=>{var e,n,a,g,y,O,P,D,R,A,L,q,F,I,T,M,U,z;const E=(0,s.useRef)(null),{assetId:H}=(0,_.UO)(),[V,K]=(0,s.useState)(!1),[B,G]=(0,s.useState)(!1),[J,Q]=(0,s.useState)(!1),[W,X]=(0,s.useState)([]),[Y,$]=(0,s.useState)(),[ee,ne]=(0,s.useState)([]),[ae,se]=(0,s.useState)(""),[te,le]=(0,s.useState)(""),[ie,de]=(0,s.useState)(""),[oe,re]=(0,s.useState)(""),[ce,ue]=(0,s.useState)(""),[ve,he]=(0,s.useState)(""),[me,pe]=(0,s.useState)(new Date),xe=(0,N.Z)(),je=(0,f.h)({queries:[{queryKey:["assetDetail",0],queryFn:()=>xe.get("dapi/inven/".concat(H)).then((e=>e.data.data))},{queryKey:["assigne",1],queryFn:()=>xe.get("api/employe/assignment-list").then((e=>e.data.data))}]}),{refetch:ge}=je[0],Ze=()=>{G(!B)},ye=()=>{if(Q(!J),!J){var e,n,a;le(je[0].data.name),de(je[0].data.price),re(je[0].data.vendor),ue(je[0].data.acquisition),he(je[0].data.location);const s=[];null===(e=je[0])||void 0===e||null===(n=e.data)||void 0===n||null===(a=n.responsible_list)||void 0===a||a.map((e=>s.push({label:e.first_name,value:e.employe_id}))),X(s)}},be=(e,n)=>{if(K(!V),!V){$(e);const a=[];null===n||void 0===n||n.map((e=>a.push({label:e.first_name,value:e.employe_id}))),X(a)}},fe=e=>{X(e)},_e={weekday:"long",year:"numeric",month:"short",day:"numeric"},Ne=[{name:"Asset Number",selector:e=>e.asset_number},{name:"Responsible",selector:e=>{var n;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(t.Z,{color:"warning",onClick:()=>be(null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.res_list),className:"ms-2",children:"+ add"}),null===e||void 0===e||null===(n=e.res_list)||void 0===n?void 0:n.map((e=>(0,S.jsx)(t.Z,{color:"primary",className:"ms-2",children:null===e||void 0===e?void 0:e.first_name},null===e||void 0===e?void 0:e.employe_id)))]})}},{name:"Last Udpate",selector:e=>"".concat(new Date(e.updated_at).toLocaleDateString("en-us",_e)," ").concat(new Date(e.updated_at).toLocaleTimeString()," ")}];(0,s.useEffect)((()=>{ge()}),[H]);const we={id:0,responsible:""},Ce=e=>{var n;(n=e.target.files[0],new Promise((e=>{let a="";const s=new FileReader;s.readAsDataURL(n),s.onload=()=>{a=s.result,e(a)}}))).then((e=>{(async e=>{const n={id:H,file:e};await xe.post("dapi/inven/update/image",n).then((e=>{var n,a;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.success?((0,C.Z)("success","".concat(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)),ge(),pe(new Date)):(0,C.Z)("error","failed !!")})).catch((e=>{(0,C.Z)("error",e)}))})(e)})).catch((e=>{console.log(e)}))};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(l.Z,{children:(0,S.jsxs)(i.Z,{children:[(0,S.jsxs)(d.Z,{className:"content",children:[void 0!==(null===(e=je[0])||void 0===e||null===(n=e.data)||void 0===n?void 0:n.file)?(0,S.jsx)(o.Z,{sm:"12",lg:"5",className:" py-4 image",style:{backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundImage:"url('".concat("https://api.ptpema.co.id/","inven").concat(null===(a=je[0].data)||void 0===a?void 0:a.file,"?s=").concat(me,"')")},children:(0,S.jsx)("div",{className:"d-flex justify-content-end",children:(0,S.jsx)(r.Z,{color:"dark",outline:!0,className:"pb-0",size:"sm",onClick:()=>{E.current.click()},children:(0,S.jsx)(Z(),{icon:"photo_camera"})})})}):"",(0,S.jsxs)(o.Z,{sm:"12",lg:"7",className:"py-4 text",children:[(0,S.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,S.jsx)("h2",{className:"text-bold mb-0",children:null===(g=je[0].data)||void 0===g?void 0:g.name}),(0,S.jsx)(r.Z,{color:"dark",size:"sm",outline:!0,className:"pb-0",onClick:ye,children:(0,S.jsx)(Z(),{icon:"mode_edit"})})]}),(0,S.jsx)("hr",{}),(0,S.jsx)("table",{className:"w-100",children:(0,S.jsxs)("tbody",{children:[(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Parent Asset Number"}),(0,S.jsx)("td",{className:"text-end",children:null===(y=je[0].data)||void 0===y?void 0:y.asset_number})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Type"}),(0,S.jsx)("td",{className:"text-end",children:null===(O=je[0].data)||void 0===O?void 0:O.type_name})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Acquisition Price"}),(0,S.jsx)("td",{className:"text-end",children:(0,w.Z)(null===(P=je[0].data)||void 0===P?void 0:P.price)})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Current Asset Value"}),(0,S.jsx)("td",{className:"text-end",children:(0,w.Z)(null===(D=je[0].data)||void 0===D?void 0:D.current)})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Vendor"}),(0,S.jsx)("td",{className:"text-end",children:null===(R=je[0].data)||void 0===R?void 0:R.vendor})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Acquisition Time"}),(0,S.jsx)("td",{className:"text-end",children:null===(A=je[0].data)||void 0===A?void 0:A.acquisition})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Age "}),(0,S.jsx)("td",{className:"text-end",children:null===(L=je[0].data)||void 0===L?void 0:L.old})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Amount "}),(0,S.jsxs)("td",{className:"text-end",children:[null===(q=je[0].data)||void 0===q?void 0:q.amount," items"]})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Location "}),(0,S.jsx)("td",{className:"text-end",children:null===(F=je[0].data)||void 0===F?void 0:F.location})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Last Update"}),(0,S.jsx)("td",{className:"text-end",children:"".concat(new Date(null===(I=je[0].data)||void 0===I?void 0:I.updated_at).toLocaleDateString("en-us",_e)," ").concat(new Date(null===(T=je[0].data)||void 0===T?void 0:T.updated_at).toLocaleTimeString())})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Responsible "}),(0,S.jsx)("td",{className:"text-end",children:null===(M=je[0].data)||void 0===M||null===(U=M.responsible_list)||void 0===U?void 0:U.map((e=>(0,S.jsx)(t.Z,{color:"primary",className:"ms-2",children:null===e||void 0===e?void 0:e.first_name},null===e||void 0===e?void 0:e.employe_id)))})]})]})})]})]}),(0,S.jsx)(b.ZP,{className:"mt-0",columns:Ne,data:null===(z=je[0].data)||void 0===z?void 0:z.child,pagination:!0,selectableRows:!0,onSelectedRowsChange:e=>{let{selectedRows:n}=e;ne(n)},subHeader:!0,subHeaderComponent:(0,S.jsxs)(c.Z,{className:"me-auto mt-5",size:"sm",children:[(0,S.jsx)(r.Z,{className:"pb-0",outline:!0,disabled:0===(null===ee||void 0===ee?void 0:ee.length),onClick:async()=>{await xe.post("dapi/inven/child/del",{data:ee}).then((e=>{var n,a,s;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.success?((0,C.Z)("success","".concat(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)),ge(),ne([])):(0,C.Z)("error","".concat(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message))})).catch((e=>{be(),ne([]),(0,C.Z)("error",e)}))},children:(0,S.jsx)(Z(),{icon:"delete_forever"})}),(0,S.jsx)(r.Z,{outline:!0,color:"success",onClick:Ze,children:"+ Add Child"})]})})]})}),(0,S.jsxs)(u.Z,{isOpen:V,toggle:be,children:[(0,S.jsx)(v.Z,{toggle:be,children:"Add Another Employee"}),(0,S.jsxs)(h.Z,{children:[(0,S.jsx)(j.ZP,{components:k,isMulti:!0,value:W,options:je[1].data,onChange:fe,isClearable:W.some((e=>!e.isFixed))}),(0,S.jsx)("div",{className:"d-grid gap-2 mt-3",children:(0,S.jsx)(r.Z,{onClick:()=>(async()=>{const e=[];null===W||void 0===W||W.map((n=>e.push("//".concat(n.value,"//")))),we.id=Y,we.responsible=e.toLocaleString(),await xe.post("dapi/inven/child/update",we).then((e=>{var n;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.success&&(be(),ge())})).catch((e=>{be(),(0,C.Z)("error",e)}))})(),children:"Update Data"})})]})]}),(0,S.jsxs)(u.Z,{isOpen:B,toggle:Ze,children:[(0,S.jsx)(v.Z,{toggle:Ze,children:"Set Number Of Child"}),(0,S.jsxs)(h.Z,{children:[(0,S.jsx)(m.Z,{type:"number",min:"1",onChange:e=>se(e.target.value)}),(0,S.jsx)("div",{className:"d-grid gap-2 mt-3",children:(0,S.jsx)(r.Z,{onClick:()=>(async()=>{const e={id_parent:H,amount:ae};await xe.post("dapi/inven/child/add",e).then((e=>{var n;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.success&&(Ze(),ge(),(0,C.Z)("success","added succesfully !"))})).catch((e=>{Ze(),(0,C.Z)("error",e)}))})(),children:"Add Childs"})})]})]}),(0,S.jsxs)(u.Z,{isOpen:J,toggle:ye,children:[(0,S.jsx)(v.Z,{toggle:ye,children:"New Inventory Data"}),(0,S.jsxs)(h.Z,{children:[(0,S.jsxs)(p.Z,{children:[(0,S.jsx)(x.Z,{for:"in_name",children:"Inventory Name"}),(0,S.jsx)(m.Z,{id:"in_name",name:"in_name",type:"text",onChange:e=>le(e.target.value),value:te})]}),(0,S.jsxs)(p.Z,{children:[(0,S.jsx)(x.Z,{for:"in_harga_beli",children:"Purchase Price"}),(0,S.jsx)(m.Z,{id:"in_harga_beli",name:"in_harga_beli",type:"number",onChange:e=>de(e.target.value),value:ie})]}),(0,S.jsxs)(p.Z,{children:[(0,S.jsxs)(x.Z,{for:"in_vendor",children:["Vendor ",(0,S.jsx)("small",{children:"(optional)"})]}),(0,S.jsx)(m.Z,{id:"in_vendor",name:"in_vendor",type:"text",accept:"image/*",onChange:e=>re(e.target.value),value:oe})]}),(0,S.jsxs)(p.Z,{children:[(0,S.jsx)(x.Z,{for:"time",children:"Acquisition Time"}),(0,S.jsx)(m.Z,{id:"time",name:"date",placeholder:"date placeholder",type:"date",onChange:e=>ue(e.target.value),value:ce})]}),(0,S.jsxs)(p.Z,{children:[(0,S.jsx)(x.Z,{for:"in_location",children:"Detail Location"}),(0,S.jsx)(m.Z,{id:"in_location",name:"in_location",type:"textarea",onChange:e=>he(e.target.value),value:ve})]}),(0,S.jsxs)(p.Z,{children:[(0,S.jsx)(x.Z,{for:"in_harga_beli",children:"Responsible"}),(0,S.jsx)(j.ZP,{components:k,isMulti:!0,value:W,options:je[1].data,onChange:fe})]}),(0,S.jsx)(p.Z,{children:(0,S.jsx)("div",{className:"d-grid gap-2 mt-4",children:(0,S.jsx)(r.Z,{type:"submit",onClick:async()=>{const e=[];null===W||void 0===W||W.map((n=>e.push("//".concat(n.value,"//"))));const n={id:H,name:te,price:ie,vendor:oe,acquisition:ce,location:ve,responsible:e.toLocaleString()};await xe.post("dapi/inven/update",n).then((e=>{var n,a,s;(ye(),null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.success)?((0,C.Z)("success","".concat(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)),ge()):(0,C.Z)("error","".concat(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message))})).catch((e=>{ye(),(0,C.Z)("error",e)})),console.log(n)},children:"Save Data"})})})]})]}),(0,S.jsx)("input",{style:{display:"none"},ref:E,type:"file",accept:"image/*",onChange:e=>Ce(e)})]})}},23606:(e,n,a)=>{a.d(n,{Z:()=>s});const s=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e)},16354:(e,n,a)=>{a.d(n,{Z:()=>m});var s=a(72791),t=a(52007),l=a.n(t),i=a(81694),d=a.n(i),o=a(9622),r=["className","cssModule","color","innerRef","pill","tag"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},c.apply(this,arguments)}function u(e,n){if(null==e)return{};var a,s,t=function(e,n){if(null==e)return{};var a,s,t={},l=Object.keys(e);for(s=0;s<l.length;s++)a=l[s],n.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)a=l[s],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var v={children:l().node,className:l().string,color:l().string,cssModule:l().object,innerRef:l().oneOfType([l().object,l().func,l().string]),pill:l().bool,tag:o.iC};function h(e){var n=e.className,a=e.cssModule,t=e.color,l=void 0===t?"secondary":t,i=e.innerRef,v=e.pill,h=void 0!==v&&v,m=e.tag,p=void 0===m?"span":m,x=u(e,r),j=(0,o.mx)(d()(n,"badge","bg-"+l,!!h&&"rounded-pill"),a);return x.href&&"span"===p&&(p="a"),s.createElement(p,c({},x,{className:j,ref:i}))}h.propTypes=v;const m=h},87369:()=>{}}]);
//# sourceMappingURL=198.a2cf924d.chunk.js.map