(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[534],{79463:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s(72791),i=s(11087),a=s(30690),l=s.n(a),r=s(80184);const o=e=>{let{menuOptions:t,taskId:s,status:a,action:o,progress:c}=e;const[d,u]=(0,n.useState)(!1),h=()=>{u(!1),o()};return(0,r.jsxs)("div",{className:"action",children:[(0,r.jsx)("button",{type:"button",className:"btn-option ".concat(d&&"active"),onClick:()=>u(!0),children:(0,r.jsx)(l(),{icon:"more_vert"})}),d&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"action-overlay",onClick:()=>u(!1)}),(0,r.jsx)("div",{className:"action-options",children:null===t||void 0===t?void 0:t.options.map((e=>(0,r.jsx)("div",{children:"button"===e.type?(0,r.jsxs)("button",{type:"button",className:"text-muted",onClick:()=>{return t=e.to,o(s,t),void u(!1);var t},disabled:e.to===a||2===e.to&&0===a||2===e.to&&4===a||0===e.to&&4===a||2===e.to&&100!==c,children:[e.icon,e.label]}):"link"===e.type?(0,r.jsxs)(i.rU,{className:"text-muted",onClick:e.to,children:[e.icon,e.label]}):(0,r.jsx)("div",{className:"action-del",children:(0,r.jsxs)("button",{type:"button",onClick:h,children:[(0,r.jsx)(l(),{icon:"delete_outline"}),"Delete"]})})},e.id)))})]})]})}},31043:(e,t,s)=>{"use strict";s.d(t,{F:()=>a,Z:()=>l});s(72791);var n=s(65218),i=s(80184);const a=()=>(0,i.jsx)(n.x7,{toastOptions:{className:"",style:{}}}),l=(e,t)=>{((e,t)=>{"success"===e?n.ZP.success(t):"create"===e?(0,n.ZP)(t,{icon:"\ud83e\udd17"}):"start"===e?(0,n.ZP)("Lets get started, cheer up!",{icon:"\ud83d\udcaa"}):"done"===e?(0,n.ZP)("Horeee, task done!",{icon:"\ud83d\udc4f"}):n.ZP.error(t)})(e,t)}},24944:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});s(72791);var n=s(80184);const i=e=>{let{data:t,color:s}=e;return(0,n.jsx)("div",{className:"flex-wrapper",children:(0,n.jsx)("div",{className:"single-chart",children:(0,n.jsxs)("svg",{viewBox:"0 0 36 36",className:"circular-chart ".concat(100===t?"green":100!==t?"blue":s),children:[(0,n.jsx)("path",{className:"circle-bg",d:"M18 2.0845\r a 15.9155 15.9155 0 0 1 0 31.831\r a 15.9155 15.9155 0 0 1 0 -31.831"}),(0,n.jsx)("path",{className:"circle",strokeDasharray:"".concat(t,", 100"),d:"M18 2.0845\r a 15.9155 15.9155 0 0 1 0 31.831\r a 15.9155 15.9155 0 0 1 0 -31.831"}),100===t?(0,n.jsx)("text",{x:"18",y:"22.35",className:"percentage",style:{fontSize:"14px"},children:"\u2714"}):(0,n.jsxs)("text",{x:"18",y:"22.35",className:"percentage",children:[t,"%"]})]})})})}},14097:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s(72791),i=s(46272),a=s(80184);const l=i.mM.create({body:{paddingTop:35,paddingBottom:65,paddingHorizontal:35},title:{fontSize:10,textAlign:"center"},text:{margin:10,fontSize:10,textAlign:"justify"},image:{marginVertical:4,marginHorizontal:15,width:50,height:50},header:{fontSize:10,marginBottom:5,textAlign:"left",color:"#3f3f3f",fontWeight:"bold"},pageNumber:{position:"absolute",fontSize:10,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},printAt:{position:"absolute",fontSize:8,bottom:30,left:35,right:0,textAlign:"left",color:"grey"},table:{display:"table",width:"auto",borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0,color:"#3f3f3f"},tableRow:{margin:"auto",flexDirection:"row"},tableCol:{borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCell:{marginTop:3,marginBottom:3,marginLeft:3,marginRight:3,fontSize:10}}),r=()=>{const e=new Date;return"".concat(e.toDateString(),", ").concat(e.toLocaleString().split(",")[1])},o=e=>{let{projectTitle:t,data:s}=e;return(0,a.jsx)(i.BB,{children:(0,a.jsxs)(i.T3,{style:{...l.body,backgroundColor:"#fff"},children:[(0,a.jsxs)(i.xv,{style:l.header,fixed:!0,children:["Project : ",null===t||void 0===t?void 0:t.project_name]}),(0,a.jsxs)(i.xv,{style:l.header,fixed:!0,children:["Partner : ",null===t||void 0===t?void 0:t.partner]}),(0,a.jsxs)(i.xv,{style:l.header,fixed:!0,children:["Division : ",null===t||void 0===t?void 0:t.division]}),(0,a.jsxs)(i.xv,{style:l.header,fixed:!0,children:["Phase : ",null===t||void 0===t?void 0:t.phase]}),(0,a.jsxs)(i.xv,{style:l.header,fixed:!0,children:["Schema : ","jo"===(null===t||void 0===t?void 0:t.schema)?"Join Operational":"Join Venture"]}),(0,a.jsxs)(i.G7,{style:l.table,children:[(0,a.jsxs)(i.G7,{style:l.tableRow,children:[(0,a.jsx)(i.G7,{style:{...l.tableCol,width:"5%"},children:(0,a.jsx)(i.xv,{style:l.tableCell,children:"No."})}),(0,a.jsx)(i.G7,{style:{...l.tableCol,width:"35%"},children:(0,a.jsx)(i.xv,{style:l.tableCell,children:"Task Title"})}),(0,a.jsx)(i.G7,{style:{...l.tableCol,width:"15%"},children:(0,a.jsx)(i.xv,{style:l.tableCell,children:"Status"})}),(0,a.jsx)(i.G7,{style:{...l.tableCol,width:"15%"},children:(0,a.jsx)(i.xv,{style:l.tableCell,children:"Deadline"})}),(0,a.jsx)(i.G7,{style:{...l.tableCol,width:"30%"},children:(0,a.jsx)(i.xv,{style:l.tableCell,children:"PIC"})})]}),null===s||void 0===s?void 0:s.map(((e,t)=>(0,a.jsxs)(n.Fragment,{children:[(0,a.jsxs)(i.G7,{style:l.tableRow,children:[(0,a.jsx)(i.G7,{style:{...l.tableCol,width:"5%"},children:(0,a.jsx)(i.xv,{style:{...l.tableCell,textAlign:"center"},children:t+1})}),(0,a.jsx)(i.G7,{style:{...l.tableCol,width:"35%"},children:(0,a.jsx)(i.xv,{style:l.tableCell,children:e.task_title})}),(0,a.jsx)(i.G7,{style:{...l.tableCol,width:"15%"},children:(0,a.jsx)(i.xv,{style:{...l.tableCell,fontSize:"10px"},children:0===e.status?"To do":1===e.status?"In progress":2===e.status?"Under review":3===e.status?"Approved":"Revision"})}),(0,a.jsx)(i.G7,{style:{...l.tableCol,width:"15%"},children:(0,a.jsx)(i.xv,{style:l.tableCell,children:e.end_date})}),(0,a.jsx)(i.G7,{style:{...l.tableCol,width:"30%"},children:e.pics.map((e=>(0,a.jsx)(i.xv,{style:l.tableCell,children:e.first_name},e.id)))})]}),e.subtasks.map((e=>(0,a.jsxs)(i.G7,{style:l.tableRow,children:[(0,a.jsx)(i.G7,{style:{...l.tableCol,width:"5%"},children:(0,a.jsx)(i.xv,{style:l.tableCell})}),(0,a.jsx)(i.G7,{style:{...l.tableCol,width:"35%"},children:(0,a.jsx)(i.xv,{style:l.tableCell,children:e.task_title})}),(0,a.jsx)(i.G7,{style:{...l.tableCol,width:"15%"},children:(0,a.jsx)(i.xv,{style:l.tableCell,children:"-"})}),(0,a.jsx)(i.G7,{style:{...l.tableCol,width:"15%"},children:(0,a.jsx)(i.xv,{style:l.tableCell,children:e.end_date})}),(0,a.jsx)(i.G7,{style:{...l.tableCol,width:"30%"},children:e.pics.map((e=>(0,a.jsx)(i.xv,{style:l.tableCell,children:e.first_name},e.id)))})]},e.task_id)))]},e.task_id)))]}),(0,a.jsx)(i.xv,{style:l.pageNumber,render:e=>{let{pageNumber:t,totalPages:s}=e;return"".concat(t," / ").concat(s)}}),(0,a.jsx)(i.xv,{style:l.printAt,render:r})]})})}},44758:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ht});var n=s(72791),i=s(39773),a=s(43464),l=s(49037),r=s(63009),o=s(14448),c=s(52007),d=s.n(c),u=s(81694),h=s.n(u),m=s(9622),p=["children","className","barClassName","cssModule","value","min","max","animated","striped","color","bar","multi","tag","style","barStyle","barAriaValueText","barAriaLabelledBy"];function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},x.apply(this,arguments)}function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){j(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function j(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function g(e,t){if(null==e)return{};var s,n,i=function(e,t){if(null==e)return{};var s,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)s=a[n],t.indexOf(s)>=0||(i[s]=e[s]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)s=a[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i}var b={animated:d().bool,bar:d().bool,barAriaLabelledBy:d().string,barAriaValueText:d().string,barClassName:d().string,barStyle:d().object,children:d().node,className:d().string,cssModule:d().object,color:d().string,max:d().oneOfType([d().string,d().number]),min:d().oneOfType([d().string,d().number]),multi:d().bool,striped:d().bool,style:d().object,tag:m.iC,value:d().oneOfType([d().string,d().number])};function y(e){var t=e.children,s=e.className,i=e.barClassName,a=e.cssModule,l=e.value,r=void 0===l?0:l,o=e.min,c=void 0===o?0:o,d=e.max,u=void 0===d?100:d,v=e.animated,j=e.striped,b=e.color,y=e.bar,N=e.multi,_=e.tag,w=void 0===_?"div":_,k=e.style,Z=void 0===k?{}:k,O=e.barStyle,S=void 0===O?{}:O,C=e.barAriaValueText,T=e.barAriaLabelledBy,P=g(e,p),E=(0,m.He)(r)/(0,m.He)(u)*100,D=(0,m.mx)(h()(s,"progress"),a),R={className:(0,m.mx)(h()("progress-bar",y&&s||i,v?"progress-bar-animated":null,b?"bg-".concat(b):null,j||v?"progress-bar-striped":null),a),style:f(f(f({},y?Z:{}),S),{},{width:"".concat(E,"%")}),role:"progressbar","aria-valuenow":r,"aria-valuemin":c,"aria-valuemax":u,"aria-valuetext":C,"aria-labelledby":T,children:t};return y?n.createElement(w,x({},P,R)):n.createElement(w,x({},P,{style:Z,className:D}),N?t:n.createElement("div",R))}y.propTypes=b;const N=y;var _=s(19127),w=s(46724),k=s(55211),Z=s(94938),O=s(76167),S=s(42976),C=s(8118),T=s(73830),P=s(4828),E=s(76807),D=s(30690),R=s.n(D),z=s(57689),F=s(11087),A=s(55472),I=s(90235),L=s(87681),M=s(48089),U=s(90838),B=s(17834),W=s(31043),q=s(54164),H=s(21555),K=s(6777);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}var V=["cssModule","children","isOpen","flip","target","offset","fallbackPlacements","placementPrefix","arrowClassName","hideArrow","popperClassName","tag","container","modifiers","strategy","boundariesElement","onClosed","fade","transition","placement"];function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},J.apply(this,arguments)}function Y(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return $(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return $(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}function Q(e,t){if(null==e)return{};var s,n,i=function(e,t){if(null==e)return{};var s,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)s=a[n],t.indexOf(s)>=0||(i[s]=e[s]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)s=a[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i}function X(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ee(e,t){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ee(e,t)}function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,n=ne(e);if(t){var i=ne(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return function(e,t){if(t&&("object"===G(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return se(e)}(this,s)}}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ne(e)}function ie(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ae(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(s),!0).forEach((function(t){le(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ie(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function le(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var re={children:d().oneOfType([d().node,d().func]).isRequired,popperClassName:d().string,placement:d().string,placementPrefix:d().string,arrowClassName:d().string,hideArrow:d().bool,tag:m.iC,isOpen:d().bool,cssModule:d().object,offset:d().arrayOf(d().number),fallbackPlacements:d().array,flip:d().bool,container:m.qW,target:m.qW.isRequired,modifiers:d().array,strategy:d().string,boundariesElement:d().oneOfType([d().string,m.n5]),onClosed:d().func,fade:d().bool,transition:d().shape(K.Z.propTypes)},oe={boundariesElement:"scrollParent",placement:"auto",hideArrow:!1,isOpen:!1,offset:[0,0],flip:!0,container:"body",modifiers:[],onClosed:function(){},fade:!0,transition:ae({},K.Z.defaultProps)},ce=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ee(e,t)}(l,e);var t,s,i,a=te(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).setTargetNode=t.setTargetNode.bind(se(t)),t.getTargetNode=t.getTargetNode.bind(se(t)),t.getRef=t.getRef.bind(se(t)),t.onClosed=t.onClosed.bind(se(t)),t.state={isOpen:e.isOpen},t}return t=l,i=[{key:"getDerivedStateFromProps",value:function(e,t){return e.isOpen&&!t.isOpen?{isOpen:e.isOpen}:null}}],(s=[{key:"componentDidUpdate",value:function(){this._element&&this._element.childNodes&&this._element.childNodes[0]&&this._element.childNodes[0].focus&&this._element.childNodes[0].focus()}},{key:"onClosed",value:function(){this.props.onClosed(),this.setState({isOpen:!1})}},{key:"getTargetNode",value:function(){return this.targetNode}},{key:"getContainerNode",value:function(){return(0,m.U9)(this.props.container)}},{key:"getRef",value:function(e){this._element=e}},{key:"setTargetNode",value:function(e){this.targetNode="string"===typeof e?(0,m.U9)(e):e}},{key:"renderChildren",value:function(){var e=this.props,t=e.cssModule,s=e.children,i=e.isOpen,a=e.flip,l=(e.target,e.offset),r=e.fallbackPlacements,o=e.placementPrefix,c=e.arrowClassName,d=e.hideArrow,u=e.popperClassName,p=e.tag,x=(e.container,e.modifiers),v=e.strategy,f=e.boundariesElement,j=(e.onClosed,e.fade),g=e.transition,b=e.placement,y=Q(e,V),N=(0,m.mx)(h()("arrow",c),t),_=(0,m.mx)(h()(u,o?"".concat(o,"-auto"):""),this.props.cssModule),w=x.map((function(e){return e.name})),k=[{name:"offset",options:{offset:l}},{name:"flip",enabled:a,options:{fallbackPlacements:r}},{name:"preventOverflow",options:{boundary:f}}].filter((function(e){return!w.includes(e.name)})),Z=[].concat(Y(k),Y(x)),O=ae(ae(ae({},K.Z.defaultProps),g),{},{baseClass:j?g.baseClass:"",timeout:j?g.timeout:0});return n.createElement(K.Z,J({},O,y,{in:i,onExited:this.onClosed,tag:p}),n.createElement(H.r,{referenceElement:this.targetNode,modifiers:Z,placement:b,strategy:v},(function(e){var t=e.ref,i=e.style,a=e.placement,l=e.isReferenceHidden,r=e.arrowProps,o=e.update;return n.createElement("div",{ref:t,style:i,className:_,"data-popper-placement":a,"data-popper-reference-hidden":l?"true":void 0},"function"===typeof s?s({update:o}):s,!d&&n.createElement("span",{ref:r.ref,className:N,style:r.style}))})))}},{key:"render",value:function(){return this.setTargetNode(this.props.target),this.state.isOpen?"inline"===this.props.container?this.renderChildren():q.createPortal(n.createElement("div",{ref:this.getRef},this.renderChildren()),this.getContainerNode()):null}}])&&X(t.prototype,s),i&&X(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(n.Component);ce.propTypes=re,ce.defaultProps=oe;const de=ce;function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},ue.apply(this,arguments)}function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function me(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}function xe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,n=fe(e);if(t){var i=fe(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return function(e,t){if(t&&("object"===he(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ve(e)}(this,s)}}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e){return fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fe(e)}var je={children:d().oneOfType([d().node,d().func]),placement:d().oneOf(m.JL),target:m.qW.isRequired,container:m.qW,isOpen:d().bool,disabled:d().bool,hideArrow:d().bool,boundariesElement:d().oneOfType([d().string,m.n5]),className:d().string,innerClassName:d().string,arrowClassName:d().string,popperClassName:d().string,cssModule:d().object,toggle:d().func,autohide:d().bool,placementPrefix:d().string,delay:d().oneOfType([d().shape({show:d().number,hide:d().number}),d().number]),modifiers:d().array,strategy:d().string,offset:d().arrayOf(d().number),innerRef:d().oneOfType([d().func,d().string,d().object]),trigger:d().string,fade:d().bool,flip:d().bool},ge={show:0,hide:50},be={isOpen:!1,hideArrow:!1,autohide:!1,delay:ge,toggle:function(){},trigger:"click",fade:!0};function ye(e,t){return t&&(e===t||t.contains(e))}function Ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t&&t.length&&t.filter((function(t){return ye(e,t)}))[0]}var _e=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(l,e);var t,s,i,a=xe(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e))._targets=[],t.currentTargetElement=null,t.addTargetEvents=t.addTargetEvents.bind(ve(t)),t.handleDocumentClick=t.handleDocumentClick.bind(ve(t)),t.removeTargetEvents=t.removeTargetEvents.bind(ve(t)),t.toggle=t.toggle.bind(ve(t)),t.showWithDelay=t.showWithDelay.bind(ve(t)),t.hideWithDelay=t.hideWithDelay.bind(ve(t)),t.onMouseOverTooltipContent=t.onMouseOverTooltipContent.bind(ve(t)),t.onMouseLeaveTooltipContent=t.onMouseLeaveTooltipContent.bind(ve(t)),t.show=t.show.bind(ve(t)),t.hide=t.hide.bind(ve(t)),t.onEscKeyDown=t.onEscKeyDown.bind(ve(t)),t.getRef=t.getRef.bind(ve(t)),t.state={isOpen:e.isOpen},t._isMounted=!1,t}return t=l,i=[{key:"getDerivedStateFromProps",value:function(e,t){return e.isOpen&&!t.isOpen?{isOpen:e.isOpen}:null}}],(s=[{key:"componentDidMount",value:function(){this._isMounted=!0,this.updateTarget()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.removeTargetEvents(),this._targets=null,this.clearShowTimeout(),this.clearHideTimeout()}},{key:"handleDocumentClick",value:function(e){var t=this.props.trigger.split(" ");t.indexOf("legacy")>-1&&(this.props.isOpen||Ne(e.target,this._targets))?(this._hideTimeout&&this.clearHideTimeout(),this.props.isOpen&&!ye(e.target,this._popover)?this.hideWithDelay(e):this.props.isOpen||this.showWithDelay(e)):t.indexOf("click")>-1&&Ne(e.target,this._targets)&&(this._hideTimeout&&this.clearHideTimeout(),this.props.isOpen?this.hideWithDelay(e):this.showWithDelay(e))}},{key:"onMouseOverTooltipContent",value:function(){this.props.trigger.indexOf("hover")>-1&&!this.props.autohide&&(this._hideTimeout&&this.clearHideTimeout(),this.state.isOpen&&!this.props.isOpen&&this.toggle())}},{key:"onMouseLeaveTooltipContent",value:function(e){this.props.trigger.indexOf("hover")>-1&&!this.props.autohide&&(this._showTimeout&&this.clearShowTimeout(),e.persist(),this._hideTimeout=setTimeout(this.hide.bind(this,e),this.getDelay("hide")))}},{key:"onEscKeyDown",value:function(e){"Escape"===e.key&&this.hide(e)}},{key:"getRef",value:function(e){var t=this.props.innerRef;t&&("function"===typeof t?t(e):"object"===he(t)&&(t.current=e)),this._popover=e}},{key:"getDelay",value:function(e){var t=this.props.delay;return"object"===he(t)?isNaN(t[e])?ge[e]:t[e]:t}},{key:"getCurrentTarget",value:function(e){if(!e)return null;var t=this._targets.indexOf(e);return t>=0?this._targets[t]:this.getCurrentTarget(e.parentElement)}},{key:"show",value:function(e){if(!this.props.isOpen){if(this.clearShowTimeout(),this.currentTargetElement=e?e.currentTarget||this.getCurrentTarget(e.target):null,e&&e.composedPath&&"function"===typeof e.composedPath){var t=e.composedPath();this.currentTargetElement=t&&t[0]||this.currentTargetElement}this.toggle(e)}}},{key:"showWithDelay",value:function(e){this._hideTimeout&&this.clearHideTimeout(),this._showTimeout=setTimeout(this.show.bind(this,e),this.getDelay("show"))}},{key:"hide",value:function(e){this.props.isOpen&&(this.clearHideTimeout(),this.currentTargetElement=null,this.toggle(e))}},{key:"hideWithDelay",value:function(e){this._showTimeout&&this.clearShowTimeout(),this._hideTimeout=setTimeout(this.hide.bind(this,e),this.getDelay("hide"))}},{key:"clearShowTimeout",value:function(){clearTimeout(this._showTimeout),this._showTimeout=void 0}},{key:"clearHideTimeout",value:function(){clearTimeout(this._hideTimeout),this._hideTimeout=void 0}},{key:"addEventOnTargets",value:function(e,t,s){this._targets.forEach((function(n){n.addEventListener(e,t,s)}))}},{key:"removeEventOnTargets",value:function(e,t,s){this._targets.forEach((function(n){n.removeEventListener(e,t,s)}))}},{key:"addTargetEvents",value:function(){if(this.props.trigger){var e=this.props.trigger.split(" ");-1===e.indexOf("manual")&&((e.indexOf("click")>-1||e.indexOf("legacy")>-1)&&document.addEventListener("click",this.handleDocumentClick,!0),this._targets&&this._targets.length&&(e.indexOf("hover")>-1&&(this.addEventOnTargets("mouseover",this.showWithDelay,!0),this.addEventOnTargets("mouseout",this.hideWithDelay,!0)),e.indexOf("focus")>-1&&(this.addEventOnTargets("focusin",this.show,!0),this.addEventOnTargets("focusout",this.hide,!0)),this.addEventOnTargets("keydown",this.onEscKeyDown,!0)))}}},{key:"removeTargetEvents",value:function(){this._targets&&(this.removeEventOnTargets("mouseover",this.showWithDelay,!0),this.removeEventOnTargets("mouseout",this.hideWithDelay,!0),this.removeEventOnTargets("keydown",this.onEscKeyDown,!0),this.removeEventOnTargets("focusin",this.show,!0),this.removeEventOnTargets("focusout",this.hide,!0)),document.removeEventListener("click",this.handleDocumentClick,!0)}},{key:"updateTarget",value:function(){var e=(0,m.U9)(this.props.target,!0);e!==this._targets&&(this.removeTargetEvents(),this._targets=e?Array.from(e):[],this.currentTargetElement=this.currentTargetElement||this._targets[0],this.addTargetEvents())}},{key:"toggle",value:function(e){return this.props.disabled||!this._isMounted?e&&e.preventDefault():this.props.toggle(e)}},{key:"render",value:function(){var e=this;this.props.isOpen&&this.updateTarget();var t=this.currentTargetElement||this._targets[0];if(!t)return null;var s=this.props,i=s.className,a=s.cssModule,l=s.innerClassName,r=s.isOpen,o=s.hideArrow,c=s.boundariesElement,d=s.placement,u=s.placementPrefix,h=s.arrowClassName,p=s.popperClassName,x=s.container,v=s.modifiers,f=s.strategy,j=s.offset,g=s.fade,b=s.flip,y=s.children,N=(0,m.CE)(this.props,Object.keys(je)),_=(0,m.mx)(p,a),w=(0,m.mx)(l,a);return n.createElement(de,{className:i,target:t,isOpen:r,hideArrow:o,boundariesElement:c,placement:d,placementPrefix:u,arrowClassName:h,popperClassName:_,container:x,modifiers:v,strategy:f,offset:j,cssModule:a,fade:g,flip:b},(function(t){var s=t.update;return n.createElement("div",ue({},N,{ref:e.getRef,className:w,role:"tooltip",onMouseOver:e.onMouseOverTooltipContent,onMouseLeave:e.onMouseLeaveTooltipContent,onKeyDown:e.onEscKeyDown}),"function"===typeof y?y({update:s}):y)}))}}])&&me(t.prototype,s),i&&me(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(n.Component);_e.propTypes=je,_e.defaultProps=be;const we=_e;function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},ke.apply(this,arguments)}function Ze(e){var t=h()("tooltip-arrow",e.arrowClassName),s=h()("tooltip","show",e.popperClassName),i=h()("tooltip-inner",e.innerClassName);return n.createElement(we,ke({},e,{arrowClassName:t,popperClassName:s,innerClassName:i}))}Ze.propTypes=je,Ze.defaultProps={placement:"top",autohide:!0,placementPrefix:"bs-tooltip",trigger:"hover focus"};const Oe=Ze;var Se=s(80184);const Ce=e=>{const{title:t,id:s}=e,[i,a]=(0,n.useState)(!1);return(0,Se.jsx)("span",{children:(0,Se.jsx)(Oe,{placement:"top",isOpen:i,target:"tooltip-".concat(s),toggle:()=>a(!i),children:t})})};var Te=s(87535),Pe=s(23606);const Ee=(0,I.ZP)(),De=e=>{const t=(new Date).toLocaleString().split(",")[0],s=t.split("/")[1],n=t.split("/")[0],i=t.split("/")[2],a="".concat(i,"-").concat(n,"-").concat(s),l=new Date(a);return(new Date(e).getTime()-l.getTime())/864e5},Re=()=>{var e,t,s,c,d;const{auth:u}=(0,B.Z)(),{projectId:h}=(0,z.UO)(),[m,p]=(0,n.useState)(),[x,v]=(0,n.useState)(!1),[f,j]=(0,n.useState)(),[g,b]=(0,n.useState)(),[y,D]=(0,n.useState)(!1),[I,q]=(0,n.useState)([]),[H,K]=(0,n.useState)(void 0),[G,V]=(0,n.useState)(""),[J,Y]=(0,n.useState)(),[$,Q]=(0,n.useState)([]),[X,ee]=(0,n.useState)(void 0),[te,se]=(0,n.useState)({todo:0,inprogress:0,underReview:0,done:0}),ne=(0,M.Z)(),ie=()=>{v(!x)},{isLoading:ae,error:le,data:re}=(0,E.a)({queryKey:["overview"],queryFn:()=>ne.get("api/project/".concat(h)).then((e=>e.data.data))});(0,n.useEffect)((()=>{var e,t,s,n,i;const a=null===re||void 0===re||null===(e=re.task_by_active_user)||void 0===e?void 0:e.filter((e=>0===parseInt(e.status,10)||4===parseInt(e.status,10))),l=null===re||void 0===re||null===(t=re.task_by_active_user)||void 0===t?void 0:t.filter((e=>1===parseInt(e.status,10))),r=null===re||void 0===re||null===(s=re.task_by_active_user)||void 0===s?void 0:s.filter((e=>2===parseInt(e.status,10)||3===parseInt(e.status,10))),o=null===re||void 0===re||null===(n=re.task_by_active_user)||void 0===n?void 0:n.filter((e=>2===parseInt(e.status,10)));se({todo:null===a||void 0===a?void 0:a.length,inprogress:null===l||void 0===l?void 0:l.length,underReview:null===o||void 0===o?void 0:o.length,done:null===r||void 0===r?void 0:r.length}),K(null===re||void 0===re||null===(i=re.current_stage)||void 0===i?void 0:i.phase_id),"business"===(null===re||void 0===re?void 0:re.category)?Y(!0):Y(!1)}),[re]);const oe=async()=>{await ne.get("api/project/".concat(h,"/history")).then((e=>p(e.data.data))).catch((e=>console.log(e)))};(0,n.useEffect)((()=>{oe()}),[h]),(0,n.useEffect)((()=>{!async function(){await ne.get("api/employe/assignment-list").then((e=>b(e.data.data))).catch((e=>console.log(e)))}()}),[]);const ce=["Manager","Director"];return(0,n.useEffect)((()=>{!async function(){await ne.get("api/project/partner/options").then((e=>Q(e.data.data))).catch((e=>console.log(e)))}()}),[]),(0,Se.jsx)(Se.Fragment,{children:ae?(0,Se.jsx)(i.Z,{lg:"12",children:(0,Se.jsx)(a.Z,{children:(0,Se.jsx)(l.Z,{children:"Loading..."})})}):le?"Soemthing went wrong.":(0,Se.jsxs)(r.Z,{children:[(0,Se.jsxs)(i.Z,{lg:"8",children:[(0,Se.jsx)(a.Z,{className:"rounded-3 mb-3",children:(0,Se.jsxs)(l.Z,{children:[(0,Se.jsx)("div",{children:(0,Se.jsx)(o.Z,{tag:"h5",className:"text-dark fw-bold",children:"Description"})}),(0,Se.jsx)("div",{className:"ms-auto mt-3 mt-md-0",children:J?null===(e=re.current_stage)||void 0===e?void 0:e.desc:null===re||void 0===re?void 0:re.goals}),(0,Se.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[(0,Se.jsxs)("div",{className:"d-flex flex-column",children:[(0,Se.jsx)("small",{className:"text-muted",children:"Level"}),(0,Se.jsx)("span",{className:"text-dark",children:re.level_desc})]}),(0,Se.jsxs)("div",{className:"d-flex flex-column col-4",children:[(0,Se.jsx)("small",{className:"text-muted",children:"Base"}),(0,Se.jsxs)("div",{className:"d-flex",children:[(0,Se.jsx)("span",{className:"wtext-dark",children:(null===re||void 0===re?void 0:re.base_description.trim().length)>25?"".concat(null===re||void 0===re?void 0:re.base_description.substring(0,25),"..."):null===re||void 0===re?void 0:re.base_description}),(0,Se.jsx)("abbr",{title:null===re||void 0===re?void 0:re.base_description,children:(0,Se.jsx)("i",{className:"me-2 bi-info-circle-fill",style:{fontSize:"14px",marginLeft:"4px"}})})]})]}),(0,Se.jsxs)("div",{className:"d-flex flex-column",children:[(0,Se.jsx)("small",{className:"text-muted",children:"Start date"}),(0,Se.jsx)("span",{className:"text-dark",children:(0,Te.Z)((null===re||void 0===re?void 0:re.current_stage)&&(null===(t=re.current_stage)||void 0===t?void 0:t.start_date))})]}),(0,Se.jsxs)("div",{className:"d-flex flex-column",children:[(0,Se.jsx)("small",{className:"text-muted",children:"Deadline"}),(0,Se.jsx)("span",{className:"text-dark",children:(0,Te.Z)(null!==(null===re||void 0===re?void 0:re.current_stage)&&(null===(s=re.current_stage)||void 0===s?void 0:s.end_date))})]})]}),(0,Se.jsxs)("div",{className:"d-flex justify-content-between bg-light align-items-end p-2 mt-3",style:{borderRadius:"8px"},children:[(0,Se.jsxs)("div",{className:"d-flex gap-3 align-items-center",children:[(0,Se.jsx)("img",{src:L,className:"rounded-circle",alt:"avatar",width:"45",height:"45"}),(0,Se.jsxs)("div",{className:"d-flex flex-column",children:[(0,Se.jsx)("small",{className:"text-muted",children:"PIC"}),(0,Se.jsx)("span",{className:"text-dark fw-bold",children:re.pic_active.first_name})]})]}),(0,Se.jsxs)("div",{className:"d-flex gap-3",children:[(0,Se.jsxs)("span",{className:"badge text-info bg-light-info rounded-pill d-inline-block",children:["Est. Cost ",(0,Se.jsx)("span",{className:"fw-bold",children:(0,Pe.Z)(re.estimated_cost)})]}),(0,Se.jsxs)("span",{className:"badge text-info bg-light-info rounded-pill d-inline-block",children:["Est. Income ",(0,Se.jsx)("span",{className:"fw-bold",children:(0,Pe.Z)(re.estimated_income)})]})]})]})]})}),(0,Se.jsx)(a.Z,{className:"rounded-3",children:(0,Se.jsxs)(l.Z,{children:[(0,Se.jsx)("div",{children:(0,Se.jsx)(o.Z,{tag:"h5",className:"text-dark fw-bold",children:"Project Histories"})}),(0,Se.jsx)("div",{className:"d-flex flex-column gap-2",children:m?null===m||void 0===m?void 0:m.map((e=>{var t;return(0,Se.jsxs)("div",{className:"col-md-12 d-flex justify-content-between align-items-center py-2 px-3",style:{backgroundColor:"#F3F2F2",borderRadius:"8px"},children:[(0,Se.jsxs)("div",{className:"col-md-4 d-flex flex-column",children:[(0,Se.jsx)("span",{className:"text-dark",children:e.organization_name}),(0,Se.jsx)("small",{children:e.history_desc}),(null===u||void 0===u||null===(t=u.user)||void 0===t?void 0:t.roles.find((e=>ce.includes(e))))&&(0,Se.jsx)(F.rU,{to:"/projects/details/".concat(h,"?div=").concat(e.organization_id,"&to=activities"),style:{textDecoration:"none"},children:"See all task"})]}),(0,Se.jsx)("div",{className:"col-md-2",children:(0,Se.jsx)("span",{className:"badge bg-light-".concat("handover"===e.status&&0===e.active?"danger text-danger":"handover"===e.status?"success text-success":"review"===e.status?"danger text-danger":"primary text-primary"," rounded-pill d-inline-block fw-bold"),children:"handover"===e.status&&0===e.active?"waiting for approval":"handover"===e.status&&1===e.active||1===e.active?"active":e.status})}),(0,Se.jsx)("div",{className:"col-md-3 d-flex flex-column",children:(0,Se.jsx)("small",{children:(0,U.Z)(e.created_at)})}),(0,Se.jsxs)("div",{className:"col-md-1 member",children:[(0,Se.jsx)("img",{id:"tooltip-".concat(e.history_id),src:e.img||L,className:"rounded-circle",alt:"avatar",width:"35",height:"35"}),(0,Se.jsx)(Ce,{title:e.first_name,id:e.history_id.toString()})]})]},e.history_id)})):"Loading..."})]})})]}),(0,Se.jsxs)(i.Z,{lg:"4",children:[(0,Se.jsx)(a.Z,{className:"rounded-3 mb-3",children:(0,Se.jsxs)(l.Z,{children:[(0,Se.jsxs)(o.Z,{tag:"h5",className:"d-flex justify-content-between fw-bold",children:["Project Active",(0,Se.jsxs)("span",{className:"text-success fw-bold",children:[re.total_progress.toFixed(100!==re.total_progress&&2),"%"]})]}),(0,Se.jsx)(N,{className:"",color:"success",value:re.total_progress,style:{height:"15px"}})]})}),(0,Se.jsx)(a.Z,{className:"rounded-3",children:(0,Se.jsxs)(l.Z,{children:[(0,Se.jsxs)("div",{className:"overall-process",children:[(0,Se.jsxs)("div",{className:"overall-child",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("h6",{className:"text-muted",children:"Remaining days"}),(0,Se.jsx)("span",{className:"text-danger",children:De(null!==(null===re||void 0===re?void 0:re.current_stage)&&(null===(c=re.current_stage)||void 0===c?void 0:c.end_date)).toFixed()})]}),(0,Se.jsx)(R(),{icon:"timer"})]}),(0,Se.jsxs)("div",{className:"overall-child",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("h6",{className:"text-muted",children:"Task Todo"}),(0,Se.jsx)("span",{children:null===te||void 0===te?void 0:te.todo})]}),(0,Se.jsx)(R(),{icon:"schedule"})]})]}),(0,Se.jsxs)("div",{className:"overall-process",children:[(0,Se.jsxs)("div",{className:"overall-child",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("h6",{className:"text-muted",children:"Task In Progress"}),(0,Se.jsx)("span",{children:null===te||void 0===te?void 0:te.inprogress})]}),(0,Se.jsx)(R(),{icon:"play_circle_outline"})]}),(0,Se.jsxs)("div",{className:"overall-child",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("h6",{className:"text-muted",children:"Task Done"}),(0,Se.jsx)("span",{children:null===te||void 0===te?void 0:te.done})]}),(0,Se.jsx)(R(),{icon:"task_alt"})]})]})]})}),J&&u.user.roles.includes("Manager")&&(0,Se.jsx)(a.Z,{children:(0,Se.jsx)(_.Z,{type:"button",color:"info",disabled:100!==(null===re||void 0===re?void 0:re.total_progress)||0!==(null===te||void 0===te?void 0:te.underReview)||0!==(null===te||void 0===te?void 0:te.todo)||0!==(null===te||void 0===te?void 0:te.inprogress),outline:!0,onClick:ie.bind(null),children:"Handover Project"})})]}),(0,Se.jsxs)(w.Z,{isOpen:x,toggle:ie.bind(null),size:"md",fade:!1,centered:!0,children:[(0,Se.jsx)(k.Z,{toggle:ie.bind(null),children:"Handover Project"}),(0,Se.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),D(!0),await ne.post("api/project/handover",{project_id:h,new_pic:f.value,file:I,schema:2===H?G:"",partner:2===H?X:""},{headers:{"Content-Type":"multipart/form-data"}}).then((()=>{oe(),(0,W.Z)("success","BAST is under review")})).catch((e=>console.log(e))),D(!1),v(!1)},children:[(0,Se.jsxs)(Z.Z,{children:[(0,Se.jsxs)(O.Z,{children:[(0,Se.jsx)(S.Z,{children:"Option"}),(0,Se.jsxs)(C.Z,{type:"select",id:"base_id",name:"base_id",defaultValue:"a",children:[(0,Se.jsx)("option",{value:"a",disabled:!0,children:"Select"}),(0,Se.jsx)("option",{value:"",children:"Hand Over"}),(0,Se.jsx)("option",{value:"",children:"Done"})]})]}),2===H&&(0,Se.jsxs)(Se.Fragment,{children:[null===(null===re||void 0===re||null===(d=re.current_stage)||void 0===d?void 0:d.partner)&&(0,Se.jsxs)(O.Z,{children:[(0,Se.jsx)(S.Z,{for:"partner",children:"Partner"}),(0,Se.jsxs)(C.Z,{type:"select",id:"partner",name:"partner",defaultValue:"pa",onChange:e=>ee(e.target.value),children:[(0,Se.jsx)("option",{disabled:!0,value:"pa",children:"- Select -"}),$.length>0&&$.map((e=>(0,Se.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,Se.jsxs)(O.Z,{children:[(0,Se.jsx)(S.Z,{children:"Schema"}),(0,Se.jsxs)(C.Z,{type:"select",id:"base_id",name:"base_id",defaultValue:"a",onChange:e=>V(e.target.value),children:[(0,Se.jsx)("option",{value:"a",disabled:!0,children:"Select"}),(0,Se.jsx)("option",{value:"jo",children:"JO"}),(0,Se.jsx)("option",{value:"jv",children:"JV"})]})]})]}),(0,Se.jsxs)(O.Z,{children:[(0,Se.jsx)(S.Z,{children:"PIC"}),(0,Se.jsx)(A.ZP,{components:Ee,options:g,onChange:e=>j(e)})]}),(0,Se.jsxs)(O.Z,{children:[(0,Se.jsx)(S.Z,{htmlFor:"bst",children:"BAST"}),(0,Se.jsx)(O.Z,{children:(0,Se.jsx)(C.Z,{type:"file",name:"file",id:"bst",onChange:e=>q(e.target.files)})})]})]}),(0,Se.jsxs)(T.Z,{children:[(0,Se.jsx)(_.Z,{color:"secondary",outline:!0,onClick:ie.bind(null),children:"Cancel"}),(0,Se.jsx)(_.Z,{type:"submit",color:"info",disabled:y,className:"d-flex gap-1 align-items-center",children:y?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(P.Z,{className:"me-2",size:"sm",color:"light"}),"Sending"]}):(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(R(),{icon:"send",style:{fontSize:"20px"}}),"Send"]})})]})]})]})]})})};var ze=s(16354),Fe=s(69399),Ae=s(79463);const Ie=e=>{var t,s,i,a,l,r,o,c,d;let{modal:u,setModal:h,toggle:m,task:p,refetch:x,mode:v}=e;const{auth:f}=(0,B.Z)(),[j,g]=(0,n.useState)(),[b,y]=(0,n.useState)(!1),[N,T]=(0,n.useState)(""),[P,E]=(0,n.useState)([]),[D,z]=(0,n.useState)(),[q,H]=(0,n.useState)(!1),[K,G]=(0,n.useState)(!1),[V,J]=(0,n.useState)(!1),[Y,$]=(0,n.useState)(),[Q,X]=(0,n.useState)(),[ee,te]=(0,n.useState)(!1),[se,ne]=(0,n.useState)([]),[ie,ae]=(0,n.useState)(),le=(0,n.useRef)(),re=(0,M.Z)(),oe=(0,I.ZP)();(0,n.useEffect)((()=>{T({approval_id:null===p||void 0===p?void 0:p.approval_id,task_title:null===p||void 0===p?void 0:p.task_title,task_desc:null===p||void 0===p?void 0:p.task_desc,task_progress:null===p||void 0===p?void 0:p.task_progress,start_date:null===p||void 0===p?void 0:p.start_date,end_date:null===p||void 0===p?void 0:p.end_date}),null!==p&&void 0!==p&&p.pics&&E(p.pics.map((e=>({label:e.first_name,value:e.employe_id})))),async function(){await re.get("api/comment/".concat(null===p||void 0===p?void 0:p.task_id)).then((e=>$(e.data.data)))}(),async function(){await re.get("api/task/history/".concat(null===p||void 0===p?void 0:p.task_id)).then((e=>{g(e.data.data)}))}()}),[p]),(0,n.useEffect)((()=>{!async function(){await re.get("api/employe/assignment-list").then((e=>z(e.data.data))).catch((e=>console.log(e)))}()}),[]),(0,n.useEffect)((()=>{ae(null===j||void 0===j?void 0:j.concat(Y))}),[j,Y]);const ce={taskId:null===p||void 0===p?void 0:p.task_id,options:[{id:1,type:"delete",to:"toDelete"}]},de="https://api.ptpema.co.id/";return(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)(w.Z,{isOpen:u,toggle:m.bind(null),size:"xl",fade:!1,children:[(0,Se.jsx)(k.Z,{toggle:m.bind(null),children:"Task Info"}),(0,Se.jsx)(Z.Z,{children:b?(0,Se.jsx)("div",{className:"d-flex justify-content-center",style:{height:"400px"},children:"Loading.."}):(0,Se.jsxs)("div",{className:"popup-body",children:[(0,Se.jsx)("div",{className:"left",children:"activities"===v?(0,Se.jsx)(Se.Fragment,{children:(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"top",children:[(0,Se.jsxs)("div",{className:"date",children:[(0,Se.jsx)("h6",{children:"Start Date"}),(0,Se.jsx)("span",{children:(null===N||void 0===N?void 0:N.start_date)||"-"})]}),(0,Se.jsxs)("div",{className:"date",children:[(0,Se.jsx)("h6",{children:"Due Date"}),(0,Se.jsx)("span",{children:(null===N||void 0===N?void 0:N.end_date)||"-"})]})]}),(0,Se.jsxs)("div",{className:"bottom mt-3",children:[(0,Se.jsxs)(O.Z,{children:[(0,Se.jsx)(S.Z,{htmlFor:"taskTitle",children:"Task Title"}),(0,Se.jsx)(C.Z,{type:"text",id:"taskTitle",name:"taskTitle",value:(null===N||void 0===N?void 0:N.task_title)||"",readOnly:!0,disabled:!0})]}),(0,Se.jsxs)(O.Z,{children:[(0,Se.jsx)(S.Z,{htmlFor:"taskDesc",children:"Description"}),(0,Se.jsx)(C.Z,{type:"textarea",id:"taskDesc",name:"taskDesc",value:(null===N||void 0===N?void 0:N.task_desc)||"",readOnly:!0,disabled:!0})]}),(0,Se.jsxs)(O.Z,{children:[(0,Se.jsx)("span",{children:"PICs"}),(0,Se.jsx)("br",{}),(0,Se.jsx)("div",{className:"d-flex flex-column",children:P.map(((e,t)=>(0,Se.jsxs)("div",{className:"d-flex gap-3",children:[(0,Se.jsxs)("span",{children:[t+1,"."]}),(0,Se.jsx)("span",{children:e.label})]},e.value)))})]})]}),(0,Se.jsxs)("div",{className:"attach",children:[(0,Se.jsxs)("h6",{children:["Attachment files (",(null===p||void 0===p||null===(t=p.files)||void 0===t?void 0:t.length)||0,")"]}),(0,Se.jsx)("ul",{children:(null===p||void 0===p||null===(s=p.files)||void 0===s?void 0:s.length)>0&&(null===p||void 0===p?void 0:p.files.map((e=>(0,Se.jsxs)("div",{className:"d-flex gap-1 align-items-center",children:[(0,Se.jsx)("li",{children:(0,Se.jsx)(F.rU,{className:"file-link",to:"".concat(de,"taskfiles/").concat(e.file_name),target:"_blank",children:e.file_name})}),(null===f||void 0===f?void 0:f.user.employe_id)===(null===p||void 0===p?void 0:p.employe_id)&&(0,Se.jsx)("button",{type:"button",className:"btn d-flex",style:{color:"#EF6767"},children:(0,Se.jsx)(R(),{icon:"delete_outline",style:{fontSize:"20px"}})})]},e.file_id))))})]})]})}):(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),G(!0),N.task_pic=P,se&&(N.files=se),await re.patch("api/task/".concat(null===p||void 0===p?void 0:p.task_id),N).then((()=>{(0,W.Z)("success","Task has been updated.")})),h(!1),x(),G(!1)},children:[(0,Se.jsxs)("div",{className:"top",children:[(0,Se.jsxs)("div",{className:"date",children:[(0,Se.jsxs)("h6",{children:["Start Date ",null===(i=p.subtasks)||void 0===i?void 0:i.length]}),(0,Se.jsx)("span",{children:(null===N||void 0===N?void 0:N.start_date)||"-"})]}),(0,Se.jsxs)("div",{className:"date",children:[(0,Se.jsx)("h6",{children:"Due Date"}),(0,Se.jsx)(C.Z,{type:"date",name:"end_date",value:(null===N||void 0===N?void 0:N.end_date)||"",onChange:e=>T({...N,end_date:e.target.value})})]})]}),(0,Se.jsxs)("div",{className:"bottom mt-3",children:[(0,Se.jsx)(C.Z,{type:"text",name:"task_title",value:(null===N||void 0===N?void 0:N.task_title)||"",onChange:e=>T({...N,task_title:e.target.value})}),(0,Se.jsx)(C.Z,{type:"textarea",cols:"5",rows:"6",name:"task_desc",value:(null===N||void 0===N?void 0:N.task_desc)||"",onChange:e=>T({...N,task_desc:e.target.value})}),(null===p||void 0===p||null===(a=p.subtasks)||void 0===a?void 0:a.length)>0?"":null===p||void 0===p||null===(l=p.pics)||void 0===l?void 0:l.map((e=>e.employe_id.toString()===(null===f||void 0===f?void 0:f.user.employe_id)&&(0,Se.jsxs)("div",{className:"d-flex gap-2 justify-content-between",children:[(0,Se.jsx)("div",{className:"col-sm-10",children:(0,Se.jsx)(C.Z,{type:"range",defaultValue:p.task_progress,onChange:e=>T({...N,task_progress:e.target.value})})}),(0,Se.jsxs)("div",{className:"col-sm-1 d-flex justify-content-end",children:[null===N||void 0===N?void 0:N.task_progress,"%"]})]},e.id)))]}),(0,Se.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[(0,Se.jsx)("div",{className:"d-flex align-items-center gap-3",children:(0,Se.jsxs)("button",{type:"button",className:"btn-assigne",onClick:()=>{H(!0)},children:[(0,Se.jsx)("i",{className:"bi-person-plus-fill"}),(0,Se.jsx)("span",{children:(null===P||void 0===P?void 0:P.length)||0})]})}),(0,Se.jsx)(_.Z,{type:"submit",className:"btn",color:"info",disabled:K,size:"sm",children:K?"Updating...":"Update"})]})]}),(0,Se.jsx)("form",{onSubmit:async e=>{e.preventDefault(),J(!0),await re.post("api/task/".concat(p.task_id,"/upload"),se,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{var t;null===p||void 0===p||null===(t=p.files)||void 0===t||t.push(e.data.file)})).catch((e=>console.log(e))),ne([]),J(!1)},children:(0,Se.jsxs)("div",{className:"d-flex justify-content-between align-items-center bg-light px-2 rounded-3 mt-2",children:[(0,Se.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[(0,Se.jsxs)("div",{className:"pt-2",id:"tooltip-3",children:[(0,Se.jsx)(S.Z,{for:"attach",children:(0,Se.jsx)(R(),{icon:"attach_file",className:"btn-icon"})}),(0,Se.jsx)("input",{type:"file",id:"attach",name:"attach",hidden:!0,onChange:e=>ne(e.target.files),required:!0}),(0,Se.jsx)(Ce,{title:"Upload file",id:"3"})]}),(0,Se.jsx)("span",{style:{color:"#1F88E5",fontSize:"12px"},children:null===(r=se[0])||void 0===r?void 0:r.name})]}),(0,Se.jsx)(_.Z,{type:"submit",className:"btn",outline:!0,size:"sm",children:V?"Uploading...":"Upload"})]})}),(0,Se.jsxs)("div",{className:"attach",children:[(0,Se.jsxs)("h6",{children:["Attachment files (",(null===p||void 0===p||null===(o=p.files)||void 0===o?void 0:o.length)||0,")"]}),(0,Se.jsx)("ul",{children:(null===p||void 0===p||null===(c=p.files)||void 0===c?void 0:c.length)>0&&(null===p||void 0===p?void 0:p.files.map((e=>(0,Se.jsxs)("div",{className:"d-flex gap-1 align-items-center",children:[(0,Se.jsx)("li",{children:(0,Se.jsx)(F.rU,{className:"file-link",to:"".concat(de,"taskfiles/").concat(e.file_name),target:"_blank",children:e.file_name})}),(0,Se.jsx)("button",{type:"button",className:"btn d-flex",style:{color:"#EF6767"},children:(0,Se.jsx)(R(),{icon:"delete_outline",style:{fontSize:"20px"}})})]},e.file_id))))})]})]})}),(0,Se.jsxs)("div",{className:"right",children:[(0,Se.jsxs)("div",{className:"top",children:[null===p.task_parent?(0,Se.jsxs)("div",{className:"status",children:[(0,Se.jsx)("span",{className:"badge bg-light-success text-primary rounded-pill d-inline-block fw-bold",children:"Task"}),0===(null===p||void 0===p?void 0:p.status)?(0,Se.jsx)(ze.Z,{color:"info",children:"To Do"}):1===(null===p||void 0===p?void 0:p.status)?(0,Se.jsx)(ze.Z,{color:"primary",children:"In Progress"}):2===(null===p||void 0===p?void 0:p.status)?(0,Se.jsxs)(ze.Z,{color:"light",className:"text-dark",children:[(0,Se.jsx)("i",{className:"bi-clock mr-4",style:{fontSize:"12px"}}),"\xa0 Waiting for approval",(0,Se.jsx)("strong",{})]}):3===(null===p||void 0===p?void 0:p.status)?(0,Se.jsxs)(ze.Z,{color:"success",className:"d-flex",children:[" ",(0,Se.jsx)("i",{className:"bi-check2-circle mr-4",style:{fontSize:"13px"}}),"\xa0 Approved"]}):(0,Se.jsx)(ze.Z,{color:"danger",children:"Revision"})]}):(0,Se.jsx)("div",{className:"status",children:(0,Se.jsx)("span",{className:"badge bg-light-success text-primary rounded-pill d-inline-block fw-bold",children:"Subtask"})}),(null===f||void 0===f?void 0:f.user.employe_id)===p.employe_id&&(0,Se.jsx)(Ae.Z,{menuOptions:ce,action:async()=>{y(!0),await re.delete("api/task/".concat(p.task_id)).then().catch((e=>console.log(e))),y(!1),h(!1),x()}})]}),(0,Se.jsx)("div",{className:"bottom",children:j&&Y?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"history-item",children:[(0,Se.jsx)("div",{className:"comment-name",children:(0,Se.jsxs)("span",{children:[(0,Se.jsx)("strong",{children:p&&p.created_by})," create this task"]})}),(0,Se.jsx)("small",{children:p&&(0,U.Z)(p.created_at)})]}),null===(ue=ie,d=null===ue||void 0===ue?void 0:ue.sort(((e,t)=>e.created_at.localeCompare(t.created_at))))||void 0===d?void 0:d.map(((e,t)=>null!==e&&void 0!==e&&e.approval_id?(0,Se.jsxs)(n.Fragment,{children:[(0,Se.jsxs)("div",{className:"history-item",children:[(0,Se.jsx)("div",{className:"comment-name",children:0===(null===e||void 0===e?void 0:e.status)&&t>0?(0,Se.jsxs)("span",{children:[(0,Se.jsx)("strong",{children:null===e||void 0===e?void 0:e.pic_task})," change task to To Do"]}):0===(null===e||void 0===e?void 0:e.status)?(0,Se.jsxs)("span",{children:[(0,Se.jsx)("strong",{children:null===e||void 0===e?void 0:e.pic_task})," was assigned"]}):1===(null===e||void 0===e?void 0:e.status)?(0,Se.jsxs)("span",{children:[(0,Se.jsx)("strong",{children:null===e||void 0===e?void 0:e.pic_task})," change task to In Progress"]}):2===(null===e||void 0===e?void 0:e.status)?(0,Se.jsxs)("span",{children:[(0,Se.jsx)("strong",{children:null===e||void 0===e?void 0:e.pic_task})," change task to Review"]}):3===(null===e||void 0===e?void 0:e.status)?(0,Se.jsxs)("span",{children:[(0,Se.jsxs)("strong",{children:[null===e||void 0===e?void 0:e.status_by," "]})," task approved"]}):(0,Se.jsx)(Se.Fragment,{children:(0,Se.jsxs)("span",{children:[(0,Se.jsxs)("strong",{children:[null===e||void 0===e?void 0:e.status_by," "]}),"change task to Revision"]})})}),(0,Se.jsx)("small",{children:(0,U.Z)(null===e||void 0===e?void 0:e.created_at)})]}),(3===(null===e||void 0===e?void 0:e.status)||4===(null===e||void 0===e?void 0:e.status))&&(0,Se.jsx)("div",{className:"comment-item mt-1",children:(0,Se.jsx)("div",{className:"comment-user ",children:(0,Se.jsxs)("div",{className:"comment-teks ".concat(3===(null===e||void 0===e?void 0:e.status)?"text-success":"text-warning"),children:[(0,Se.jsx)("small",{style:{fontWeight:"600"},children:3===(null===e||void 0===e?void 0:e.status)?"Comment":"Notes"}),e.notes]})})})]},(0,U.Z)(null===e||void 0===e?void 0:e.created_at)):(0,Se.jsx)("div",{className:"comment-item",children:(0,Se.jsxs)("div",{className:"comment-user",children:[(0,Se.jsx)("img",{src:L,className:"rounded-circle",alt:"avatar",width:"35",height:"35"}),(0,Se.jsxs)("div",{className:"comment-teks",children:[(0,Se.jsx)("small",{style:{fontWeight:"600"},children:null===e||void 0===e?void 0:e.first_name}),null===e||void 0===e?void 0:e.comment,(0,Se.jsx)("div",{className:"comment-time",children:(0,Se.jsx)("small",{children:(0,U.Z)(null===e||void 0===e?void 0:e.created_at)})})]},null===e||void 0===e?void 0:e.comment_id)]})},null===e||void 0===e?void 0:e.comment_id)))]}):"Loading..."}),(0,Se.jsx)(Fe.Z,{onSubmit:async e=>{e.preventDefault(),te(!0),Q.employe_id=f.user.employe_id,Q.task_id=p.task_id,await re.post("api/comment",Q).then((e=>ae((t=>[...t,e.data.data])))),te(!1),X(),e.target.reset()},children:(0,Se.jsxs)("div",{className:"input-comment",children:[(0,Se.jsx)(C.Z,{type:"text",name:"comment",ref:le,onChange:e=>X({comment:e.target.value}),autoComplete:"off"}),(0,Se.jsx)("div",{className:"",children:(0,Se.jsxs)(_.Z,{className:"btn",outline:!0,color:"info",disabled:ee,type:"submit",children:[(0,Se.jsx)(R(),{icon:"send"}),ee?"Sending":"Send"]})})]})})]})]})})]}),(0,Se.jsxs)(w.Z,{isOpen:q,size:"md",fade:!1,centered:!0,children:[(0,Se.jsx)(k.Z,{toggle:()=>H(!1),children:"Assigne Employee"}),(0,Se.jsx)(Z.Z,{children:(0,Se.jsx)(A.ZP,{closeMenuOnSelect:!1,components:oe,isMulti:!0,defaultValue:P,options:D,onChange:e=>E(e),isDisabled:!0})})]})]});var ue},Le=e=>{const{auth:t}=(0,B.Z)(),{projectId:s,setNewTaskOpen:i,setAddSubtaskOpen:a,refetch:l,type:r,taskId:o}=e,[c,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)({}),[m,p]=(0,n.useState)(!1),[x,v]=(0,n.useState)([]),[f,j]=(0,n.useState)(),g=(0,I.ZP)(),b=(0,z.s0)(),y=()=>{p(!m)},N=(0,M.Z)();(0,n.useEffect)((()=>{!async function(){await N.get("api/employe/assignment-list").then((e=>{j(e.data.data)})).catch((e=>console.log(e)))}(),v([{value:t.user.employe_id,label:t.user.first_name}])}),[]);const O=e=>{h((t=>({...t,[e.target.name]:e.target.value})))},S=()=>{1===r?i(!1):a(void 0)};return(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"task-form-overlay",onClick:S}),(0,Se.jsx)("form",{onSubmit:async e=>{e.preventDefault(),d(!0),u.project_id=s,u.task_pic=x,2===r&&(u.task_parent=o),await N.post("api/task",u,{headers:{"Content-Type":"multipart/form-data"}}).then((()=>{if(null!==t&&void 0!==t&&t.user.roles.includes("Manager")){const e=[];x.map((t=>e.push(t.value))),e.includes(null===t||void 0===t?void 0:t.user.employe_id)||b("?to=activities")}else b("");(0,W.Z)("create","New task has been created.")})).catch((e=>console.log(e.message))),d(!1),l(),S()},style:{width:"100%"},encType:"multipart/form-data",children:(0,Se.jsxs)("div",{className:"new-task",children:[(0,Se.jsxs)("div",{className:"body",children:[(0,Se.jsx)("div",{className:"input",children:(0,Se.jsx)(C.Z,{type:"textarea",name:"task_title",placeholder:"Task title here..",required:!0,onChange:O})}),(0,Se.jsxs)("button",{type:"button",className:"btn-assigne",id:"tooltip-2",onClick:()=>{p(!0)},children:[(0,Se.jsx)("i",{className:"bi-person-plus-fill"}),(0,Se.jsx)("span",{children:(null===x||void 0===x?void 0:x.length)||0})]}),(0,Se.jsx)(Ce,{title:"Assigne",id:"2"})]}),(0,Se.jsxs)("div",{className:"footer",children:[(0,Se.jsx)("div",{className:"option",children:(0,Se.jsxs)("div",{className:"duedate",children:[(0,Se.jsxs)("span",{className:"datepicker-toggle",id:"tooltip-1",children:[(0,Se.jsx)("span",{className:"datepicker-toggle-button",children:(0,Se.jsx)(R(),{icon:"calendar_month"})}),(0,Se.jsx)("input",{type:"date",name:"end_date",className:"datepicker-input",required:!0,onChange:O})]}),(0,Se.jsx)(Ce,{title:"Due date",id:"1"}),(0,Se.jsx)("span",{children:u.end_date})]})}),(0,Se.jsxs)("div",{className:"action",children:[(0,Se.jsx)(_.Z,{type:"button",size:"sm",color:"light",disabled:c,onClick:S,children:"Cancel"}),(0,Se.jsx)(_.Z,{type:"submit",size:"sm",className:"d-flex gap-2 align-items-center",disabled:c,children:c?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(P.Z,{size:"sm"}),"Loading..."]}):"Save"})]})]})]})}),(0,Se.jsxs)(w.Z,{isOpen:m,toggle:y.bind(null),size:"md",fade:!1,centered:!0,children:[(0,Se.jsx)(k.Z,{toggle:y.bind(null),children:"Assigne Employee"}),(0,Se.jsx)(Z.Z,{children:(0,Se.jsx)(A.ZP,{components:g,isMulti:!0,defaultValue:x,options:f,onChange:e=>v(e)})})]})]})};var Me=s(24944);const Ue=e=>{let{data:t,projectId:s,refetch:i}=e;const{auth:a}=(0,B.Z)(),[l,r]=(0,n.useState)(!1),[o,c]=(0,n.useState)(void 0),[d,u]=(0,n.useState)(void 0),[h,m]=(0,n.useState)(),[p,x]=(0,n.useState)(),[v,f]=(0,n.useState)(),j=(0,M.Z)(),g=e=>{r(!0),u(e)},b=async(e,t)=>{x(e),f(t),m(!0),await j.put("api/task/".concat(e,"/status"),{employe_id:a.user.employe_id,status:t}).then((()=>{(0,W.Z)(1===t?"start":2===t?"done":"success","Task status has been changed to ".concat(0===t?"To Do":1===t?"In Progress":"Done"))})).catch((e=>{(0,W.Z)("error",e.response.data.error)})),i(),m(!1),x(),f()},y={options:[{id:1,icon:(0,Se.jsx)(R(),{icon:"edit_note"}),type:"button",label:"To do",to:0},{id:2,icon:(0,Se.jsx)(R(),{icon:"play_circle_outline"}),type:"button",label:"In Progress",to:1},{id:3,icon:(0,Se.jsx)(R(),{icon:"task_alt"}),type:"button",label:"Done",to:2}]};return(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"",children:null===t||void 0===t?void 0:t.map(((e,t)=>{var n,l;return(0,Se.jsxs)("div",{className:"board",children:[(0,Se.jsxs)("div",{className:"board-header",children:[(0,Se.jsxs)("div",{className:"d-flex gap-2",style:{height:"max-content"},children:[(0,Se.jsxs)(ze.Z,{color:"info",className:"bg-light-".concat(0===e.status?"primary":1===e.status?"warning":"success"," text-").concat(0===e.status?"primary":1===e.status?"warning":"success"," fw-bold"),children:["#",t+1]}),4===parseInt(e.status,10)&&(0,Se.jsxs)(ze.Z,{color:"danger",children:[(0,Se.jsx)("i",{className:"bi-pencil-square mr-4",style:{fontSize:"12px"}}),"\xa0 Revision"]})]}),0===parseInt(e.status,10)||1===parseInt(e.status,10)||4===parseInt(e.status,10)?h&&p===e.task_id?(0,Se.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[(0,Se.jsx)(P.Z,{size:"sm",color:"success"}),(0,Se.jsxs)("span",{children:["Updating status to"," ",(0,Se.jsx)("strong",{children:0===v?"To do":1===v?"In Progress":2===v?"Done":""})]})]}):(0,Se.jsxs)("div",{className:"d-flex gap-2",children:[(0,Se.jsx)("div",{className:"",children:1===parseInt(e.status,10)&&(0,Se.jsxs)("span",{style:{fontSize:"12px"},children:["Progress","  ",(0,Se.jsxs)("strong",{style:{fontSize:"14px",color:100===e.task_progress?"#4cc790":"#21C1D6"},children:[e.task_progress.toFixed(100!==e.task_progress&&2),"%"]})]})}),(0,Se.jsx)("div",{children:e.pics.map((t=>t.employe_id.toString()===(null===a||void 0===a?void 0:a.user.employe_id)&&(0,Se.jsx)(Ae.Z,{menuOptions:y,taskId:e.task_id,status:parseInt(e.status,10),action:b,progress:e.task_progress},e.task_id)))},e.task_id)]}):2===parseInt(e.status,10)?(0,Se.jsxs)(ze.Z,{color:"light",className:"d-flex text-dark",children:[(0,Se.jsx)("i",{className:"bi-clock mr-4",style:{fontSize:"12px"}}),"\xa0 Waiting for approval"]}):3===parseInt(e.status,10)?(0,Se.jsxs)(ze.Z,{color:"success",className:"d-flex",children:[(0,Se.jsx)("i",{className:"bi-check2-circle mr-4",style:{fontSize:"13px"}}),"\xa0 Approved"]}):""]}),(0,Se.jsxs)("div",{className:"board-body",onClick:()=>g(e),children:[(0,Se.jsx)("div",{className:"task-title fw-bold",children:e.task_title}),(0,Se.jsxs)("div",{className:"task-bottom",children:[(0,Se.jsx)("div",{className:"task-info",children:(0,Se.jsxs)("small",{className:"text-muted",children:[e.subtasks.length," Subtask"]})}),(0,Se.jsx)("div",{className:"task-action",children:(0,Se.jsxs)("div",{className:"comment",children:[(0,Se.jsx)(R(),{icon:"comment"}),(0,Se.jsx)("div",{children:e.comments})]})})]})]}),e.subtasks.length>=1&&e.subtasks.map((e=>(0,Se.jsxs)("div",{className:"board-body subtask",onClick:()=>g(e),children:[(0,Se.jsx)("div",{className:"task-title text-muted",children:e.task_title}),(0,Se.jsxs)("div",{className:"task-action",children:[(0,Se.jsx)("div",{className:"circular-progress",children:(0,Se.jsx)(Me.Z,{data:e.task_progress})}),(0,Se.jsxs)("div",{className:"comment",children:[(0,Se.jsx)(R(),{icon:"comment"}),(0,Se.jsx)("div",{children:e.comments})]})]})]},e.task_id))),3!==parseInt(e.status,10)&&(0,Se.jsx)("div",{className:"board-footer",children:o===e.task_id?(0,Se.jsx)(Le,{projectId:s,setAddSubtaskOpen:c,refetch:i,type:2,taskId:e.task_id}):(0,Se.jsxs)(Se.Fragment,{children:[2!==e.status?(0,Se.jsxs)(_.Z,{type:"button",size:"sm",color:"light",className:"d-flex align-items-center",onClick:()=>c(e.task_id),children:[(0,Se.jsx)(R(),{icon:"add",style:{fontSize:"14px"}}),"Add Subtask"]}):(0,Se.jsx)("div",{}),(0,Se.jsx)("div",{className:"member-2",children:(0,Se.jsxs)("div",{className:"member-item",children:[null===e||void 0===e||null===(n=e.pics)||void 0===n?void 0:n.map(((e,t)=>t<2&&(0,Se.jsxs)("div",{className:"ava-img",children:[(0,Se.jsx)("img",{id:"tooltip-".concat(e.id),src:L,className:"rounded-circle",alt:"avatar",width:"35",height:"35"}),(0,Se.jsx)(Ce,{title:e.first_name,id:e.id.toString()})]},e.id))),(null===e||void 0===e||null===(l=e.pics)||void 0===l?void 0:l.length)>2&&(0,Se.jsxs)("div",{className:"member-plus bg-light-info text-info fw-bold",children:["+",e.pics.length-2]})]})})]})})]},e.task_id)}))}),l&&(0,Se.jsx)(Ie,{modal:l,setModal:r,toggle:()=>{r(!l)},task:d,refetch:i})]})},Be=e=>{let{data:t,isLoading:s,error:a,refetch:l,isRefetching:r}=e;const[o,c]=(0,n.useState)(!1),{projectId:d}=(0,z.UO)();return(0,Se.jsxs)(i.Z,{lg:"4",className:"mt-1",children:[(0,Se.jsxs)("div",{className:"d-flex align-items-center justify-content-between bg-light-primary text-primary py-2 px-3 mb-2 rounded-2",children:[(0,Se.jsx)("span",{className:"fw-bold",children:"To do"}),(0,Se.jsx)("span",{className:"fw-bold",children:null===t||void 0===t?void 0:t.length})]}),s?"Loading...":a?"Something went wrong.":(0,Se.jsxs)(Se.Fragment,{children:[o?(0,Se.jsx)(Le,{projectId:d,setNewTaskOpen:c,refetch:l,type:1}):(0,Se.jsxs)(_.Z,{type:"button",size:"sm",color:"secondary",className:"d-flex align-items-center justify-content-center",block:!0,onClick:()=>c(!0),children:[(0,Se.jsx)(R(),{icon:"add",style:{fontSize:"14px"}}),"New Task"]}),(0,Se.jsx)(Ue,{data:t,projectId:d,refetch:l,isRefetching:r})]})]})},We=e=>{let{data:t,isLoading:s,error:n,refetch:a,isRefetching:l}=e;const{projectId:r}=(0,z.UO)();return(0,Se.jsxs)(i.Z,{lg:"4",className:"mt-1",children:[(0,Se.jsxs)("div",{className:"d-flex align-items-center justify-content-between bg-light-warning text-warning py-2 px-3 mb-2 rounded-2",children:[(0,Se.jsx)("span",{className:"fw-bold",children:"In progress"}),(0,Se.jsx)("span",{className:"fw-bold",children:null===t||void 0===t?void 0:t.length})]}),s?"Loading...":n?"Something went wrong.":(0,Se.jsx)(Se.Fragment,{children:(0,Se.jsx)(Ue,{data:t,projectId:r,refetch:a,isRefetching:l})})]})},qe=e=>{let{data:t,isLoading:s,error:n,refetch:a,isRefetching:l}=e;const{projectId:r}=(0,z.UO)();return(0,Se.jsxs)(i.Z,{lg:"4",className:"mt-1",children:[(0,Se.jsxs)("div",{className:"d-flex align-items-center justify-content-between bg-light-success text-success py-2 px-3 mb-2 rounded-2",children:[(0,Se.jsx)("span",{className:"fw-bold",children:"Done"}),(0,Se.jsx)("span",{className:"fw-bold",children:null===t||void 0===t?void 0:t.length})]}),s?"Loading...":n?"Something went wrong.":(0,Se.jsx)(Se.Fragment,{children:(0,Se.jsx)(Ue,{data:t,projectId:r,refetch:a,isRefetching:l})})]})},He=()=>{const{projectId:e}=(0,z.UO)(),[t,s]=(0,n.useState)(),[o,c]=(0,n.useState)(),[d,u]=(0,n.useState)(),[h,m]=(0,n.useState)(!0),p=(0,M.Z)(),{isLoading:x,error:v,data:f,refetch:j,isRefetching:g}=(0,E.a)({queryKey:["todos"],queryFn:()=>p.get("api/task/".concat(e,"/employe/all")).then((e=>(m(e.data.is_member_active),e.data.tasks)))});return(0,n.useEffect)((()=>{const e=null===f||void 0===f?void 0:f.filter((e=>0===parseInt(e.status,10)||4===parseInt(e.status,10))),t=null===f||void 0===f?void 0:f.filter((e=>1===parseInt(e.status,10))),n=null===f||void 0===f?void 0:f.filter((e=>2===parseInt(e.status,10)||3===parseInt(e.status,10)));s(e),c(t),u(n)}),[f]),(0,Se.jsx)(r.Z,{children:x?(0,Se.jsx)(i.Z,{children:(0,Se.jsx)(a.Z,{children:(0,Se.jsx)(l.Z,{className:"text-center",children:(0,Se.jsx)("h6",{className:"tex-muted",children:"Loading..."})})})}):h?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(Be,{data:t,isLoading:x,error:v,refetch:j,isRefetching:g}),(0,Se.jsx)(We,{data:o,isLoading:x,error:v,refetch:j,isRefetching:g}),(0,Se.jsx)(qe,{data:d,isLoading:x,error:v,refetch:j,isRefetching:g})]}):(0,Se.jsx)(i.Z,{children:(0,Se.jsx)(a.Z,{children:(0,Se.jsx)(l.Z,{className:"text-center",children:(0,Se.jsx)("h6",{className:"tex-muted",children:"You cannot create a task because you are not an active member."})})})})})},Ke=e=>{let{children:t}=e;return(0,Se.jsx)("table",{className:"rounded-corners",children:t})},Ge=()=>{const[e,t]=(0,n.useState)(),s=(0,M.Z)(),{projectId:r}=(0,z.UO)(),{isLoading:o,error:c,data:d}=(0,E.a)({queryKey:["members"],queryFn:()=>s.get("api/project/".concat(r,"/members")).then((e=>(t(e.data.count_task),e.data.data)))});return(0,Se.jsx)(i.Z,{children:(0,Se.jsx)(a.Z,{className:"rounded-3",children:(0,Se.jsx)(l.Z,{children:o?"Loading...":c?"Something went wrong.":(null===d||void 0===d?void 0:d.length)>0?(0,Se.jsx)(Ke,{children:(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{children:"#"}),(0,Se.jsx)("th",{children:"Name"}),(0,Se.jsx)("th",{children:"Position"}),(0,Se.jsx)("th",{children:"Total Task"})]})}),(0,Se.jsx)("tbody",{style:{overflow:"hidden"},children:null===d||void 0===d?void 0:d.map(((t,s)=>{return(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{children:s+1}),(0,Se.jsx)("td",{children:t.first_name}),(0,Se.jsx)("td",{children:t.position_name}),(0,Se.jsx)("td",{children:e?(n=e,i=t.employe_id.toString(),n[i]):"-"})]},t.first_name);var n,i}))})]})}):(0,Se.jsx)("div",{className:"d-flex justify-content-center",children:(0,Se.jsx)("h6",{children:"No data yet."})})})})})};var Ve=s(28755);const Je=()=>{const{projectId:e}=(0,z.UO)(),t=(0,M.Z)(),{isLoading:s,error:n,data:r}=(0,E.a)({queryKey:["files"],queryFn:()=>t.get("api/project/".concat(e,"/files")).then((e=>e.data.data))});return(0,Se.jsx)(i.Z,{children:(0,Se.jsx)(a.Z,{children:(0,Se.jsx)(l.Z,{children:s?"Loading...":n?"Something went wrong.":(0,Se.jsxs)(Ve.Z,{className:"no-wrap mt-3 align-middle",hover:!0,style:{zIndex:"-1"},children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{children:"#"}),(0,Se.jsx)("th",{children:"Filename"}),(0,Se.jsx)("th",{children:"Date Added"})]})}),(0,Se.jsx)("tbody",{style:{overflow:"hidden"},children:null===r||void 0===r?void 0:r.map(((e,t)=>(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{children:t+1}),(0,Se.jsx)("td",{children:(0,Se.jsx)(F.rU,{to:"".concat("https://api.ptpema.co.id/","taskfiles/").concat(e.file_name),target:"blank",children:e.file_name})}),(0,Se.jsx)("td",{children:(0,U.Z)(e.created_at)})]},e.file_id)))})]})})})})},Ye=e=>{let{setTotalReview:t}=e;const{projectId:s}=(0,z.UO)(),[r,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(""),[h,m]=(0,n.useState)(),[p,x]=(0,n.useState)(!1),[v,f]=(0,n.useState)(),[j,g]=(0,n.useState)(),b=(0,M.Z)(),[y,N]=(0,n.useState)([]),{isLoading:S,error:D,refetch:A,isRefetching:I}=(0,E.a)({queryKey:["review"],queryFn:()=>b.get("api/task/".concat(s,"/level1/review")).then((e=>(N(e.data.data),e.data.data)))}),L=()=>{c(!r)};(0,n.useEffect)((()=>{t(y.length)}),[y]),(0,n.useEffect)((()=>{A()}),[s]);const B={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASEURL:"https://api.ptpema.co.id/"}.REACT_APP_FILEURL,q=(e,t,s)=>{c(!0),u(e),m(t),g(s)};return(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(i.Z,{children:S||I?(0,Se.jsx)("div",{className:"d-flex justify-content-center",children:"Loading..."}):D?(0,Se.jsxs)("div",{className:"d-flex justify-content-center",children:["Something went wrong ",(0,Se.jsx)("span",{className:"material-icons",children:"sentiment_very_dissatisfied"})]}):y.map(((e,t)=>(0,Se.jsx)(a.Z,{className:"custom-card",children:(0,Se.jsxs)(l.Z,{children:[(0,Se.jsxs)(o.Z,{tag:"h4",className:"d-flex justify-content-between",children:[(0,Se.jsxs)("div",{className:"d-flex gap-2",children:[(0,Se.jsxs)(ze.Z,{color:"light",className:"text-dark",children:["#",t+1]}),(0,Se.jsx)(ze.Z,{color:"info",className:"",children:e.first_name})]}),(0,Se.jsx)("span",{style:{fontSize:"14px"},children:(0,U.Z)(e.send_date)})]}),(0,Se.jsx)("h5",{children:(0,Se.jsx)("strong",{children:e.task_title})}),(0,Se.jsx)("p",{children:e.task_desc}),(0,Se.jsx)("span",{className:"text-dark",children:"Attachment:"}),(0,Se.jsx)("div",{className:"",children:e.files.length>0?e.files.map(((e,t)=>(0,Se.jsxs)("div",{className:"d-flex gap-3",children:[(0,Se.jsxs)("span",{children:[t+1,"."]}),(0,Se.jsx)(F.rU,{className:"file-link",to:"".concat(B,"taskfiles/").concat(e.file_name),target:"blank",children:e.file_name})]},e.file_name))):"-"}),(0,Se.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-4 border  py-2 px-3",style:{borderRadius:"10px"},children:[(0,Se.jsxs)("div",{className:"d-flex gap-4",children:[(0,Se.jsxs)("div",{color:"muted",children:[(0,Se.jsx)("span",{className:"text-dark",children:"Start at: "}),(0,Se.jsx)("br",{})," ",(0,U.Z)(e.start_date).split(",")[0]]}),(0,Se.jsxs)("div",{color:"muted",children:[(0,Se.jsx)("span",{className:"text-dark",children:"Due at: "}),(0,Se.jsx)("br",{})," ",(0,U.Z)(e.end_date).split(",")[0]]})]}),(0,Se.jsxs)("div",{className:"d-flex gap-2",children:[(0,Se.jsx)(_.Z,{type:"button",size:"md",color:"warning",outline:!0,onClick:()=>q("revision",e.task_id,e.employe_id),children:"Revision"}),(0,Se.jsx)(_.Z,{type:"button",size:"md",color:"success",onClick:()=>q("approve",e.task_id,e.employe_id),children:"Approve"})]})]})]})},e.approval_id)))}),(0,Se.jsxs)(w.Z,{isOpen:r,toggle:L.bind(null),size:"md",fade:!1,centered:!0,children:[(0,Se.jsx)(k.Z,{toggle:L.bind(null),children:"approve"===d?"Approval":"Revision"}),(0,Se.jsxs)(Fe.Z,{onSubmit:async e=>{e.preventDefault(),x(!0),await b.put("api/task/".concat(h,"/status"),{employe_id:j,status:"approve"===d?3:4,note:v}).then((()=>{(0,W.Z)("success","Task has been ".concat("approve"===d?"approved":"reviewed"))})).catch((e=>console.log(e))),A(),c(!1),x(!1)},children:[(0,Se.jsx)(Z.Z,{children:(0,Se.jsx)(O.Z,{children:(0,Se.jsx)(C.Z,{type:"textarea",id:"goals",name:"goals",placeholder:"Comment here..",rows:"3",required:!0,onChange:e=>f(e.target.value)})})}),(0,Se.jsxs)(T.Z,{children:[(0,Se.jsx)(_.Z,{color:"secondary",outline:!0,onClick:L.bind(null),children:"Cancel"}),(0,Se.jsx)(_.Z,{type:"submit",color:"".concat("approve"===d?"success":"warning"),disabled:p,className:"d-flex gap-1 align-items-center",children:p?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(P.Z,{className:"me-2",size:"sm"}),"Sending..."]}):(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(R(),{icon:"send",style:{fontSize:"20px"}}),"approve"===d?"Approve":"Send"]})})]})]})]})]})},$e=()=>{var e,t;const[s,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)({}),{auth:p}=(0,B.Z)(),{projectId:x}=(0,z.UO)(),v=(0,M.Z)(),f=()=>{c(!s)},{isLoading:j,error:g,data:b,refetch:y,isRefetching:N}=(0,E.a)({queryKey:["review"],queryFn:()=>v.get("api/project/".concat(null===p||void 0===p?void 0:p.user.employe_id,"/").concat(x,"/handover")).then((e=>e.data.data))}),D=e=>{m((t=>({...t,[e.target.name]:e.target.value})))};return(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(i.Z,{children:j||N?(0,Se.jsx)("div",{className:"d-flex justify-content-center",children:"Loading..."}):g?(0,Se.jsxs)("div",{className:"d-flex justify-content-center",children:["Something went wrong ",(0,Se.jsx)("span",{className:"material-icons",children:"sentiment_very_dissatisfied"})]}):null!==b&&(0,Se.jsx)(a.Z,{className:"custom-card",children:(0,Se.jsxs)(l.Z,{children:[(0,Se.jsxs)(o.Z,{tag:"h4",className:"d-flex justify-content-between",children:[(0,Se.jsx)("div",{className:"d-flex gap-2",children:(0,Se.jsx)(ze.Z,{color:"light",className:"text-dark",children:"Handover project"})}),(0,Se.jsx)("span",{style:{fontSize:"14px"},children:(0,U.Z)(b.created_at)})]}),(0,Se.jsx)("div",{className:"d-flex  justify-content-center",children:(0,Se.jsxs)("h5",{children:["Handover of the project from ",(0,Se.jsx)("strong",{children:b.from_division})," to"," ",(0,Se.jsx)("strong",{children:b.to_division})]})}),(0,Se.jsx)("p",{}),(0,Se.jsx)("span",{className:"text-dark",children:"BAST File:"}),(0,Se.jsx)("div",{className:"",children:(0,Se.jsx)("div",{className:"d-flex gap-3",children:(0,Se.jsx)(F.rU,{className:"file-link",to:"".concat("https://api.ptpema.co.id/","project/").concat(b.file),target:"blank",children:b.file})})}),(0,Se.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-4 border  py-2 px-3",style:{borderRadius:"10px"},children:[(0,Se.jsx)("div",{className:"d-flex gap-4",children:(0,Se.jsxs)("div",{className:"d-flex gap-3 align-items-center",children:[(0,Se.jsx)("img",{src:L,className:"rounded-circle",alt:"avatar",width:"45",height:"45"}),(0,Se.jsxs)("div",{className:"d-flex flex-column",children:[(0,Se.jsx)("span",{className:"text-dark fw-bold",children:b.old_pic}),(0,Se.jsx)("small",{className:"text-muted",children:b.from_division})]})]})}),(0,Se.jsx)("div",{className:"d-flex gap-2",children:(0,Se.jsx)(_.Z,{type:"button",size:"md",color:"success",outline:!0,onClick:f.bind(null),children:"Confirm"})})]})]})})}),(0,Se.jsxs)(w.Z,{isOpen:s,toggle:f.bind(null),size:"md",fade:!1,centered:!0,children:[(0,Se.jsx)(k.Z,{toggle:f.bind(null),children:"Confirmation"}),(0,Se.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0),v.post("api/project/".concat(null===b||void 0===b?void 0:b.history_id,"/confirm"),h).then((e=>{y(),(0,W.Z)("success",e.data.message)})).catch((e=>{(0,W.Z)("error",e.response.data.error)})),c(!1),u(!1)},children:[(0,Se.jsxs)(Z.Z,{children:[(0,Se.jsx)("div",{className:"d-flex justify-content-center",children:(0,Se.jsxs)("h6",{className:"fw-bold",children:["Next stage:"," ",1===(null===b||void 0===b||null===(e=b.current_stage)||void 0===e?void 0:e.phase)?"Planning":2===(null===b||void 0===b||null===(t=b.current_stage)||void 0===t?void 0:t.phase)?"Execution, Control & Monitoring":""]})}),(0,Se.jsxs)(O.Z,{children:[(0,Se.jsx)(S.Z,{htmlFor:"desc_stage",children:"Description"}),(0,Se.jsx)(C.Z,{type:"textarea",name:"desc_stage",id:"desc_stage",placeholder:"stage description here..",rows:"3",onChange:D})]}),(0,Se.jsxs)(r.Z,{children:[(0,Se.jsx)(i.Z,{md:"6",children:(0,Se.jsxs)(O.Z,{children:[(0,Se.jsx)(S.Z,{for:"start_date",children:"Start date"}),(0,Se.jsx)(C.Z,{type:"date",id:"start_date",name:"start_date",onChange:D})]})}),(0,Se.jsx)(i.Z,{md:"6",children:(0,Se.jsxs)(O.Z,{children:[(0,Se.jsx)(S.Z,{for:"end_date",children:"End date"}),(0,Se.jsx)(C.Z,{type:"date",id:"end_date",name:"end_date",onChange:D})]})})]})]}),(0,Se.jsxs)(T.Z,{children:[(0,Se.jsx)(_.Z,{color:"secondary",outline:!0,onClick:f.bind(null),children:"Cancel"}),(0,Se.jsx)(_.Z,{type:"submit",color:"success",disabled:d,className:"d-flex gap-1 align-items-center",children:d?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(P.Z,{className:"me-2",size:"sm",color:"light"}),"Sending"]}):"Send"})]})]})]})]})};var Qe=s(46272),Xe=s(79617),et=s(20890),tt=s(14097);s(42459);const st=()=>{const{auth:e}=(0,B.Z)(),{projectId:t}=(0,z.UO)(),[s,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(void 0),[u,h]=(0,n.useState)(),[m,p]=(0,n.useState)(),[x,v]=(0,n.useState)(!1),[f,j]=(0,n.useState)(),[g,b]=(0,n.useState)(),y=(0,M.Z)(),{search:N}=(0,z.TH)(),{isLoading:w,error:k,data:Z,refetch:O}=(0,E.a)({queryKey:["act"],queryFn:()=>y.get("api/task/".concat(t,"/activities/all").concat(N)).then((e=>(j(e.data.project),e.data.data)))});(0,n.useEffect)((()=>{b(Z)}),[Z]);const S=e=>{o(!0),d(e)},T=async t=>{h(t),p(!0),await y.post("api/task/".concat(null===e||void 0===e?void 0:e.user.employe_id,"/").concat(t,"/favorite")).then((e=>{O(),(0,W.Z)("success",e.data.message)})).catch((()=>{(0,W.Z)("error","Something went wrong.")})),h(),p(!1)},D=["Director"],A=["Manager"];(0,n.useEffect)((()=>{null!==e&&void 0!==e&&e.user.roles.find((e=>D.includes(e)))&&v(!0)}),[e]);const[I,U]=n.useState(null),q=Boolean(I),H=q?"simple-popover":void 0;return(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(i.Z,{children:(0,Se.jsx)(a.Z,{className:"rounded-3",children:(0,Se.jsx)(l.Z,{children:w?"loading...":k?"Something went wrong.":(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)(r.Z,{children:[(0,Se.jsx)(i.Z,{sm:"12 mb-2",md:"6",children:(0,Se.jsxs)("div",{className:"d-flex gap-2",children:[(0,Se.jsxs)(_.Z,{type:"button",className:"d-flex align-items-center gap-2 rounded-3",color:"light",size:"sm",children:[(0,Se.jsx)(R(),{icon:"filter_list",style:{fontSize:"12px"}}),"Sort"]}),(0,Se.jsxs)(_.Z,{type:"button",className:"d-flex align-items-center gap-2 rounded-3",color:"light",size:"sm",children:[(0,Se.jsx)(R(),{icon:"tune",style:{fontSize:"12px"}}),"Filters"]})]})}),(0,Se.jsx)(i.Z,{sm:"12",md:"6",children:(0,Se.jsxs)("div",{className:"d-flex gap-3 col-md-6 w-100",children:[(0,Se.jsxs)("div",{className:"w-100 position-relative",children:[(0,Se.jsx)(C.Z,{type:"text",className:"rounded-3",bsSize:"md",placeholder:"Search task...",onChange:e=>(e=>{const t=Z.filter((t=>t.task_title.toLowerCase().includes(e.toLowerCase())));b(t)})(e.target.value)}),(0,Se.jsxs)("div",{className:"position-absolute top-0 end-0 h-100 p-1",children:[(0,Se.jsx)(_.Z,{type:"button",className:"btn btn-light w-100 h-100 border-0 rounded-3 text-muted","aria-describedby":H,variant:"contained",onClick:e=>{U(e.currentTarget)},children:(0,Se.jsx)(R(),{icon:"more_horiz",style:{fontSize:"16px"}})}),(0,Se.jsx)(Xe.ZP,{id:H,open:q,anchorEl:I,onClick:()=>{U(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,Se.jsx)(et.Z,{sx:{p:2},children:(0,Se.jsxs)(i.Z,{children:[(0,Se.jsx)(r.Z,{children:(0,Se.jsx)(F.rU,{to:"#",children:"Task"})}),(0,Se.jsx)(r.Z,{children:(0,Se.jsx)(F.rU,{to:"#",children:"Employee"})}),(0,Se.jsx)(r.Z,{children:(0,Se.jsx)(F.rU,{to:"#",children:"Date"})})]})})})]})]}),(null===e||void 0===e?void 0:e.user.roles.find((e=>A.includes(e))))&&(0,Se.jsx)(Qe.WD,{document:(0,Se.jsx)(tt.Z,{projectTitle:f,data:Z}),fileName:"Task Report - ".concat(null===f||void 0===f?void 0:f.project_number," - ").concat(null===f||void 0===f?void 0:f.division),style:{textDecoration:"none"},children:(0,Se.jsx)(_.Z,{type:"button",className:"btn btn-light-info text-info rounded-3 d-flex py-2",children:(0,Se.jsx)(R(),{icon:"file_download",style:{fontSize:"18px"}})})})]})})]}),(0,Se.jsxs)(i.Z,{sm:"12 overflow-auto",children:[(0,Se.jsxs)("h6",{className:"fw-bold mt-3",children:["List of tasks from ",null===f||void 0===f?void 0:f.division]}),(0,Se.jsxs)("table",{className:"rounded-corners",children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{width:"30",children:"#"}),(0,Se.jsx)("th",{children:"Task title"}),(0,Se.jsx)("th",{width:"",children:"Status"}),(0,Se.jsx)("th",{children:"Progress"}),(0,Se.jsx)("th",{width:"100",children:"PIC"}),x&&(0,Se.jsx)("th",{width:"50"})]})}),(0,Se.jsx)("tbody",{children:(null===g||void 0===g?void 0:g.length)>0?null===g||void 0===g?void 0:g.map(((e,t)=>{var s,i,a,l;return(0,Se.jsxs)(n.Fragment,{children:[(0,Se.jsxs)("tr",{children:[(0,Se.jsxs)("td",{children:[t+1,"."]}),(0,Se.jsxs)("td",{style:{cursor:"pointer"},onClick:()=>S(e),children:[(0,Se.jsx)("span",{style:{fontWeight:"600"},children:e.task_title}),(0,Se.jsx)("br",{}),(0,Se.jsxs)(ze.Z,{color:"light",className:"text-muted",children:[null===e||void 0===e||null===(s=e.subtasks)||void 0===s?void 0:s.length," subtask"]}),"  ",(0,Se.jsxs)(ze.Z,{color:"light",className:"text-muted",children:[(0,Se.jsx)(R(),{icon:"comment",style:{fontSize:"12px"}}),e.comments]})]}),(0,Se.jsx)("td",{children:0===e.status?(0,Se.jsx)(ze.Z,{color:"light",className:"text-dark",children:"To Do"}):1===e.status?(0,Se.jsx)(ze.Z,{color:"warning",children:"In Progress"}):2===e.status?(0,Se.jsx)(ze.Z,{color:"light",className:"text-dark",children:"Under Review"}):3===e.status?(0,Se.jsx)(ze.Z,{color:"success",children:"Approved"}):(0,Se.jsx)(ze.Z,{color:"danger",children:"Revision"})}),(0,Se.jsx)("td",{children:(0,Se.jsxs)("span",{className:"badge bg-light-success text-primary rounded-pill d-inline-block fw-bold",children:[null===e||void 0===e||null===(i=e.task_progress)||void 0===i?void 0:i.toFixed(),"%"]})}),(0,Se.jsx)("td",{children:(0,Se.jsx)("div",{className:"members",children:(0,Se.jsxs)("div",{className:"member-item",children:[null===e||void 0===e||null===(a=e.pics)||void 0===a?void 0:a.map(((e,t)=>{var s;return t<2&&(0,Se.jsxs)("div",{className:"ava-img",children:[(0,Se.jsx)("img",{id:"tooltip-".concat(e.id),src:L,className:"rounded-circle",alt:"avatar",width:"35",height:"35"}),(0,Se.jsx)(Ce,{title:e.first_name,id:null===(s=e.id)||void 0===s?void 0:s.toString()})]},e.id)})),(null===e||void 0===e||null===(l=e.pics)||void 0===l?void 0:l.length)>2&&(0,Se.jsxs)("div",{className:"member-plus bg-light-info text-info fw-bold",children:["+",e.pics.length-2]})]})})}),x&&(0,Se.jsx)("td",{className:"text-center",children:m&&u===e.task_id?(0,Se.jsx)(P.Z,{size:"sm",color:"warning"}):(0,Se.jsx)("abbr",{title:"Mark task",style:{textDecoration:"none"},children:(0,Se.jsx)("button",{type:"button",className:"fav-btn",onClick:()=>T(e.task_id),children:(0,Se.jsx)(R(),{icon:"star",className:"".concat(e.isFavorite&&"is_favorite")})})})})]}),e.subtasks.length>0&&e.subtasks.map((e=>{var t,s,n;return(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{}),(0,Se.jsxs)("td",{onClick:()=>S(e),style:{cursor:"pointer"},children:[e.task_title,(0,Se.jsx)("br",{}),(0,Se.jsxs)(ze.Z,{color:"light",className:"text-muted",children:[(0,Se.jsx)(R(),{icon:"comment",style:{fontSize:"12px"}}),e.comments]})]}),(0,Se.jsx)("td",{children:"-"}),(0,Se.jsx)("td",{children:(0,Se.jsxs)("span",{className:"badge bg-light-primary text-primary rounded-pill d-inline-block fw-bold",children:[null===e||void 0===e||null===(t=e.task_progress)||void 0===t?void 0:t.toFixed(),"%"]})}),(0,Se.jsx)("td",{children:(0,Se.jsx)("div",{className:"members",children:(0,Se.jsxs)("div",{className:"member-item",children:[null===e||void 0===e||null===(s=e.pics)||void 0===s?void 0:s.map(((e,t)=>{var s;return t<2&&(0,Se.jsxs)("div",{className:"ava-img",children:[(0,Se.jsx)("img",{id:"tooltip-".concat(e.id),src:L,className:"rounded-circle",alt:"avatar",width:"35",height:"35"}),(0,Se.jsx)(Ce,{title:e.first_name,id:null===(s=e.id)||void 0===s?void 0:s.toString()})]},e.id)})),(null===e||void 0===e||null===(n=e.pics)||void 0===n?void 0:n.length)>2&&(0,Se.jsxs)("div",{className:"member-plus bg-light-info text-info fw-bold",children:["+",e.pics.length-2]})]})})}),x&&(0,Se.jsx)("td",{className:"text-center",children:m&&u===e.task_id?(0,Se.jsx)(P.Z,{size:"sm",color:"warning"}):(0,Se.jsx)("abbr",{title:"Mark task",style:{textDecoration:"none"},children:(0,Se.jsx)("button",{type:"button",className:"fav-btn",onClick:()=>T(e.task_id),children:(0,Se.jsx)(R(),{icon:"star",className:"".concat(e.isFavorite&&"is_favorite")})})})})]},e.task_id)}))]},e.task_id)})):(0,Se.jsx)("tr",{children:(0,Se.jsx)("td",{colSpan:"5",align:"center",children:"Data not found."})})})]})]})]})})})}),s&&(0,Se.jsx)(Ie,{modal:s,setModal:o,toggle:()=>{o(!s)},task:c,mode:"activities"})]})},nt=e=>{let{setTotalBastReview:t}=e;const{auth:s}=(0,B.Z)(),{projectId:r}=(0,z.UO)(),[c,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(""),[m,p]=(0,n.useState)(),[x,v]=(0,n.useState)(),[f,j]=(0,n.useState)(),[g,b]=(0,n.useState)(),[y,N]=(0,n.useState)(!1),S=(0,M.Z)(),{isLoading:D,error:A,data:I,refetch:q}=(0,E.a)({queryKey:["bast-review"],queryFn:()=>S.get("api/project/".concat(r,"/").concat(null===s||void 0===s?void 0:s.user.employe_id,"/bast/review")).then((e=>e.data.data))});(0,n.useEffect)((()=>{t(10)}),[I]);const H=(e,t,s,n)=>{d(!0),h(e),v(t||null),j(s),b(n)},K=()=>{d(!c)};return(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(i.Z,{children:D?(0,Se.jsx)(a.Z,{children:(0,Se.jsx)(l.Z,{children:"Loading..."})}):A?"Something went wrong.":(0,Se.jsx)(a.Z,{className:"custom-card",children:I&&(0,Se.jsxs)(l.Z,{children:[(0,Se.jsxs)(o.Z,{tag:"h4",className:"d-flex justify-content-between",children:[(0,Se.jsx)("div",{className:"d-flex gap-2",children:(0,Se.jsx)(ze.Z,{color:"light",className:"text-dark",children:"Review BAST"})}),(0,Se.jsx)("span",{style:{fontSize:"14px"},children:(0,U.Z)(I.created_at)})]}),(0,Se.jsx)("div",{className:"d-flex  justify-content-center",children:(0,Se.jsxs)("h5",{children:["Handover of the project from ",(0,Se.jsx)("strong",{children:I.old_pic_division})," to"," ",(0,Se.jsx)("strong",{children:I.new_pic_division})]})}),(0,Se.jsx)("span",{className:"text-dark",children:"BAST file:"}),(0,Se.jsx)("div",{className:"",children:(0,Se.jsx)("div",{className:"d-flex gap-3",children:(0,Se.jsx)(F.rU,{className:"file-link",to:"",target:"blank",children:I.file})})}),(0,Se.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-4 border  py-2 px-3",style:{borderRadius:"10px"},children:[(0,Se.jsx)("div",{className:"d-flex gap-4",children:(0,Se.jsxs)("div",{className:"d-flex gap-3 align-items-center",children:[(0,Se.jsx)("img",{src:L,className:"rounded-circle",alt:"avatar",width:"45",height:"45"}),(0,Se.jsxs)("div",{className:"d-flex flex-column",children:[(0,Se.jsx)("span",{className:"text-dark fw-bold",children:I.old_pic}),(0,Se.jsx)("small",{className:"text-muted",children:I.old_pic_division})]})]})}),(0,Se.jsxs)("div",{className:"d-flex gap-2",children:[(0,Se.jsx)(_.Z,{type:"button",size:"md",color:"warning",outline:!0,onClick:()=>H("revision",I.old_pic_id,I.review_by),children:"Revision"}),(0,Se.jsx)(_.Z,{type:"button",size:"md",color:"success",onClick:()=>H("approve",I.old_pic_id,I.new_pic_id,I.review_by),children:"Approve"})]})]})]})})}),(0,Se.jsxs)(w.Z,{isOpen:c,toggle:K.bind(null),size:"md",fade:!1,centered:!0,children:[(0,Se.jsx)(k.Z,{toggle:K.bind(null),children:"approve"===u?"Approval":"Revision"}),(0,Se.jsxs)(Fe.Z,{onSubmit:async e=>{e.preventDefault(),N(!0),await S.post("api/project/".concat(null===I||void 0===I?void 0:I.history_id,"/bast/approval"),{project_id:r,old_pic:x,notif_to:f,review_by:g,status:"approve"===u?"handover":"revision",note:m}).then((()=>{q(),(0,W.Z)("success","BAST has been ".concat("approve"===u?"approved":"reviewed"))})).catch((e=>console.log(e))),d(!1),N(!1)},children:[(0,Se.jsx)(Z.Z,{children:(0,Se.jsx)(O.Z,{children:(0,Se.jsx)(C.Z,{type:"textarea",id:"goals",name:"goals",placeholder:"Comment here..",rows:"3",required:!0,onChange:e=>p(e.target.value)})})}),(0,Se.jsxs)(T.Z,{children:[(0,Se.jsx)(_.Z,{color:"secondary",outline:!0,onClick:K.bind(null),children:"Cancel"}),(0,Se.jsx)(_.Z,{type:"submit",color:"".concat("approve"===u?"success":"warning"),disabled:y,className:"d-flex gap-1 align-items-center",children:y?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(P.Z,{className:"me-2",size:"sm"}),"Sending..."]}):(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(R(),{icon:"send",style:{fontSize:"20px"}}),"approve"===u?"Approve":"Send"]})})]})]})]})]})},it=e=>{let{navActive:t,setTotalReview:s,setTotalBastReview:n}=e;return(0,Se.jsxs)(Se.Fragment,{children:[1===t&&(0,Se.jsx)(Re,{}),2===t&&(0,Se.jsx)(He,{}),3===t&&(0,Se.jsx)(Ge,{}),4===t&&(0,Se.jsx)(Je,{}),5===t&&(0,Se.jsx)(Ye,{setTotalReview:s}),6===t&&(0,Se.jsx)($e,{}),7===t&&(0,Se.jsx)(st,{}),8===t&&(0,Se.jsx)(nt,{setTotalBastReview:n})]})};s(35754);const at=["Manager","Director"],lt=["Director"],rt=e=>{var t,s,o,c,d,u,h,m,p,x,v,f;let{navActive:j,setNavActive:g,totalReview:b,totalBastReview:y}=e;const[N,_]=(0,n.useState)(""),[w,k]=(0,n.useState)(0),{auth:Z}=(0,B.Z)(),{roles:O}=Z.user,S=(0,M.Z)(),{projectId:C}=(0,z.UO)(),[T,P]=(0,n.useState)(!1),[D,A]=(0,n.useState)(),I=new URLSearchParams(window.location.search),U=I.get("to");(0,n.useEffect)((()=>{"review"===U?g(5):"handover"===U?g(6):"overview"===U?g(1):"activities"===U?g(7):"bast-review"===U&&g(8)}),[I]),(0,n.useEffect)((()=>{null!==O&&void 0!==O&&O.find((e=>at.includes(e)))&&async function(){await S.get("api/task/".concat(C,"/level1/review")).then((e=>_(e.data.data))).catch((e=>console.log(e)))}()}),[b]),(0,n.useEffect)((()=>{null!==O&&void 0!==O&&O.find((e=>lt.includes(e)))&&async function(){await S.get("api/project/".concat(C,"/").concat(null===Z||void 0===Z?void 0:Z.user.employe_id,"/bast/review")).then((e=>{k(e.data.data)})).catch((e=>console.log(e)))}()}),[y]);const{isLoading:W,data:q}=(0,E.a)({queryKey:["project-number"],queryFn:()=>S.get("api/project/".concat(C)).then((e=>e.data.data))});(0,n.useEffect)((()=>{"business"===(null===q||void 0===q?void 0:q.category)?A(!0):A(!1)}),[q]);const H=["Staff","Manager"],K=["Staff","Manager","Director"],G=["Manager","Director"],V=["Staff"],J=["Director"],Y=["Manager","Director"],$=["Manager"];return(0,Se.jsxs)(i.Z,{children:[(0,Se.jsxs)(i.Z,{className:"d-flex justify-content-between gap-3 mb-3 align-items-center",children:[(0,Se.jsxs)("div",{className:"project-nav overflow-auto",children:[(0,Se.jsx)(F.rU,{className:"".concat(1===j&&"active"," text-muted fw-bold"),onClick:()=>g(1),children:"Overview"}),(null===Z||void 0===Z||null===(t=Z.user)||void 0===t?void 0:t.roles.find((e=>H.includes(e))))&&(0,Se.jsx)(F.rU,{className:"".concat(2===j&&"active"," text-muted fw-bold"),onClick:()=>g(2),children:"Board"}),(null===Z||void 0===Z||null===(s=Z.user)||void 0===s?void 0:s.roles.find((e=>G.includes(e))))&&(0,Se.jsx)(F.rU,{className:"".concat(7===j&&"active"," text-muted fw-bold"),onClick:()=>g(7),children:"Activities"}),(null===Z||void 0===Z||null===(o=Z.user)||void 0===o?void 0:o.roles.find((e=>V.includes(e))))&&(0,Se.jsx)(Se.Fragment,{children:(0,Se.jsx)(F.rU,{className:"".concat(4===j&&"active"," text-muted fw-bold"),onClick:()=>g(4),children:"Files"})}),(null===Z||void 0===Z||null===(c=Z.user)||void 0===c?void 0:c.roles.find((e=>J.includes(e))))&&!(null!==Z&&void 0!==Z&&null!==(d=Z.user)&&void 0!==d&&d.roles.includes("Presdir"))&&(0,Se.jsxs)(F.rU,{className:"".concat(8===j&&"active"," text-muted fw-bold"),onClick:()=>g(8),children:["BAST Review"," ",(0,Se.jsx)("div",{color:"danger",className:"count ".concat(w?"bg-danger text-white":"bg-light text-dark"),children:null===w||void 0===w?void 0:w.length})]}),(null===Z||void 0===Z||null===(u=Z.user)||void 0===u?void 0:u.roles.find((e=>Y.includes(e))))&&(0,Se.jsx)(Se.Fragment,{children:(0,Se.jsxs)(F.rU,{className:"".concat(5===j&&"active"," text-muted fw-bold"),onClick:()=>g(5),children:["Review"," ",(0,Se.jsx)("div",{color:"danger",className:"count ".concat((null===N||void 0===N?void 0:N.length)>0?"bg-danger text-white":"bg-light text-dark"),children:null===N||void 0===N?void 0:N.length})]})}),(null===Z||void 0===Z||null===(h=Z.user)||void 0===h?void 0:h.roles.find((e=>$.includes(e))))&&(0,Se.jsxs)(F.rU,{className:"".concat(6===j&&"active"," text-muted fw-bold"),onClick:()=>g(6),children:["Handover"," "]}),(null===Z||void 0===Z||null===(m=Z.user)||void 0===m?void 0:m.roles.find((e=>K.includes(e))))&&(0,Se.jsx)(F.rU,{className:"".concat(3===j&&"active"," text-muted fw-bold"),onClick:()=>g(3),children:"Members"})]}),(0,Se.jsx)("h3",{className:"fw-bold",children:W?"Loading..":null===q||void 0===q?void 0:q.project_number})]}),(0,Se.jsx)(a.Z,{className:"rounded-3 mb-3",children:(0,Se.jsx)(l.Z,{children:W?(0,Se.jsx)("p",{children:"Loading..."}):(0,Se.jsxs)(r.Z,{children:[(0,Se.jsxs)(i.Z,{lg:"8",children:[(0,Se.jsx)(r.Z,{md:"12",children:(0,Se.jsx)("h5",{className:"fw-bold",children:null===q||void 0===q?void 0:q.project_name})}),D?(0,Se.jsxs)(r.Z,{lg:"12",children:[(0,Se.jsx)(i.Z,{sm:"12 mb-2",md:"4",children:(0,Se.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,Se.jsx)(R(),{icon:"manage_accounts",className:"text-muted",style:{fontSize:"28px"}}),(0,Se.jsxs)("div",{className:"d-flex flex-column",children:[(0,Se.jsx)("span",{className:"text-muted",style:{fontSize:"10px",marginBottom:"-4px"},children:"Partner"}),(0,Se.jsx)("small",{className:"fw-bold",children:(null===q||void 0===q||null===(p=q.current_stage)||void 0===p?void 0:p.partner)||"-"})]})]})}),(0,Se.jsx)(i.Z,{sm:"12 mb-2",md:"4",children:(0,Se.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,Se.jsx)(R(),{icon:"handshake",className:"text-muted",style:{fontSize:"28px"}}),(0,Se.jsxs)("div",{className:"d-flex flex-column",children:[(0,Se.jsx)("span",{className:"text-muted",style:{fontSize:"10px",marginBottom:"-4px"},children:"Schema"}),(0,Se.jsx)("small",{className:"fw-bold",children:"jo"===(null===q||void 0===q||null===(x=q.current_stage)||void 0===x?void 0:x.schema)?"Join Operational":"jv"===(null===q||void 0===q||null===(v=q.current_stage)||void 0===v?void 0:v.schema)?"Join Venture":"-"})]})]})}),(0,Se.jsx)(i.Z,{sm:"12 mb-2",md:"4",children:(0,Se.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,Se.jsx)(R(),{icon:"play_circle_outline",className:"text-muted",style:{fontSize:"28px"}}),(0,Se.jsxs)("div",{className:"d-flex flex-column",children:[(0,Se.jsx)("span",{className:"text-muted",style:{fontSize:"10px",marginBottom:"-4px"},children:"Phase"}),(0,Se.jsx)("small",{className:"fw-bold",children:null===q||void 0===q||null===(f=q.current_stage)||void 0===f?void 0:f.phase})]})]})})]}):(0,Se.jsx)(r.Z,{lg:"12",children:(0,Se.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,Se.jsx)(R(),{icon:"work_off",style:{fontSize:"18px"}}),(0,Se.jsx)("small",{className:"fw-bold",children:"Non-business"})]})})]}),(0,Se.jsx)(i.Z,{lg:"4",className:"d-flex align-items-center justify-content-end",children:(0,Se.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,Se.jsxs)("div",{className:"d-flex flex-column align-items-end",style:{marginLeft:"10px"},children:[(0,Se.jsx)("small",{className:"fw-bold",children:null===q||void 0===q?void 0:q.pic_active.first_name}),(0,Se.jsx)("span",{className:"fw-bold",style:{fontSize:"14px"},children:null===q||void 0===q?void 0:q.pic_active.organization_name})]}),(0,Se.jsx)("img",{src:L,className:"rounded-circle",alt:"avatar",width:"35",height:"35"}),(null===Z||void 0===Z?void 0:Z.user.first_name)===(null===q||void 0===q?void 0:q.created_by)?(0,Se.jsxs)("div",{className:"action-table",children:[(0,Se.jsx)("button",{type:"button",className:"btn d-flex",onClick:()=>P(!0),children:(0,Se.jsx)(R(),{icon:"more_vert"})}),T&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"action-overlay",onClick:()=>P(!1)}),(0,Se.jsxs)("div",{className:"action-options",children:[(0,Se.jsxs)(F.rU,{to:"/",className:"text-muted",children:[(0,Se.jsx)(R(),{icon:"update"}),"Update"]}),(0,Se.jsxs)("button",{type:"button",className:"text-muted fw-bold",onClick:()=>P(void 0),children:[(0,Se.jsx)(R(),{icon:"delete"}),"Delete"]})]})]})]}):""]})})]})})})]})},ot={task:["satu","dua"]},ct=(0,n.createContext)(ot),dt=(e,t)=>"SET_TASK"===t.type?{task:t.payload}:e,ut=e=>{let{children:t}=e;const[s,i]=(0,n.useReducer)(dt,ot);return(0,Se.jsx)(ct.Provider,{value:{task:s.task,dispatch:i},children:t})},ht=()=>{const{auth:e}=(0,B.Z)(),{roles:t}=null===e||void 0===e?void 0:e.user,[s,i]=(0,n.useState)(2),[a,l]=(0,n.useState)(0),[r,o]=(0,n.useState)(0);return(0,n.useEffect)((()=>{t.includes("Director")&&i(1)}),[t]),(0,Se.jsx)(ut,{children:(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(rt,{navActive:s,setNavActive:i,totalReview:a,totalBastReview:r}),(0,Se.jsx)(it,{navActive:s,setTotalReview:l,setTotalBastReview:o})]})})}},87535:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n=e=>{const t=new Date(e);return"".concat(t.getDate()," ").concat(["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Aug","Sep","Oct","Nov","Des"][t.getMonth()]," ").concat(t.getFullYear())}},90838:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n=e=>{if(e){const t=new Date(e),s=t.toDateString(),n=t.toLocaleString().split(",")[1];return"".concat(s,", ").concat(n.split(":")[0],":").concat(n.split(":")[1]," ").concat(n.split(" ")[2]||"")}return e}},23606:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e)},14448:(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});var n=s(72791),i=s(52007),a=s.n(i),l=s(81694),r=s.n(l),o=s(9622),c=["className","cssModule","tag"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},d.apply(this,arguments)}function u(e,t){if(null==e)return{};var s,n,i=function(e,t){if(null==e)return{};var s,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)s=a[n],t.indexOf(s)>=0||(i[s]=e[s]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)s=a[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i}var h={className:a().string,cssModule:a().object,tag:o.iC};function m(e){var t=e.className,s=e.cssModule,i=e.tag,a=void 0===i?"div":i,l=u(e,c),h=(0,o.mx)(r()(t,"card-title"),s);return n.createElement(a,d({},l,{className:h}))}m.propTypes=h;const p=m},69399:(e,t,s)=>{"use strict";s.d(t,{Z:()=>j});var n=s(72791),i=s(52007),a=s.n(i),l=s(9622);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var o=["className","cssModule","tag","innerRef"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},c.apply(this,arguments)}function d(e,t){if(null==e)return{};var s,n,i=function(e,t){if(null==e)return{};var s,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)s=a[n],t.indexOf(s)>=0||(i[s]=e[s]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)s=a[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i}function u(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,n=x(e);if(t){var i=x(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}(this,s)}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}var v={children:a().node,tag:l.iC,innerRef:a().oneOfType([a().object,a().func,a().string]),className:a().string,cssModule:a().object},f=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(r,e);var t,s,i,a=m(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=a.call(this,e)).getRef=t.getRef.bind(p(t)),t.submit=t.submit.bind(p(t)),t}return t=r,(s=[{key:"getRef",value:function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e}},{key:"submit",value:function(){this.ref&&this.ref.submit()}},{key:"render",value:function(){var e=this.props,t=e.className,s=e.cssModule,i=e.tag,a=void 0===i?"form":i,r=e.innerRef,u=d(e,o),h=(0,l.mx)(t,s);return n.createElement(a,c({},u,{ref:r,className:h}))}}])&&u(t.prototype,s),i&&u(t,i),Object.defineProperty(t,"prototype",{writable:!1}),r}(n.Component);f.propTypes=v;const j=f},73830:(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});var n=s(72791),i=s(52007),a=s.n(i),l=s(81694),r=s.n(l),o=s(9622),c=["className","cssModule","tag"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},d.apply(this,arguments)}function u(e,t){if(null==e)return{};var s,n,i=function(e,t){if(null==e)return{};var s,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)s=a[n],t.indexOf(s)>=0||(i[s]=e[s]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)s=a[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i}var h={className:a().string,cssModule:a().object,tag:o.iC};function m(e){var t=e.className,s=e.cssModule,i=e.tag,a=void 0===i?"div":i,l=u(e,c),h=(0,o.mx)(r()(t,"modal-footer"),s);return n.createElement(a,d({},l,{className:h}))}m.propTypes=h;const p=m},35754:()=>{},42459:()=>{},87681:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/user1.6ac95ef9bc0c027733ea.jpg"},42480:()=>{}}]);
//# sourceMappingURL=534.1d8d1ee7.chunk.js.map